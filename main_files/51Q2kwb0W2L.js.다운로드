(function(A){var B=window.AmazonUIPageJS||window.P,I=B._namespace||B.attributeErrors,c=I?I("DPTwisterPlusDesktopConfiguratorAssets",""):B;c.guardFatal?c.guardFatal(A)(c,window):c.execute(function(){A(c,window)})})(function(A,B,I){A.when("desktop-configurator-view","desktop-configurator-widgets-factory","desktop-configurator-slot-manager","twister-dynamic-style","desktop-configurator-logger","desktop-configurator-dimension-handler","desktop-configurator-side-sheet-view","desktop-configurator-popover-factory").register("desktop-configurator-view-initialiser",
function(c,q,u,v,m,p,y,F){return function(w,k,z){var t=new m(w);return new c(w,k,q.Row,u,v,t,p,y,F,z)}});"use strict";A.when("A").register("desktop-configurator-dimension-handler",function(c){function q(c){this.numberOfDimensionsExpandedOnLanding=c.numberOfDimensionsExpanded||0;this.expandAllDimensions=-1===this.numberOfDimensionsExpandedOnLanding;this.dimensionKeyRowMap={};this.expandedDimensionList=[];this.maxNumberOfDimensionsExpanded=c.maxNumberOfDimensionsExpanded||1}q.prototype={registerDimension:function(c,
q){this.dimensionKeyRowMap[c]=q;(this.expandAllDimensions||this.expandedDimensionList.length<this.numberOfDimensionsExpandedOnLanding)&&this.expandedDimensionList.push(c)},init:function(){-1===this.maxNumberOfDimensionsExpanded&&(this.maxNumberOfDimensionsExpanded=Object.keys(this.dimensionKeyRowMap).length);for(var c=0;c<this.expandedDimensionList.length;c++)this.dimensionKeyRowMap[this.expandedDimensionList[c]].expand()},expandDimension:function(c){-1===this.expandedDimensionList.indexOf(c)&&this.expandedDimensionList.push(c);
if(this.maxNumberOfDimensionsExpanded<this.expandedDimensionList.length)for(var q=0;q<this.expandedDimensionList.length&&(this.expandedDimensionList[q]!==c&&this.dimensionKeyRowMap[this.expandedDimensionList[q]].collapse(),this.maxNumberOfDimensionsExpanded!==this.expandedDimensionList.length);q++);},collapseDimension:function(c){c=this.expandedDimensionList.indexOf(c);-1!==c&&this.expandedDimensionList.splice(c,1)}};return q});"use strict";A.when("A","desktop-configurator-constants","3p-promise").register("desktop-configurator-view",
function(c,q,u){function v(p,y,v,w,k,z,t,n,f,b){function a(){"function"===typeof B.markFeatureInteractive&&B.markFeatureInteractive("twister",{hasComponents:!0,components:[{name:"twister-desktopConfigurator"}]})}function h(){return c.map(e.dimList,function(b,a){if(!e.isSingletonMap[b])return new u(function(d){l(e.rows[b],b,a);d()})})}function l(b,a,g){var h=e.inlineTwisterData.slotsEnabledDimensions,f=!!((e.dimList.length===h.length?h[g]:h[0])&&d(a)),l=b.getInitialVisibleSwatchList(),t=[];c.each(p.tvm.dimtoValueMap[a],
function(b,d){b=r(b,e.data.imageUrlMap[a+"::"+d],e.data.popoverImageUrlMap[a+"::"+d],d,e.initSelectionState[a].val===d,l[d]?l[d].slotHtm:"",f,l[d]&&l[d].isVisible,l[d]&&l[d].unavailable,I,a,e.data.dimensionPageLoadUrls[a]?e.data.dimensionPageLoadUrls[a][b]:null);t.push(b)});e.swatches[a]=t}function g(){c.each(e.latestTwisterUpdates,function(b){null!==b&&e.twister.dimensionChanged(b)})}function d(){var e=p.state();return!!p.util.getAsinFromSelectionInfo(e)}function r(b,a,d,g,h,f,r,l,c,t,n,p){return{text:b,
image:a||"",popoverImage:d||"",name:g,id:n+"_"+g,selected:h,slotHtm:f,showSlot:r,isVisible:l,unavailable:c,defaultSlotUnavailable:e.data.defaultSlotUnavailable,isCirclularImageSwatch:e.inlineTwisterData&&"CIRCLE"===e.inlineTwisterData.swatchShape,asin:t,pageUrl:p}}function D(){function b(a,d,g){g=e.inlineTwisterData.stringTranslationMap?e.inlineTwisterData.stringTranslationMap.unselectedDimensionPrompt:"";var h=p.tvm.dimensionDisplayText[a];return{dimKey:a,titleSelectorPrefix:"inline-twister-dim-title-",
titleValueSelector:"inline-twister-dim-title-value",mainText:h,subText:-1!==d?p.tvm.dimtoValueMap[a][d]:g.replace("###dimension",(h||"").toLowerCase())}}function g(b,a,d,h,f,l,c){d=r(f,e.data.imageUrlMap[h+"::"+d.index],e.data.popoverImageUrlMap[h+"::"+d.index],d.index,!1,"",l,!0,c,d.asin,h,e.data.dimensionPageLoadUrls[h]?e.data.dimensionPageLoadUrls[h][f]:null);b.toggleSwatch&&(f=b.toggleSwatch.createSwatch(d,e.inlineTwisterData.numOfRowsPerDimension),d.isVisible=f.isVisible);a.push(d);b=b.toggleSwatch?
b.toggleSwatch.getNumberOfSwatchesPerRow():0;!e.inlineVariationsSize[h]&&0<b&&(e.inlineVariationsSize[h]=b*e.inlineTwisterData.numOfRowsPerDimension)}function h(b,d,a,f){var l=p.util.getDimAvailability(d,w),c=p.tvm.dimtoValueMap[d],t=p.tvm.dimCombinations,n=0,k=[],m;-1!==a&&(m=e.data.dimensionPageLoadUrls[d]?e.data.dimensionPageLoadUrls[d][c[a]]:null,t=r(c[a],e.data.imageUrlMap[d+"::"+a],e.data.popoverImageUrlMap[d+"::"+a],a,!0,"",f,!0,!1,t[L],d,m),k.push(t),b.toggleSwatch&&b.toggleSwatch.createSwatch(t,
e.inlineTwisterData.numOfRowsPerDimension),n++);for(m=0;m<l.available.length&&!(t=l.available[m],a!==t.index&&(g(b,k,t,d,c[t.index],f,!1),n++,e.inlineVariationsSize[d]&&n>=e.inlineVariationsSize[d]));m++);for(m=0;m<l.unavailable.length&&!(e.inlineVariationsSize[d]&&n>=e.inlineVariationsSize[d]);m++)t=l.unavailable[m],g(b,k,t,d,c[t.index],f,!0),n++;e.inlineVariationsSize[d]||(e.inlineVariationsSize[d]=n,b.toggleSwatch&&b.toggleSwatch.setNumberOfSwatchesPerRow(n));return k}function l(b,a,h,g,r,t,n,
k){var y=!(!a||!d(h));a=p.util.getDimAvailability(h,g);var q={},D=0,G=f.updateIfCurrentlyActive,u=-1;m.each(g,function(b,d){d.dimKey===h&&(u=d.val)});-1!==u&&(t&&(q[u]=D),D++);var v=e.rows[h];c.each(a.available,function(d){b[d.index]=b[d.index]||{};var a=b[d.index];a.unavailable=!1;a.selected&&(u=d.index,a.isVisible||(E[h]&&b[E[h]]&&(b[E[h]].isVisible=!1),E[h]=d.index),a.isVisible=!0);t&&(a.isVisible=D<e.inlineVariationsSize[h]||a.selected);k&&(a.isVisible=!0);var g=a.isVisible||r,l=r?a.id+"_sec":
a.id;y&&g?a.slotHtm=e.slotManager.get(d.asin,h,e.noOfLoadingIndicator,r,z,G.bind(f,l),n):(a.slotHtm=a.slotHtm||"",G(l,a.slotHtm));(r||k)&&v&&v.toggleSwatch&&(g=v.toggleSwatch.getSwatch(d.index),c.objectIsEmpty(g)&&(q[d.index]=D));t&&u!==d.index&&(q[d.index]=D);a.showSlot=y;a.selected||D++});c.each(a.unavailable,function(d){b[d.index]=b[d.index]||{};var a=b[d.index];a.unavailable=!0;t&&(a.isVisible=D<e.inlineVariationsSize[h]);k&&(a.isVisible=!0);a.slotHtm=y?e.data.defaultSlotUnavailable:"";t&&(q[d.index]=
D);a.showSlot=y;D++});J[h]=!0;return q}function t(a,b,h){var g=!(!a||!d(b)),l=e.rows[b].getInitialVisibleSwatchList();g&&c.each(l,function(d){if(!d.unavailable){var g=f.updateIfCurrentlyActive.bind(f,d.id),g=e.slotManager.get(d.asin,b,e.noOfLoadingIndicator,!1,z,g,h);d.updateSlotNode({showSlot:a,slotHtm:g},!1,b)}})}function n(d){var a=!0;(e.inlineTwisterData.disableImageSwatch===I?0:e.inlineTwisterData.disableImageSwatch)||(a=!e.inlineTwisterData.imageDimensionKeysMap[d]);return a}function k(d,a,
b,h){var g=-1!==e.textSwatchList.indexOf(b);d&&g&&(!h||e.isSideSheetOpen)&&(e.slotManager.resetMinSlotHeight(b),d=a.toggleSwatch.getSlotNodes(h),D(d,b),e.slotManager.updateSlotHeight(b,h))}function D(d,a){e.slotManager.resetSlotHeight(a);c.each(d,function(d,b){c.each(d,function(d){e.slotManager.setState(d,a,b)})})}function z(d,a){a&&!e.isSideSheetOpen||k(!0,e.rows[d],d,a)}function u(d,a,b){d={dimIndex:e.dimIndexMap[d],dimValueIndex:a};a=q.DP_STATE_VIEW_SUBTYPE;var h=e.dimensionsMap,g;g=p.state();
for(var f=q.CHAR_UNDERSCORE,l=[],r=0;r<e.dimensionsMap.length;r++){var c=g[r].val;-1===c&&(c=q.CHAR_ASTERISK);l.push(String(c))}g=f?l.join(f):l;return{divMetadata:d,eventType:b,subType:a,dimensionsMap:h,currDimCombId:g}}var w=p.state(),B=0,O={},L="",J={},K=e.inlineTwisterData.slotsEnabledDimensions,P=e.inlineTwisterData.popoverSlotsEnabledDimensions;m.each(w,function(d,a){O[a.dimKey]=a;L+=a.val+(d===w.length-1?"":":");e.dimIndexMap[a.dimKey]=d;e.dimensionsMap[d]=a.dimKey});e.initSelectionState=O;
m.each(e.dimList,function(d,a){var h=!(e.dimList.length===K.length?K[B]:K[0]);d=O[a].val;n(a)&&e.textSwatchList.push(a);d=b(a,d);d=new v("inline-twister-row-",d,{showSlot:!1,dimKey:a,inlineTwisterData:e.inlineTwisterData},{handleDimensionExpansion:function(d,b,g){a=d.dimKey;if(g){e.dimensionHandler.expandDimension(a);d=I;g={};J[a]?(g=l(e.swatches[a],b,a,p.state(),!1,!0,h,!!e.dimensionsExpandedInline[a]),e.indexTranslationMap[a]=g,d={swatches:e.swatches[a]}):(t(b,a,h),J[a]=!0);var f=e.rows[a];f.setState(d,
g,G,null,!1);k(b,f,a);e.logger.logDimensionExpanded(a);E[a]=null}else e.dimensionHandler.collapseDimension(a),e.logger.logDimensionCollapsed(a)}},e.logger);e.rows[a]=d;B+=1});0===e.inlineTwisterData.numberOfDimensionsExpanded&&(a(),H=!0);B=0;m.each(e.dimList,function(a,g){function r(a,d,b){if(d){var h=parseInt(d.buttonName,10),l=a[h]&&a[h].id?a[h].id:"";g=d.buttonGroupName;a[h]&&a[h].selected&&e.logger.logSelectedSwatchClick();l&&f.exists(l)&&f.hide(l);G=g;a={dimKey:g,val:h};e.isSwatchCreationComplete?
(e.twister.metaData(u(g,h,q.viewEvents.CLICK)),e.twister.dimensionChanged(a)):e.latestTwisterUpdates[g]=a;e.logger.logDimensionValueClick();b&&e.logger.logDimValueClickAfterAutoUpdate()}}function t(a,b){var g=b.data,h=b.type;b=b.$currentTarget;var l=g.id,r=!!d(a),r=!g.isImageSwatch&&E&&r&&J,r=g.isImageSwatch||r,c=!J,n=[];if(g){if(h===q.viewEvents.MOUSE_ENTER){var k=parseInt(g.name,10);n.push({dimKey:a,val:k});r&&f.show(l,b,g,c)}else r&&f.hide(l),n=p.state();e.twister.metaData(u(a,k,h));e.twister.dimensionPeek(n);
G=a}}function n(a,d){var b=parseInt(a.buttonName,10),g=e.swatches[d];(g?g[b]:I)?(x.setUserInteracting(!0),c.delay(function(){r(g,a)},350),e.logger.logSecViewSwatchClick()):A.log("Selected swatch not found on side sheet toggle button click. Value clicked: "+b+" ; Swatch length: "+e.swatches[d].length,Q.ERROR,Q.ATTRIBUTION)}function D(a,d){e.isSideSheetOpen=d;e.isWindowResizedAfterSideSheetOpen&&!d&&m.each(e.dimList,function(a,d){-1!==e.textSwatchList.indexOf(d)&&(F(d),(a=e.rows[d])&&a.toggleSwatch&&
a.toggleSwatch.alignTextSwatches())});e.isWindowResizedAfterSideSheetOpen=!1}function z(a,d,b){var g=e.inlineTwisterData.stringTranslationMap?e.inlineTwisterData.stringTranslationMap.desktopConfiguratorAllOptionsString:"",h=e.swatches[a].length,r={dimensionDisplayText:b.mainText,displayValueText:b.subText,dimKey:a,getSwatchInfo:x.getSwatch.bind(x),destroyPopover:f.destroy,optionsText:g,totalValueCount:h,isTextSwatch:H};e.sideSheet.open(r);var t={swatches:e.swatches[a]};c.delay(function(){var b=l(e.swatches[a],
d,a,p.state(),!0,!1,N,!1);x.setState(t,b,G,null,!0,!0);e.sideSheet.update(r);c.delay(function(){H&&k(d,x,a,!0);H&&x.toggleSwatch&&h<q.TEXT_ALIGNMENT_LIMIT&&x.toggleSwatch.alignTextSwatches(!1,!0)})},1E3);e.isSideSheetOpen=!0;e.isWindowResizedAfterSideSheetOpen=!1}function v(a,d,b){x.expanderContent.find(q.sideSheetSelectors.DIMENSION_VALUES_LIST).children().slice(1);var g=x.expanderContent.height();x.setMaxHeight(g);var h={swatches:e.swatches[a]};if(b)b=(R-e.inlineTwisterData.numOfRowsPerDimension+
1)*g,g=l(e.swatches[a],d,a,p.state(),!1,!1,N,!0),x.setState(h,g,G,null,!1,!0),x.triggerExpandOrCollapseAnimation(b,500),k(d,x,a),H&&x.toggleSwatch&&x.toggleSwatch.alignTextSwatches(!0),e.dimensionsExpandedInline[a]=!0;else{b=g;d=x.getDisplaySwatches();for(g=e.inlineTwisterData.numOfRowsPerDimension;g<d.length;g++){for(var r=!1,f=I,c=0;c<d[g].length;c++)if(f=d[g][c]?d[g][c].domNode:null){var t=parseInt(f.attr("data-idxInToggleSwatchList"),10),t=h.swatches[t];t.selected&&(r=!0);t.isVisible=t.selected}!r&&
f&&(b-=f[0].scrollHeight)}x.triggerExpandOrCollapseAnimation(b,250,function(){x.setState(h,{},G,null,!1)});e.dimensionsExpandedInline[a]=!1}}function F(a){e.isWindowResizedAfterSideSheetOpen=!0;e.isSideSheetOpen||(k(e.showSlotMap[a],e.rows[a],a,!1),e.sideSheet.refreshWidth())}var w,E,H,C;a=e.dimList.length===K.length?K[B]:K[0];var J=e.dimList.length===P.length?P[B]:P[0],N=!a,x;w=O[g].val;E=a||J;e.showSlotMap[g]=E;p.util.getDimensionInfo();a=-1!==y.singletonDimensionKeys.indexOf(g);e.isSingletonMap[g]=
a;x=e.rows[g];B+=1;if(!a&&x){a=!(!E||!d(g));C=[];H=-1!==e.textSwatchList.indexOf(g);var M={name:g,swatches:C,isTextSwatch:H,onChange:r,onHover:t,hideSlotsFromMainView:N};e.sideSheet.registerToggleButtonGroup(g,n,D);x.initializeComponents(M,E,{showSideSheet:z,toggleInlineExpansion:v,handleWindowResize:F});e.latestTwisterUpdates[g]=null;e.dimensionHandler.registerDimension(g,x);C=h(x,g,w,a);if(x&&x.toggleSwatch){H&&x.toggleSwatch.alignTextSwatches();M=x.toggleSwatch.getNumberOfSwatchesPerRow();a=c.filter(C,
function(a){return a.isVisible});var M=M*R,L=(p.tvm.dimtoValueMap[g]||[]).length;(a?a.length:C.length)<L&&(M>=L?x.showInlineExpansionLink():x.showSideSheetLink())}e.swatches[g]=C;e.twister=p.registerActive({viewAttribution:"DetailPage",viewName:"DesktopConfiguratorRowView_"+g},{updateView:function(a,d){var h={},r;if("VARIATION_CHANGE"===a){d=d.selected().selectionInfo();m.each(d,function(a,d){h[d.dimKey]=d});r=h[g].val;C=e.swatches[g];C[r]=C[r]||{};C[w]=C[w]||{};C[w].selected=!1;C[r].selected=!0;
a=b(g,w);w===r||H||x.setThumbnailImage(C[r].image);w=r;l(C,E,g,d,!1,!1,N,!!e.dimensionsExpandedInline[g]);d=b(g,r);r={swatches:C};var f=c.filter(C,function(a){return a.isVisible});C.length!==f.length||x.isInlineExpanded||(x.hideInlineExpansionLink(),e.inlineVariationsSize[g]=C.length);x.setExpanderHeaderAriaLabel(a,d);x.setState(r,{},G,d,!1);k(E,x,g)}else"VARIATION_PEEK"===a&&(d=d.peek().selectionInfo(),m.each(d,function(a,d){h[d.dimKey]=d}),r=h[g].val,d=b(g,r),G===g&&x.title.setState(d),e.sideSheet.activeDimKey===
g&&e.sideSheet.updateDimVal(d))}})}});H||a();e.dimensionHandler.init()}var e=this;this.isWindowResizedAfterSideSheetOpen=!1;this.data=y;this.noOfLoadingIndicator=1;this.dimList=e.data.dimensionList;this.dimensionsMap=[];this.dimensionsExpandedInline={};this.logger=z;this.inlineTwisterData=e.data?e.data.inlineTwisterData||{}:{};this.swatches={};this.sideSheet=new n(z);var E={};this.slotManager=new w(p,k,this.logger,this.inlineTwisterData);this.rows={};this.dimensionHandler=new t(e.inlineTwisterData);
this.isSingletonMap={};this.indexTranslationMap={};this.textSwatchList=[];var G,Q=q.loggingConstants,R=q.MAX_INLINE_ROWS;this.isSwatchCreationComplete=!1;this.latestTwisterUpdates={};this.initSelectionState={};f.setVisibleSlotConfig(this.inlineTwisterData&&this.inlineTwisterData.desktopConfiguratorSlotsInPopover?this.inlineTwisterData.desktopConfiguratorSlotsInPopover:[]);this.inlineVariationsSize={};this.dimIndexMap={};this.isSideSheetOpen=!1;this.showSlotMap={};var H=!1;p.slotsDimSum.addDefaultQueryParameter("showFancyPrice",
e.inlineTwisterData.showFancyPrice);p.slotsDimSum.addDefaultQueryParameter("twisterFlavor",q.DESKTOP_CONFIGURATOR_FLAVOR);(function(){var a=e.logger.createFunctionTimerInstance("desktopConfiguratorInitTime");a.start();D();a.stop()})();(function(){b.then(function(){c.each(e.rows,function(a){a.activatePageRefresh()})})})();A.execute("desktop-configurator-hidden-swatch-creation",function(){u.all(h()).then(function(){e.isSwatchCreationComplete=!0;g()})})}var m=c.$;v.prototype={onInitializeTwister:function(){var p=
"",y=m("#twister-plus-inline-twister .inline-twister-manual-load");0!==y.length&&(p=c.loadImageManually(y));return p}};return v});"use strict";A.when("A").register("desktop-configurator-constants",function(c){return{AJAX_CALL_TIMEOUT:2E4,DIMENSION_VALUE:"DimensionValue###",DISPLAY_VALUE:"DisplayValue###",SWATCH_DATA:"SwatchData###",DESKTOP_CONFIGURATOR_FLAVOR:"twisterPlusDesktopConfigurator",MAX_DIMENSION_FLAVOUR_CAP:3,POPOVER_DELAY:500,MAX_INLINE_ROWS:7,SIDE_SHEET_ANIMATION_SPEED:300,SIDE_SHEET_PADDING:32,
TEXT_SWATCH_MARGIN_RIGHT:6,CONFIGURED_SLOTS:["price","ms3","twisterAvailability","deliveryPromise"],DP_STATE_VIEW_SUBTYPE:"DETAILPAGE_STATE_VIEW_METADATA",CHAR_UNDERSCORE:"_",CHAR_ASTERISK:"*",DEFAULT_SCROLLER_WIDTH:20,BORDER_WIDTH:2,TEXT_ALIGNMENT_LIMIT:400,viewEvents:{MOUSE_ENTER:"mouseenter",MOUSE_LEAVE:"mouseleave",CLICK:"click"},sideSheetSelectors:{EXPANDER_CONTENT_PREFIX:"#inline-twister-expander-content-",SEC_VIEW_DIMENSION_VALUE_LIST:" #tp-inline-twister-dim-values-container",DIMENSION_VALUES_LIST:" .dimension-values-list",
DIMENSION_VALUES_LIST_ODD_CHILD:" .dimension-values-list \x3e :nth-child(odd)",DIMENSION_VALUES_LIST_EVEN_CHILD:" .dimension-values-list \x3e :nth-child(even)",LIST_ITEM_CIRCULAR_IMAGE:".dimension-value-list-item-circular-image",CIRCULAR_IMAGE_SWATCH_BUTTON:".circle-image-swatch-button",LIST_ITEM_SQUARE_IMAGE:".dimension-value-list-item-square-image",SQUARE_IMAGE_SWATCH_BUTTON:".image-swatch-button",TEXT_LIST_ITEM:".swatch-list-item-text",TEXT_SWATCH_BUTTON:".text-swatch-button",TEXT_SWATCH_BUTTON_WITH_SLOTS:".text-swatch-button-with-slots",
IMAGE_SELECTOR:".swatch-image",SEC_VIEW_TOGGLE_BUTTON_PREFIX:"sec_",DELAY:200},widgetSelectors:{EXPANDER_CONTENT_PREFIX:"#inline-twister-expander-content-",EXPANDER_HEADER_PREFIX:"#inline-twister-expander-header-",DIMENSION_EXPANDER_ICON_PREFIX:"#dimension-expander-icon-",EXPANDED_DIMENSION_TEXT_PREFIX:"#inline-twister-expanded-dimension-text-",COLLAPSED_DIMENSION_TEXT_PREFIX:"#inline-twister-collapsed-dimension-text-",AUTO_NOTIFICATION_EXPANDED:"#inline-twister-auto-notification-expanded",AUTO_NOTIFICATION_COLLAPSED:"#inline-twister-auto-notification-collapsed",
IMAGE_THUMBNAIL:".dimension-collapsed-image-thumbnail",SWATCH_NODE_SELECTOR:".inline-twister-swatch",SLOT_NODE_SELECTOR:".dimension-slot-info",TOGGLE_BUTTON_SELECTOR:".a-button-toggle",IMAGE_SELECTOR:".swatch-image",DIMENSION_VALUES_LIST:".dimension-values-list"},classes:{A_COLOR_ATTAINABLE:"a-color-attainable",AOK_HIDDEN:"aok-hidden",DIMENSION_EXPANDER_CONTENT_EXPAND:"dimension-expander-content-expand",ROTATE:"rotate",A_BUTTON_UNAVAILABLE:"a-button-unavailable",A_BUTTON_SELECTED:"a-button-selected",
A_BUTTON_FOCUS:"a-button-focus",ROW_IDENTIFIER_PREFIX:"desktop-configurator-dim-row-"},cssConstants:{BG_COLOR:"background-color",GREEN_BG_COLOR:"#D9EED9",WHITE_BG_COLOR:"white"},loggingConstants:{ATTRIBUTION:"TwisterPlusDesktopConfigurator",ERROR:"ERROR"}}});"use strict";A.when("A","twister-common-constants").register("desktop-configurator-logger",function(c,q){function u(c){if(!(this instanceof u))return new u(c);m||(m=this);m.twisterCore=c;return m}var v=c.$,m,p=B.ue;u.prototype={logCSMDataOnLanding:function(){var c=
0,m=0,q=0,k=this.twisterCore.util,z=k.tvm.dimensionInfo,t=this.twisterCore.state().length,n=Object.keys(k.tvm.dimCombinations).length;v.each(z,function(f,b){f=b.dimKey;k.isRequiredDim(f)&&q++;k.isSingletonDim(f)?m++:c++});p&&p.count&&(p.count("dpMobileTwisterDropdownPresent",c),p.count("dpMbileTwisterSingletonDim",m),p.count("dpMobileTwisterRequiredDim",q),p.count("dpMobileTwisterDimSize",t),p.count("dpMobileTwisterFamilySize",n),p.count("twisterPlus.inlineTwisterGV",1))},logCSMTagsOnLanding:function(m){function p(a,
d,b){var h=[];if(d===b)h.push(""),a=a[d],c.$.isArray(a)?c.each(a,function(a,d){h.push(a)}):h.push(a);else{var e=Math.floor((d+b)/2);d=p.call(this,a,d,e);var f=p.call(this,a,e+1,b);c.each(d,function(a,d){c.each(f,function(d,b){h.push(""===a?d:""===d?a:a+":"+d)})})}return h}var u=this,k=[],z=!0,t=!0,n=q.FAMILY_SIZE_BUCKET_LIMITS,f=q.DEFAULT_SELECTION_TAG,b=Object.keys(this.twisterCore.util.tvm.dimCombinations).length,a,h;m.dimensionList&&(a="variation_dimension:"+m.dimensionList.length,c.each(m.dimensionList,
function(a,d){u.addCSMTag(a)}));for(var l=1;l<n.length;l++)if(b<=n[l]){h="family_size_bucket:"+n[l-1]+"-"+n[l];break}else l===n.length-1&&(h="family_size_bucket:gt"+n[l]);m.dimensionInfo&&c.each(m.dimensionInfo,function(a,d){a.isSingleton||(z=!1)});n=z?"SingletonFamily":"DesktopConfigurator";m.initDimCombination&&c.each(m.initDimCombination,function(a,d){-1===a.val&&(t=!1)});a&&k.push(a);h&&k.push(h);n&&k.push(n);t&&f&&k.push(f);m=p.call(this,k,0,k.length-1);(function(a){var d=this;c.each(a,function(a,
b){a&&d.addCSMTag(a)})}).call(this,m)},createFunctionTimerInstance:function(c){var m=this;return{eventType:c,start:function(){this.startTime=Date.now()},stop:function(){this.startTime&&m.logCounter(this.eventType,Date.now()-this.startTime)}}},addCSMTag:function(c){B.ue&&B.ue.tag&&B.ue.tag(c)},logCounter:function(c,m){p&&p.count&&(m===I?p.count(c,(p.count(c)||0)+1):p.count(c,m))},logBottomSheetPageUpdate:function(c){this.logCounter("twisterPlus.inlineTwisterPageUpdate")},logSelectedSwatchClick:function(){this.logCounter("twisterPlus.inlineTwister.selectedSwatchClick")},
logDimensionValueClick:function(){this.logCounter("dpmobiletwisterclickOndimval")},logSecViewTotalCount:function(c){this.logCounter("twisterPlus.inlineTwister.secondaryViewCount."+c)},logSecViewGV:function(c){this.logCounter("twisterPlus.inlineTwister.secondaryViewGV."+c)},logSecViewClosed:function(c){this.logCounter("twisterPlus.inlineTwister.secondaryViewClosed."+c)},logDimensionCollapsed:function(c){this.logCounter("twisterPlus.inlineTwister.dimCollapse."+c)},logDimensionExpanded:function(c){this.logCounter("twisterPlus.inlineTwister.dimExpand."+
c)},logSecViewSwatchClick:function(){this.logCounter("twisterPlus.inlineTwister.secViewSwatchClick")},logDimExpansionAfterAutoUpdate:function(){this.logCounter("twisterPlus.inlineTwister.dimExpansionAfterAutoUpdate")},logDimValueClickAfterAutoUpdate:function(){this.logCounter("twisterPlus.inlineTwister.dimValueClickAfterAutoUpdate")},logAvailabilitySlotRender:function(){this.logCounter("twisterPlus.inlineTwister.availabilitySlotRender")},logPPUSlotRender:function(){this.logCounter("twisterPlus.inlineTwister.ppuSlotRender")},
logPrimeSlotRender:function(){this.logCounter("twisterPlus.inlineTwister.primeSlotRender")},logPriceSlotRender:function(){this.logCounter("twisterPlus.inlineTwister.priceSlotRender")},logDeliverySlotRender:function(){this.logCounter("twisterPlus.inlineTwister.deliverySlotRender")},logReviewsSlotRender:function(){this.logCounter("twisterPlus.inlineTwister.reviewsSlotRender")}};return u});"use strict";A.when("A").register("twister-dynamic-style",function(c){function q(c,p){this.name=c;this.styleNode;
this.rules=p||[];this.pendingRefresh}var u=c.$,v={};q.prototype={refresh:function(){var c=u("\x3cdiv /\x3e",{html:"\x26shy;\x3cstyle\x3e"+this.rules.join(" ")+"\x3c/style\x3e"});this.styleNode?(this.styleNode.replaceWith(c),delete this.styleNode,this.styleNode=c):(this.styleNode=c,this.styleNode.appendTo("body"))}};return{addCSSRules:function(c,p){v[c]?v[c].rules=p||[]:v[c]=new q(c,p);v[c].refresh()}}});"use strict";A.when("A","desktop-configurator-constants").register("desktop-configurator-slot-manager",
function(c,q){function u(c,n,f,b){this.twisterCore=c;this.batch={};this.currentBatch;this.maxSlotHeight={};this.minSlotHeight={};this.dynamicStyle=n;this.slotIdentifierMap={};this.logger=f;this.auiPriceSize=b&&b.auiPriceSize?b.auiPriceSize:"m";this.currentlyUnavailableMessage=b&&b.stringTranslationMap?b.stringTranslationMap.currentlyUnavailableMessage:"";this.desktopConfiguratorSlotsInMainView=b&&b.desktopConfiguratorSlotsInMainView?b.desktopConfiguratorSlotsInMainView:[]}function v(t,n,f,b,a){var h=
this.batch,l=this;h[t]=h[t]||[];h[t].push(f);clearTimeout(this.currentBatch);this.currentBatch=setTimeout(function(){var g=c.map(l.batch,function(a,b){return b});l.twisterCore.slotsDimSum.get(g,function(d){var g=l.batch[d.ASIN];g&&(k.each(g,function(a,b){b(d)}),delete l.batch[d.ASIN]);w(l.batch)&&(g=Object.keys(l.maxSlotHeight),c.each(g,function(d){b(d,a&&d===n)}))})},0)}function m(c,n,f,b){f[n]=f[n]||{};f[n].uniqueCount=f[n].uniqueCount||0;var a="inline-twister-dimsum-loading-"+n+"-"+f[n].uniqueCount;
f[n].uniqueCount+=1;return{loadingHtm:'\x3cdiv class\x3d"'+a+(c?" loading-indicator-1":"")+(b?" aok-hidden":"")+'"\x3e\x3cdiv\x3e\x3c/div\x3e\x3c/div\x3e',promise:function(b,c){var g=k("."+a+":not(.loading-indicator-in-popover)").parent();g.length&&(g.html(b),c(g))}}}function p(c){return c.replace(/\n/g,"").replace(/[\t ]+\</g,"\x3c").replace(/\>[\t ]+\</g,"\x3e\x3c").replace(/\>[\t ]+$/g,"\x3e")}function y(c,n,f){return p(z.default.call(this,c.content.twisterSlotDiv,n,f))}function A(c,n){if(!c||
0===c.length)return n;if(0<c.find(".loading-indicator-1").length)return c[0].scrollHeight;if(0===c.find(".defaultSlotUnavailable").length)return n;c=c[0].scrollHeight;n<c&&(n=c);return n}function w(c){for(var n in c)if(c.hasOwnProperty(n))return!1;return!0}var k=c.$,z={default:function(c,n,f){c=k("\x3cdiv\x3e"+c+"\x3c/div\x3e");var b=c.find(".price_slot_ppu"),a=c.find("#ms3slot"),h=c.find("#twisterAvailability"),l=c.find("#deliveryPromisePrefix"),g=c.find(".variationReviewsSection"),d=f?[]:this.desktopConfiguratorSlotsInMainView,
r=c.find(".twister_swatch_price");h.length&&((r.length||f)&&-1===d.indexOf("twisterAvailability")&&h.parent().addClass("aok-hidden"),h.parent().append("\x3cdiv class\x3d'js-dummy-twister-availability'\x3e\x3c/div\x3e"),h.parent().find(".a-size-medium").removeClass("a-size-medium").addClass("a-size-small"),h.parent().find(".a-size-mini").removeClass("a-size-mini").addClass("a-size-small"),h.parent().find(".a-size-large").removeClass("a-size-large").addClass("a-size-small"),n&&this.logger.logAvailabilitySlotRender());
0<r.length?(-1===d.indexOf("price")&&r.addClass("aok-hidden"),r.addClass("inline-twister-swatch-price"),f=c.find(".a-price"),0<f.length?f[0].dataset&&(f[0].dataset.aSize=this.auiPriceSize):(r.find(".a-size-small").removeClass("a-size-small").addClass("a-size-base").addClass("a-color-base"),r.find(".a-size-mini").removeClass("a-size-mini").addClass("a-size-base").addClass("a-color-base"),r.find(".a-size-large").removeClass("a-size-large").addClass("a-size-base").addClass("a-color-base")),f="a-size-small",
r.find(".olpWrapper").removeClass("a-size-mini a-size-micro a-size-medium a-size-large a-size-base a-color-base").addClass(f),b.length&&(f="twister-plus-inline-twister-ppu a-size-micro",b.removeClass("a-size-mini a-size-small a-size-medium a-size-large a-size-base a-color-base").addClass(f),n&&this.logger.logPPUSlotRender()),n&&this.logger.logPriceSlotRender()):(r=c.find("#sndbox-mobile-twister-price"),0<r.length&&n&&this.logger.logPriceSlotRender());a.length&&(-1===d.indexOf("ms3")&&a.addClass("aok-hidden"),
n&&this.logger.logPrimeSlotRender());0<l.length&&(l.removeClass("a-size-small a-color-secondary").addClass("a-color-base a-size-base"),-1===d.indexOf("deliveryPromise")&&l.parent().addClass("aok-hidden"),l.find("br").remove(),b=l.find("b"),0===b.length&&(b=l.find("span")),b.length&&(a=" "+p(b.text()),b.addClass("aok-hidden"),l.append("\x3cspan\x3e"+a+"\x3c/span\x3e")),n&&this.logger.logDeliverySlotRender());0<g.length&&(g.removeClass("a-spacing-micro a-spacing-top-micro").addClass("a-spacing-none a-spacing-top-none"),
-1===d.indexOf("variationReviews")&&g.addClass("aok-hidden"),n&&this.logger.logReviewsSlotRender());return c.html()}};u.prototype={get:function(c,n,f,b,a,h,l){var g=this,d=this.twisterCore.slotsDimSum.get([c]);if(d[c])return y.call(g,d[c].Value,!1,l);var r=m(f,n,g.slotIdentifierMap,l);v.call(this,c,n,function(a){r.promise(y.call(g,a.Value,!0,l),h)},a,b);return r.loadingHtm},setState:function(c,n,f){this.minSlotHeight[n]||(this.minSlotHeight[n]=[]);this.maxSlotHeight[n]||(this.maxSlotHeight[n]=[]);
this.minSlotHeight[n][f]=this.minSlotHeight[n][f]||0;this.minSlotHeight[n][f]=A(c,this.minSlotHeight[n][f]);this.maxSlotHeight[n][f]=this.maxSlotHeight[n][f]||0;var b=this.maxSlotHeight[n];var a=this.maxSlotHeight[n][f];!c||0===c.length||0<c.find(".loading-indicator-1").length||(c=c[0].scrollHeight,a<c&&(a=c));b[f]=a;this.maxSlotHeight[n][f]=this.maxSlotHeight[n][f]>this.minSlotHeight[n][f]?this.maxSlotHeight[n][f]:this.minSlotHeight[n][f]},updateSlotHeight:function(k,n){var f=[];c.each(this.maxSlotHeight[k],
function(b,a){n?f.push("#desktop-configurator-side-sheet #"+k+"dim_list .desktop-configurator-dim-row-"+a+" .dimension-slot-info {height: "+b+"px;}"):f.push("#inline-twister-expander-content-"+k+" .desktop-configurator-dim-row-"+a+" .dimension-slot-info {height: "+b+"px;}")});this.dynamicStyle.addCSSRules("twister-plus-desktop-configurator-slot-height-"+k,f)},resetMinSlotHeight:function(k){this.minSlotHeight[k]||(this.minSlotHeight[k]=[]);this.minSlotHeight[k]=c.map(this.minSlotHeight[k],function(){return 0})},
resetSlotHeight:function(k){this.maxSlotHeight[k]||(this.maxSlotHeight[k]=[]);this.dynamicStyle.addCSSRules("twister-plus-desktop-configurator-slot-height-"+k,[]);this.maxSlotHeight[k]=c.map(this.maxSlotHeight[k],function(){return 0})}};return u});"use strict";A.when("A","desktop-configurator-constants","detail-page-side-sheet").register("desktop-configurator-side-sheet-view",function(c,q,u){function v(f){var b=this,a=z("#twister-plus-inline-twister-container");0!==a.length&&(a=a[0].getBoundingClientRect().width,
this.sideSheetData=this.activeDimKey=null,this.swatchList=[],this.mainViewDimContainer=this.keyDownEventHandler=this.dimValContainer=null,this.updateSideSheetStatus={},this.scrollbarWidth=b.getScrollbarWidth(),this.sideSheet=new u({id:"desktop-configurator-side-sheet",shouldRenderHTMLString:!0,animationDuration:q.SIDE_SHEET_ANIMATION_SPEED,width:a+q.SIDE_SHEET_PADDING+b.scrollbarWidth,onAfterHide:function(){f.logSecViewClosed(b.activeDimKey);c.each(b.swatchList,function(a){var f=parseInt(a.getAttribute("data-idxInToggleSwatchList"),
10),f=b.sideSheetData.getSwatchInfo(f);c.declarative.remove(a,"desktop-configurator-swatch-hover:"+b.activeDimKey+"_sec");b.sideSheetData.destroyPopover(f.id+"_sec")});F.call(b);b.updateSideSheetStatus[b.activeDimKey]&&b.updateSideSheetStatus[b.activeDimKey](b.activeDimKey,!1);m.call(b)}}))}function m(){this.sideSheetData=this.activeDimKey=null;this.swatchList=[];this.mainViewDimContainer=this.keyDownEventHandler=this.dimValContainer=null}function p(f,b){c.each(f,function(a){var h="desktop-configurator-swatch-hover:"+
b+"_sec";try{c.declarative.remove(a,h),c.declarative.create(a,h,{})}catch(f){A.log("Hover event subscribe failed with error: "+this.name,n.ERROR,n.ATTRIBUTION)}})}function y(f){f=Array.prototype.slice.call(f);var b=z(f[0]).find("input");f=z(f[f.length-1]).find("input");this.keyDownEventHandler=w.bind(this,b,f);document&&document.addEventListener("keydown",this.keyDownEventHandler);c.delay(function(){b&&b.focus()})}function F(){if(this.mainViewDimContainer){var c=this.mainViewDimContainer.parent().find(".tp-side-sheet-link-container a")[0];
document&&document.removeEventListener("keydown",this.keyDownEventHandler);c&&c.focus()}}function w(c,b,a){a.code&&"tab"===a.code.toLowerCase()&&(a.shiftKey?document&&document.activeElement===c[0]&&(a.preventDefault(),b.focus()):document&&document.activeElement===b[0]&&(a.preventDefault(),c.focus()))}function k(c){var b=z("#desktop-configurator-side-sheet-content-header").clone();b.removeClass("aok-hidden");b.find(".dim-name").text(c.dimensionDisplayText+":");b.find(".dim-value").text(c.displayValueText);
var a=c.optionsText;a&&b.find(".dim-options").text(a.replace("###options",c.totalValueCount));return b}var z=c.$,t=q.sideSheetSelectors,n=q.loggingConstants;v.prototype={open:function(f){this.activeDimKey=f.dimKey;this.sideSheetData=f;var b=z("#inline-twister-row-"+f.dimKey+" #tp-inline-twister-dim-values-container"),a=b.find(".desktop-configurator-dim-row-0"),h=z("#side-sheet-loader-container").clone().removeClass("aok-hidden"),l=h.find(".loader-container"),g=h.find("#side-sheet-loader").clone().removeClass("aok-hidden"),
d;if(f.isTextSwatch)b=a.width()-q.BORDER_WIDTH,d=a.height()-q.BORDER_WIDTH;else{var r=b.find(".inline-twister-swatch").not(".aok-hidden").not(".swatch-prototype");d=a.find(".swatch-image-container");b=d.outerWidth();d=d.outerHeight();r=Math.abs((r.width()-a.find(".swatch-image-container").outerWidth())/2)-q.BORDER_WIDTH;g.css("margin-right",r+"px");g.css("margin-left",r+"px")}g.width(b);g.height(d);c.each(a,function(){l.append(g.clone().addClass("side-sheet-loader-1"))});a=l.clone();a.find(".side-sheet-loader-1").removeClass("side-sheet-loader-1").addClass("side-sheet-loader-2");
h.append(a);f=k(f);h.prepend(f);this.sideSheet.open(h[0].outerHTML)},update:function(c){this.mainViewDimContainer=z("#inline-twister-row-"+c.dimKey+" #tp-inline-twister-dim-values-container");var b=this.mainViewDimContainer.clone(),a=b.find(t.DIMENSION_VALUES_LIST);a.attr("id",c.dimKey+"dim_list");var h=k(c);b.prepend(h);a.children().slice(1).removeClass("aok-hidden");a.attr("data-a-button-group",'{"name":"sec_'+c.dimKey+'"}');this.sideSheet.updateContent(b[0].outerHTML);c=this.sideSheet.container;
this.swatchList=c.find(t.DIMENSION_VALUES_LIST).children().slice(1);p(this.swatchList,this.activeDimKey);this.dimValContainer=c.find(".desktop-configurator-side-sheet-content-header .dim-value");y.call(this,this.swatchList)},close:function(){this.sideSheet.close()},registerToggleButtonGroup:function(f,b,a){var h=t.SEC_VIEW_TOGGLE_BUTTON_PREFIX+f,l=this;this.updateSideSheetStatus[f]=a;c.on("a:button-group:"+h+":toggle",function(a){l.sideSheet.close();a.selectedButton.buttonGroupName=f;b(a.selectedButton,
f)})},updateDimVal:function(c){this.dimValContainer.length&&this.dimValContainer.text(c.subText)},refreshWidth:function(){var c=z("#twister-plus-inline-twister-container")[0].getBoundingClientRect().width+this.scrollbarWidth;this.sideSheet.updateWidth(c+q.SIDE_SHEET_PADDING)},getScrollbarWidth:function(){if(this.scrollbarWidth)return this.scrollbarWidth;var c=document.body?B.innerWidth-document.body.clientWidth:-1;0>c&&(c=q.DEFAULT_SCROLLER_WIDTH);return c}};return v});"use strict";A.when("A","a-popover",
"desktop-configurator-constants").register("desktop-configurator-popover-factory",function(c,q,u){function v(a){var d=w("\x3cdiv /\x3e"),b=w("\x3cspan /\x3e"),c=a.title,h=a.isImageSwatch,l=!a.hideSlots;d.addClass("desktop-configurator-popover-content");b.addClass("desktop-configurator-title-block a-size-base a-color-base a-text-bold");b.text(c);d.append(b);h&&(b=w("\x3cdiv /\x3e"),h=w("\x3cimg /\x3e"),h.attr("src",a.image),h.attr("data-a-image-source",a.image),h.attr("alt",c),b.append(h),d.addClass("visual-dimension"),
b.addClass("desktop-configurator-image-block"),d.prepend(b));l&&m(d,a.slotNode);return d}function m(a,d){d=d.clone();var b=w("\x3cdiv /\x3e");a.find(".desktop-configurator-slot-block").remove();b.addClass("desktop-configurator-slot-block");b.html(d);p(b);a.append(b)}function p(b){var d=b.find(".price_slot_ppu"),r=b.find("#ms3slot"),f=b.find(".twister_swatch_price"),e=b.find("#twisterAvailability"),k=b.find("#deliveryPromisePrefix"),n=b.find(".variationReviewsSection"),m=b.find(".default-slot-unavailable");
b=b.find(".loading-indicator-1");var p={variationReviews:n,price:f,ms3:r,twisterAvailability:e.parent(),deliveryPromise:k.parent(),ppu:d};b.length&&(b.addClass("loading-indicator-in-popover"),0===a.length?b.addClass("aok-hidden"):b.removeClass("aok-hidden"));c.each(h,function(d){p[d]&&(-1===a.indexOf(d)?p[d].addClass("aok-hidden"):(p[d].removeClass("aok-hidden"),d=l[d+"_styleSlot"],"function"===typeof d&&d.call(this,p)))});m.length&&m.removeClass("a-size-small").addClass("a-size-base")}function y(a,
d,b,h){b=v({slotNode:b.slotNode,title:b.title,isImageSwatch:b.isImageSwatch,image:b.image,hideSlots:h});d=q.create(d,{name:a,inlineContent:b,closeButton:!1,padding:"none",activate:"none",restoreFocusOnHide:!1});k[a]=d;z[a]||(c.on("a:popover:afterShow:"+a,function(a){c.delay(function(){w(n.DIMENSION_VALUES_LIST).removeClass("stop-scrolling")})}),z[a]=!0);return d}function A(a,d,b){if(a=k[a])d=v({slotNode:d.slotNode,title:d.title,isImageSwatch:d.isImageSwatch,image:d.image,hideSlots:b}),a.update({content:d});
return a}var w=c.$,k={},z={},t=u.POPOVER_DELAY,n=u.sideSheetSelectors,f=null,b=null,a=[],h=u.CONFIGURED_SLOTS,l={price_styleSlot:function(a){var d=a.ms3,b=a.ppu;a=a.price;a.length&&(a.find(".a-size-base").removeClass("a-size-base").addClass("a-size-large"),b.length&&b.removeClass("a-size-micro").addClass("a-size-small"),d.length&&(b=a.find(".twisterSwatchPrice"),b.length&&b.after(d),d.after("\x3cbr /\x3e")))},ms3_styleSlot:function(a){a=a.ms3;a.length&&a.find(".a-icon-mini").removeClass("a-icon-mini").addClass("a-icon-small")},
twisterAvailability_styleSlot:function(a){a=a.twisterAvailability;a.length&&a.find(".a-size-small").removeClass("a-size-small").addClass("a-size-base")}};return{show:function(a,d,h,l){f=this.exists(a)?A.call(this,a,h,l):y.call(this,a,d,h,l);clearTimeout(b);var e=this;b=c.delay(function(){w(n.DIMENSION_VALUES_LIST).addClass("stop-scrolling");f&&f.show();e.updateIfCurrentlyActive(a,h.slotNode)},t)},exists:function(a){return!!k[a]},hide:function(a){(a=k[a])&&a.hide();f=null;clearTimeout(b)},updateIfCurrentlyActive:function(a,
d){f&&f.$container&&f.attributes.name===a&&(a=f.$container.find(".desktop-configurator-popover-content"),m(a,d))},destroy:function(a){k[a]&&q.remove(a);delete k[a];clearTimeout(b)},setVisibleSlotConfig:function(b){a=b}}});"use strict";A.when("A","desktop-configurator-constants").register("desktop-configurator-widgets-factory",function(c,q){var u=c.$,v=q.widgetSelectors,m=q.classes,p=q.cssConstants,y=q.loggingConstants,F=function(){function k(){var b=u(v.IMAGE_THUMBNAIL).attr("src");return b&&b.length&&
(b=b.split("."),2<b.length)?b[b.length-2]:!1}function f(b,a,c){var l=b.find(".a-button");a&&!c?(l.addClass("text-swatch-button-with-slots"),l.removeClass("text-swatch-button"),b.find("hr").show()):(l.removeClass("text-swatch-button-with-slots"),l.addClass("text-swatch-button"),b.find("hr").hide())}return{alignTextSwatches:function(b,a,h){var l=0,g,d;c.each(b,function(b){b.domNode&&(b.isVisible||a||h)&&(g=b.domNode.attr("data-idxInToggleSwatchList"),d=h?u("#desktop-configurator-side-sheet").find("[data-idxInToggleSwatchList\x3d"+
g+"]"):b.domNode,b=d.find(".swatch-title-text-display"),b.length&&b[0].style.removeProperty("height"),b=b?b.height():0,l<b&&(l=b))});c.each(b,function(b){b.domNode&&(b.isVisible||a||h)&&(g=b.domNode.attr("data-idxInToggleSwatchList"),d=h?u("#desktop-configurator-side-sheet").find("[data-idxInToggleSwatchList\x3d"+g+"]"):b.domNode,d.find(".swatch-title-text-display").height(l))})},createSwatch:function(b,a,c,l,g){var d=!a.unavailable,k=a.isVisible,n=a.selected,e=a.showSlot,m=a.slotHtm,p="#"+c,q=u(p).closest(v.SWATCH_NODE_SELECTOR);
if(q.length)return c=q.clone(),c.removeClass("swatch-prototype"),g&&c.addClass("slots-hidden"),c.attr("data-idxInToggleSwatchList",l),c.find(p).attr("id",a.id),c.find(p+"-announce").attr("id",a.id+"-announce"),c.find("input").attr("name",a.name),c.find("input").attr("aria-labelledby",a.id+"-announce"),c.find("text"===b?".swatch-title-text-display":"square_image"===b?".swatch-title-text":".swatch-text").text(a.text),d||c.find("#"+a.id).addClass("a-button-unavailable"),n&&c.find("#"+a.id).addClass("a-button-selected"),
"text"!==b&&(l=c.find(".swatch-image"),l.addClass("inline-twister-manual-load"),l.attr("data-a-image-source",a.image||""),l.attr("id","inline-twister-image-"+a.name),l.attr("alt",a.text),a.hiResImage&&""!==a.hiResImage&&l.attr("data-a-hires",a.hiResImage||"")),l=c.find(".dimension-slot-info"),l.length&&(l.attr("id","dimension-slot-info-"+a.name),e?d?0<m.length&&l.html(m):l.html(a.defaultSlotUnavailable):c.find("text"===b?".slots-padding":".dimension-slot-info").addClass("aok-hidden"),"text"===b&&
f(c,e,g)),q.parent().append(c),k||c.addClass("aok-hidden"),c},getThumbnailImageUrlForPhysicalId:function(b){return b&&b.length&&(b=b.split("."),2<b.length)?(b.splice(-2,1,k()),b.join(".")):!1},updateSlotSectionInTextSwatch:f}}(),w=function(k){function f(b,a,c,l,g){this.id=b.id;this.unavailable=!!b.unavailable;this.selected=!!b.selected;this.showSlot=b.showSlot;this.slotHtm=b.slotHtm;this.isImageSwatch=!a;this.asin=b.asin;this.pageUrl=b.pageUrl;this.hideSlotsFromMainView=g;(this.domNode=k.createSwatch(a?
"text":b.isCirclularImageSwatch?"circular_image":"square_image",b,c,l,g))?(this.slotNode=this.domNode.find(v.SLOT_NODE_SELECTOR),this.toggleButton=this.domNode.find(v.TOGGLE_BUTTON_SELECTOR),this.topPosition=(l=this.domNode.position())?l.top:0):A.log("Prototype swatch not found. Dimension Name: "+c,y.ERROR,y.ATTRIBUTION);this.highResImageUrl=b.hiResImage;this.isVisible=b.isVisible;this.imageUrl=b.image;this.popoverImage=b.popoverImage;this.isSlotVisible=!0;this.slotNodeIdentifier=a?".slots-padding":
".dimension-slot-info";this.title=b.text;this.name=b.name;this.subscribeToHoverEvent(c)}f.prototype={setState:function(b,a,c,l){this.selected=!!b.selected;this.updateAvailablity(b);this.updateSlotNode(b,a,c);this.updateVisibility(b);this.updateSwatchIndexInDomNode(l);return this},getSlotNode:function(b){if(!b)return this.slotNode;b=this.slotNode?this.slotNode.attr("id"):"";return u("#desktop-configurator-side-sheet").find("#"+b)},updateSlotNode:function(b,a,c){this.showSlot!==b.showSlot&&((this.showSlot=
b.showSlot)?this.domNode.find(this.slotNodeIdentifier).removeClass("aok-hidden"):this.domNode.find(this.slotNodeIdentifier).addClass("aok-hidden"),this.isImageSwatch||k.updateSlotSectionInTextSwatch(this.domNode,this.showSlot,this.hideSlotsFromMainView));this.slotHtm!==b.slotHtm&&(a&&u("#tp-inline-twister-sec-view-"+c+" #"+this.slotNode.attr("id")).html(b.slotHtm),this.slotNode.html(b.slotHtm),this.slotHtm=b.slotHtm)},updateAvailablity:function(b){(this.unavailable=b.unavailable)?this.toggleButton.addClass(m.A_BUTTON_UNAVAILABLE):
this.toggleButton.removeClass(m.A_BUTTON_UNAVAILABLE)},updateSelection:function(){this.selected?(this.toggleButton.addClass(m.A_BUTTON_SELECTED),this.toggleButton.removeClass(m.A_BUTTON_UNAVAILABLE)):(this.toggleButton.removeClass(m.A_BUTTON_SELECTED),this.toggleButton.removeClass(m.A_BUTTON_FOCUS))},updateVisibility:function(b){b.isVisible?this.domNode.removeClass(m.AOK_HIDDEN):this.domNode.addClass(m.AOK_HIDDEN);this.isVisible=b.isVisible},subscribeToHoverEvent:function(b){b="desktop-configurator-swatch-hover:"+
b;try{c.declarative.remove(this.domNode,b),c.declarative.create(this.domNode,b,{})}catch(a){A.log("Hover event subscribe failed with error: "+this.name,y.ERROR,y.ATTRIBUTION)}},updateSwatchIndexInDomNode:function(b){this.domNode&&this.domNode.attr("data-idxInToggleSwatchList",b)},getTopPosition:function(){var b=this.domNode.position();return this.topPosition=b?b.top:this.topPosition||0}};return f}(F),k=function(k,f){function b(a,b,l,g){var d=this;this.isTextSwatch=a.isTextSwatch;this.name=a.name;
this.domNode=u(v.EXPANDER_CONTENT_PREFIX+a.name);this.title=g;this.selectedSwatch=null;this.swatches={};this.initialVisibleSwatchList={};this.swatchIdxOrder=[];this.isPageRefreshActive=!1;this.onChange=a.onChange;this.hoverHandler=a.onHover;this.isUserInteracting=!1;this.autoNotificationCallback=b.autoNotificationCallback;this.rowContainer=l;this.swatchListContainer=this.domNode.find(v.DIMENSION_VALUES_LIST);this.markAutoUpdated=!1;this.hideSlotsFromMainView=a.hideSlotsFromMainView;this.windowResizeCallback=
b.windowResizeCallback;this.displaySwatches=[];this.numberOfSwatchesPerRow=0;c.on("a:button-group:"+this.name+":toggle",function(a){var b=parseInt(a.selectedButton.buttonName,10),c=d.swatches[b];c?d.isPageRefreshActive?(d.isUserInteracting=!0,b=c.unavailable,c.updateSelection(),d.autoNotificationCallback&&d.autoNotificationCallback(b,!0),d.onChange&&d.onChange(d.swatches,a.selectedButton,d.markAutoUpdated),d.setAutoUpdated(!1)):c.pageUrl&&(B.location.href=c.pageUrl):(a="Selected swatch not found on toggle button click. Value clicked: "+
b+" ; Swatch length: "+Object.keys(d.swatches).length,A.log(a,y.ERROR,y.ATTRIBUTION))});this.registerHoverDeclarative("desktop-configurator-swatch-hover:"+a.name);this.registerHoverDeclarative("desktop-configurator-swatch-hover:"+a.name+"_sec",!0);if(this.isTextSwatch)c.on("resize",function(){d.repopulateDisplaySwatches();d.alignTextSwatches();"function"===typeof d.windowResizeCallback&&d.windowResizeCallback(d.name)})}b.prototype={setState:function(a,b,l,g){var d=this,k,n=[],e=[],m=[];c.objectIsEmpty(b)||
(c.each(b,function(b,c){d.swatches[c]||!a.swatches[c].isVisible&&!l||(d.swatches[c]=new f(a.swatches[c],d.isTextSwatch,d.name,c,d.hideSlotsFromMainView),!d.isTextSwatch&&d.swatches[c]&&d.swatches[c].domNode&&m.push(d.swatches[c].domNode.find(".inline-twister-manual-load")[0]));e[b]=c}),this.swatchIdxOrder=e,g||(this.resetToggleSwatchContainer(),this.displaySwatches=[]),c.each(this.swatchIdxOrder,function(a,b){if(a=d.swatches[a])a&&d.swatchListContainer.append(a.domNode),a&&a.subscribeToHoverEvent(d.name),
d.addToDisplaySwatches(a,d.displaySwatches)}),this.isTextSwatch&&this.alignTextSwatches());c.each(a.swatches,function(a,b){if(d.swatches[b])k=a.selected?d.swatches[b]:k,d.swatches[b].selected=!!a.selected,n.push({index:b,data:a});else{if(a.isVisible||l)d.swatches[b]=new f(a,d.isTextSwatch,d.name,b,d.hideSlotsFromMainView),d.addToDisplaySwatches(d.swatches[b],d.displaySwatches),!d.isTextSwatch&&d.swatches[b]&&d.swatches[b].domNode&&m.push(d.swatches[b].domNode.find(".inline-twister-manual-load")[0]);
a.selected&&(k=d.swatches[b])}});this.selectedSwatch&&this.selectedSwatch.updateSelection();k&&k.updateSelection();c.each(n,function(a,b){d.swatches[a.index].setState(a.data,l,d.name,a.index)});d.selectedSwatch&&k&&d.selectedSwatch!==k&&!d.isUserInteracting&&d.autoNotificationCallback(!0);d.selectedSwatch=k;d.isUserInteracting=!1;m.length&&c.loadImageManually(m);return this},getSlotNodes:function(a){return c.map(this.displaySwatches,function(b){return c.map(b,function(b){return b.getSlotNode(a)})})},
setUserInteracting:function(a){this.isUserInteracting=a},alignTextSwatches:function(a,b){c.each(this.displaySwatches,function(c){k.alignTextSwatches(c,a,b)})},resetToggleSwatchContainer:function(){var a=u(this.domNode.find(".a-button-list").children()[0]);this.swatchListContainer.html("");this.swatchListContainer.append(a)},getVisibleSwatchesSize:function(){var a=0;c.each(this.swatches,function(b,c){b.isVisible&&(a+=1)});return a},setAutoUpdated:function(a){this.markAutoUpdated=a},getInitialVisibleSwatchList:function(){return this.initialVisibleSwatchList},
getNumberOfSwatchesPerRow:function(){return this.numberOfSwatchesPerRow},setNumberOfSwatchesPerRow:function(a){a&&(this.numberOfSwatchesPerRow=a)},createSwatch:function(a,b){var c,g,d=m.ROW_IDENTIFIER_PREFIX,k=0===this.displaySwatches.length;c=new f(a,this.isTextSwatch,this.name,a.name,this.hideSlotsFromMainView);this.swatches[a.name]=c;this.initialVisibleSwatchList[a.name]=c;this.selectedSwatch=a.selected?c:this.selectedSwatch;a=k?[]:this.displaySwatches[this.displaySwatches.length-1];g=k?{}:a[a.length-
1]?a[a.length-1]:{};if(k||0<this.numberOfSwatchesPerRow)this.addToDisplaySwatches(c,this.displaySwatches);else if(c.topPosition!==g.topPosition){this.numberOfSwatchesPerRow=this.displaySwatches[0].length;this.addToDisplaySwatches(c,this.displaySwatches);1===b&&c.updateVisibility({isVisible:!1});try{this.adjustSwatchWidthAndSpacing("."+d+0,this.displaySwatches[0][0].domNode,this.displaySwatches[1][0].domNode)}catch(n){A.log("Swatch width adjustment failed for dimension: "+this.name,y.ERROR,y.ATTRIBUTION)}}else c.domNode&&
c.domNode.addClass(d+(this.displaySwatches.length-1).toString()),a.push(c);return c},activatePageRefresh:function(){this.isPageRefreshActive=!0},getSwatch:function(a){return this.swatches[a]?this.swatches[a]:{}},registerHoverDeclarative:function(a,b){var f=this;c.declarative(a,"mouseenter mouseleave",function(a){var d=a.$currentTarget[0].getAttribute("data-idxInToggleSwatchList"),d=f.getSwatch(d);a.data={slotNode:a.$currentTarget.find(d.slotNodeIdentifier),isImageSwatch:d.isImageSwatch,unavailable:d.unavailable,
showSlot:d.showSlot,selected:d.selected,title:d.title,name:d.name,id:b?d.id+"_sec":d.id,image:d.popoverImage};f.hoverHandler(f.name,a)})},addToDisplaySwatches:function(a,b){var c=m.ROW_IDENTIFIER_PREFIX;if(0===b.length)b.push([a]);else{var g=b[b.length-1];g&&g.length===this.numberOfSwatchesPerRow?b.push([a]):g.push(a)}this.removeSwatchRowIdentifier(a);a.domNode&&a.domNode.addClass(c+(b.length-1).toString())},adjustSwatchWidthAndSpacing:function(a,b,c){a=this.domNode.find(a);var g=this.domNode.find(".swatch-prototype"),
d=this.domNode[0].getBoundingClientRect().width-1;b=b.width();var f=this.getNumberOfSwatchesPerRow(),d=d-(b*f+(this.isTextSwatch?q.TEXT_SWATCH_MARGIN_RIGHT:0)*f);0<d&&(d=parseFloat(d/f),b+=d,a.find(".a-button").width(b),c.find(".a-button").width(b),g.find(".a-button").width(b))},repopulateDisplaySwatches:function(){var a=[],b=0,f,g=this;c.each(this.displaySwatches,function(d,k){c.each(d,function(d,c){0===a.length?a.push([d]):0===b?(f=a[0][a[0].length-1],d.getTopPosition()!==f.getTopPosition()?(b=
a[0].length,g.numberOfSwatchesPerRow=b,g.addToDisplaySwatches(d,a)):(a[0].push(d),g.removeSwatchRowIdentifier(d),d.domNode&&d.domNode.addClass(m.ROW_IDENTIFIER_PREFIX+(0).toString()))):g.addToDisplaySwatches(d,a)})});0===b&&(this.numberOfSwatchesPerRow=b=a[0].length);this.displaySwatches=a},removeSwatchRowIdentifier:function(a){a.domNode&&a.domNode.removeClass(function(a,b){return(b.match(/(^|\s)desktop-configurator-dim-row-\S+/g)||[]).join(" ")})}};return b}(F,w),z=function(k){function f(b){this.mainText=
b.mainText;this.subText=b.subText;this.dimKey=b.dimKey;this.titleSelectorPrefix=b.titleSelectorPrefix;this.titleValueSelector=b.titleValueSelector;this.domNode=u("#"+this.titleSelectorPrefix+this.dimKey)}f.prototype={refresh:function(){this.domNode.find("."+this.titleValueSelector).text(this.subText);this.domNode.removeClass("twister-plus-inline-twister-dim-required twister-plus-inline-twister-dim-required-delay")},setState:function(b){return c.equals(b,u.extend({},this))?this:(u.extend(this,b),this.refresh())},
getData:function(){return{mainText:this.mainText,subText:this.subText}}};return f}(F),t=function(k,f,b){function a(a,b,g,d,k){function n(){q.css(p.BG_COLOR,p.GREEN_BG_COLOR);c.delay(function(){c.animate(q,{"background-color":p.WHITE_BG_COLOR},200)},1E3)}var e=this;this.inlineTwisterData=g.inlineTwisterData;this.title=b?new f(b):null;this.dimKey=g.dimKey;this.domNode=u("#"+a+this.dimKey);this.showSlot=g.showSlot;this.isExpanded=!1;this.logger=k;this.isInlineExpanded=this.markAutoUpdated=!1;this.expanderContent=
e.domNode.find(v.EXPANDER_CONTENT_PREFIX+this.dimKey);this.expanderHeader=e.domNode.find(v.EXPANDER_HEADER_PREFIX+this.dimKey);this.icon=e.domNode.find(v.DIMENSION_EXPANDER_ICON_PREFIX+this.dimKey);this.expandedText=e.domNode.find(v.EXPANDED_DIMENSION_TEXT_PREFIX+this.dimKey);this.collapsedText=e.domNode.find(v.COLLAPSED_DIMENSION_TEXT_PREFIX+this.dimKey);this.rowCallbacks=d;this.autoNotificationExpanded=e.domNode.find(v.AUTO_NOTIFICATION_EXPANDED);this.autoNotificationExpandedText=e.autoNotificationExpanded.text();
this.imageThumbnail=e.domNode.find(v.IMAGE_THUMBNAIL);this.expanderContent&&this.expanderContent.css("visibility","hidden");this.secViewIngressIcon=e.domNode.find(".inline-twister-secondary-view-see-all-link");this.titleNode=this.domNode.find(".inline-twister-dim-title-value-truncate-expanded")[0];this.sideSheetLink=this.domNode.find(".tp-side-sheet-link-container");this.inlineExpansionLink=this.domNode.find(".tp-inline-expansion-link");var q=this.domNode.find(".dimension-heading");this.autoNotificationCallback=
function(a,b){var d=e.autoNotificationExpandedText;a?e.isExpanded&&b?(e.autoNotificationExpanded.find("."+m.A_COLOR_ATTAINABLE).html(d),e.autoNotificationExpanded.removeClass(m.AOK_HIDDEN)):(n(),e.setAutoUpdated(!0)):e.hideAutoNotification()};this.inlineTwisterData&&!this.inlineTwisterData.disableCollapseFunctionality&&c.declarative("toggle-dimension-expander-"+this.dimKey,"click",function(a){e.isExpanded?e.collapse():e.expand();e.hideAutoNotification()})}a.prototype={setState:function(a,b,c,d,f,
k){this.toggleSwatch&&c!==this.dimKey&&this.autoNotificationExpanded.addClass(m.AOK_HIDDEN);a&&this.toggleSwatch&&this.toggleSwatch.setState(a,b,f,k);f||d&&this.title&&this.title.setState(d)},expand:function(){this.expanderContent&&this.expanderContent.css("visibility","");this.expanderContent&&this.expanderContent.addClass(m.DIMENSION_EXPANDER_CONTENT_EXPAND);this.icon&&this.icon.addClass(m.ROTATE);this.expandedText&&this.expandedText.removeClass(m.AOK_HIDDEN);this.collapsedText&&this.collapsedText.addClass(m.AOK_HIDDEN);
this.imageThumbnail.addClass(m.AOK_HIDDEN);this.isExpanded=!0;var a={dimKey:this.dimKey};"function"===typeof this.rowCallbacks.handleDimensionExpansion&&this.rowCallbacks.handleDimensionExpansion(a,this.showSlot,!0);if(this.expanderHeader){var a=this.inlineTwisterData.stringTranslationMap?this.inlineTwisterData.stringTranslationMap.expanderHeaderAriaLabel:"",b=this.title.getData(),a=a.replace("###dimension",b.mainText).replace("###value",b.subText),a=a+" "+(this.inlineTwisterData.stringTranslationMap?
this.inlineTwisterData.stringTranslationMap.tapToCollapse:"");this.expanderHeader.attr("aria-label",a)}this.markAutoUpdated&&(this.logger.logDimExpansionAfterAutoUpdate(),this.markAutoUpdated=!1)},collapse:function(){this.expanderContent&&this.expanderContent.removeClass(m.DIMENSION_EXPANDER_CONTENT_EXPAND);this.expanderContent&&this.expanderContent.css("visibility","hidden");this.icon&&this.icon.removeClass(m.ROTATE);this.expandedText&&this.expandedText.addClass(m.AOK_HIDDEN);this.collapsedText&&
this.collapsedText.removeClass(m.AOK_HIDDEN);this.imageThumbnail.removeClass(m.AOK_HIDDEN);this.isExpanded=!1;var a={dimKey:this.dimKey};"function"===typeof this.rowCallbacks.handleDimensionExpansion&&this.rowCallbacks.handleDimensionExpansion(a,this.showSlot,!1);this.autoNotificationExpanded.addClass(m.AOK_HIDDEN);if(this.expanderHeader){var a=this.inlineTwisterData.stringTranslationMap?this.inlineTwisterData.stringTranslationMap.expanderHeaderAriaLabel:"",b=this.title.getData(),a=a.replace("###dimension",
b.mainText).replace("###value",b.subText),a=a+" "+(this.inlineTwisterData.stringTranslationMap?this.inlineTwisterData.stringTranslationMap.tapToExpand:"");this.expanderHeader.attr("aria-label",a)}},setUserInteracting:function(a){this.toggleSwatch&&this.toggleSwatch.setUserInteracting(a)},setExpanderHeaderAriaLabel:function(a,b){a=this.expanderHeader.attr("aria-label").replace(a.subText,b.subText);this.expanderHeader.attr("aria-label",a)},setThumbnailImage:function(a){(a=k.getThumbnailImageUrlForPhysicalId(a))&&
this.imageThumbnail.attr("src",a)},setAutoUpdated:function(a){this.markAutoUpdated=a;this.toggleSwatch&&this.toggleSwatch.setAutoUpdated(a)},getInitialVisibleSwatchList:function(){return this.toggleSwatch?this.toggleSwatch.getInitialVisibleSwatchList():{}},getSwatch:function(a){return this.toggleSwatch?this.toggleSwatch.getSwatch(a):{}},activatePageRefresh:function(){this.toggleSwatch&&this.toggleSwatch.activatePageRefresh()},showInlineExpansionLink:function(){this.inlineExpansionLink.removeClass("aok-hidden")},
hideInlineExpansionLink:function(){this.inlineExpansionLink.addClass("aok-hidden")},showSideSheetLink:function(){this.sideSheetLink.removeClass("aok-hidden")},setMaxHeight:function(a){this.expanderContent.css("max-height",a)},triggerExpandOrCollapseAnimation:function(a,b,c){var d=this;this.expanderContent.animate({"max-height":a+"px"},b,function(){d.setMaxHeight("");c&&c()})},getDisplaySwatches:function(){return this.toggleSwatch?this.toggleSwatch.displaySwatches:[]},hideAutoNotification:function(){this.autoNotificationExpanded.addClass(m.AOK_HIDDEN)},
initializeComponents:function(a,f,g){if(!this.toggleSwatch&&a){var d=this.title.getData();this.toggleSwatch=new b(a,{windowResizeCallback:g.handleWindowResize,autoNotificationCallback:this.autoNotificationCallback},this.domNode,d.mainText)}this.isTextSwatch=a?a.isTextSwatch:!0;this.rowCallbacks=c.extend(this.rowCallbacks,g);this.showSlot=f;var k=this;c.declarative("open-desktop-configurator-side-sheet:"+this.dimKey,"click",function(){"function"===typeof k.rowCallbacks.showSideSheet&&(k.rowCallbacks.showSideSheet(k.dimKey,
k.showSlot,k.title.getData()),k.hideAutoNotification())});c.on("a:expander:desktop-configurator-inline-expansion:"+this.dimKey+":toggle:expand",function(){"function"===typeof k.rowCallbacks.toggleInlineExpansion&&(k.rowCallbacks.toggleInlineExpansion(k.dimKey,k.showSlot,!0),k.hideAutoNotification(),k.isInlineExpanded=!0)});c.on("a:expander:desktop-configurator-inline-expansion:"+this.dimKey+":toggle:collapse",function(){"function"===typeof k.rowCallbacks.toggleInlineExpansion&&(k.rowCallbacks.toggleInlineExpansion(k.dimKey,
k.showSlot,!1),k.hideAutoNotification(),k.isInlineExpanded=!1)})}};return a}(F,z,k);return{Swatch:w,ToggleSwatch:k,Title:z,Row:t,utils:F}});"use strict";A.when("A","detail-page-side-sheet-handlers").register("detail-page-side-sheet",function(c,q){function u(c){var p=c.id&&"string"===typeof c.id,t=1===B("#"+c.id).length;if(p&&t)this.id=c.id,this.shouldRenderHTMLString=!!c.shouldRenderHTMLString,this.animationDuration=c.animationDuration||300,this.container=q.getContainer(c.id),this.onBeforeShow=c.onBeforeShow,
this.onAfterHide=c.onAfterHide,p=c.width||580,(t=this.container)&&t.width(p),y(c.id,p),m.call(this);else throw c="Side sheet initialisation failed: "+(p?"Side sheet not present in DOM, or multiple instances of side sheet ID "+c.id+" exist":"Invalid Side sheet ID"),A.log(c,"ERROR","DetailPageSideSheet"),c;}function v(c){var m=this.container;c=this.shouldRenderHTMLString?B(c):B(c).clone();m.html(c);c.css("display","block");m.removeClass("aok-hidden")}function m(){var k=this;c.declarative("close-detail-page-side-sheet:"+
this.id,"click",function(){k.close()});c.declarative("open-detail-page-side-sheet:"+this.id,"click",function(c){k.open(c&&c.data?c.data.content:null)})}function p(c){c.code&&"escape"===c.code.toLowerCase()&&(this.close(),document&&document.removeEventListener("keydown",w))}function y(c,m){c=B("#"+c+"-background .close-button");c.length&&(c[0].style.marginRight=m+10+"px")}var B=c.$,w=null;u.prototype={open:function(c){if(c&&"string"===typeof c){v.call(this,c);if(this.onBeforeShow)this.onBeforeShow();
q.showSideSheet(this.id,this.animationDuration);w=p.bind(this);document&&document.addEventListener("keydown",w)}else A.log("Invalid side sheet content. Side sheet ID: "+this.id,"ERROR","DetailPageSideSheet")},close:function(){q.closeSideSheet(this.id,this.animationDuration);q.resetSideSheetContainer(this.container);if(this.onAfterHide)this.onAfterHide()},updateWidth:function(c){var m=this.container;m&&m.width(c);y(this.id,c)},updateContent:function(c){c&&"string"===typeof c?v.call(this,c):A.log("Invalid side sheet content. Side sheet ID: "+
this.id,"ERROR","DetailPageSideSheet")}};return u});"use strict";A.when("A").register("detail-page-side-sheet-handlers",function(c){function q(c,q){m("#"+c+" .detail-page-side-sheet-content").show(function(){v({right:"0px"},c,q)})}function u(c,q){m("#"+c+" .detail-page-side-sheet-content").show(function(){v({right:"-600px"},c,q)})}function v(p,q,u){c.animate(m("#"+q+" .detail-page-side-sheet-content"),p,u)}var m=c.$;return{showSideSheet:function(c,u){m("body").css("overflow","hidden");m(".detail-page-side-sheet-darken-bg").removeClass("aok-hidden");
m("#"+c).removeClass("aok-hidden");q(c,u)},closeSideSheet:function(c,q){u(c,q);m(".detail-page-side-sheet-darken-bg").addClass("aok-hidden");m("#"+c).addClass("aok-hidden");m("body").css("overflow","scroll")},getContainer:function(c){return m("#"+c).find(".detail-page-side-sheet-content")},resetSideSheetContainer:function(c){c.html("")}}})});