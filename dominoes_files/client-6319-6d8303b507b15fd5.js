"use strict";(self.webpackChunkFusion=self.webpackChunkFusion||[]).push([[6319],{60802:(e,i,t)=>{t.d(i,{Z:()=>o});var n=t(43193),r=t(91931),a=t(33171),l=t(38784),s=t(33990);const d=(0,r.zo)("div",(e=>{let{$shouldStartAlign:i,$shouldVerticalCenterAlign:t,$margin:n}=e;return{width:"100%",display:"flex",position:"relative",...n?{margin:`0 -${n/2}px`}:{},...i?null:{justifyContent:"center"},...t?{alignItems:"center"}:{}}}));function o(e){const{displayIndex:i,displaySlides:t,changeDisplaySlide:r,onTransitionEnd:o,useTransition:c,stopAutoScroll:u}=(0,l.Z)({slides:e.slides,pageSize:e.pageSize,autoScrollInterval:e.autoScrollInterval,onSlidesDisplayed:e.onSlidesDisplayed,initialIndex:e.initialIndex,isInfinite:e.isInfinite});if(n.useEffect((()=>{e.shouldUpdateOnIndexChange&&r({index:e.initialIndex??0,useTransition:!0})}),[e.shouldUpdateOnIndexChange,e.initialIndex,r]),0===e.slides.length)return null;if(e.slides.length<=e.pageSize)return(0,s.tZ)(d,{$shouldStartAlign:e.shouldStartAlign,$margin:e.margin,children:e.slides.map(((i,t)=>(0,s.tZ)(a.Mi,{$as:"div",$margin:e.margin,$pageSize:e.pageSize,children:e.renderSlide({slide:i,carouselSlideProps:{isDummy:!1,isVisible:!0,index:t}})},t)))});{const n=e.renderPagination,l=e.slides.length>e.pageSize;return(0,s.BX)(d,{$shouldVerticalCenterAlign:!0,children:[l&&e.renderPrevButton?e.renderPrevButton(e.isInfinite||0!==i?()=>r({index:"back"}):null):null,(0,s.tZ)(a.ZP,{displayIndex:i,displaySlides:t,renderSlide:e.renderSlide,pageSize:e.pageSize,margin:e.margin,useTransition:c,onTransitionEnd:o,overflowVisible:e.overflowVisible,onHoverStart:u}),l&&e.renderNextButton?e.renderNextButton(!e.isInfinite&&i+e.pageSize>=e.slides.length?null:()=>r({index:"forward"})):null,n&&e.slides.length>e.pageSize&&e.slides.length%e.pageSize==0?n({currentPage:Math.floor(i/e.pageSize),numPages:e.slides.length/e.pageSize,onChangePage:i=>r({index:i*e.pageSize})}):null]})}}},33171:(e,i,t)=>{t.d(i,{Mi:()=>c,ZP:()=>p,jL:()=>u});var n=t(36151),r=t(91931),a=t(29194),l=t(32562),s=t(33990);const d=(0,r.zo)("div",(e=>{let{$overflowVisible:i}=e;return{overflow:i?"visible":"hidden",width:"100%"}})),o=(0,r.zo)("ol",(e=>{let{$useTransition:i}=e;return{position:"relative",display:"flex",width:"100%",padding:0,margin:0,...i?{transition:"transform 500ms ease-in-out"}:{}}})),c=(0,r.zo)("li",(e=>{let{$margin:i,$pageSize:t}=e;const{percentage:n,pxAdjustment:r}=u(t,i);return{display:"flex",flex:"none",margin:`0 ${i/2}px`,width:`calc(${n}% + ${r}px)`}})),u=(e,i)=>({percentage:100/e,pxAdjustment:-i*(e-1)/e});function p(e){let{displayIndex:i,displaySlides:t,renderSlide:r,margin:p,pageSize:g,useTransition:h,onTransitionEnd:Z,overflowVisible:m,onHoverStart:x,onHoverEnd:S}=e;const f=(0,a.gm)(),v=(0,n.useRef)(null);(0,l.Z)(v,x,S);const y=t.findIndex((e=>{let{displayIndex:t}=e;return t===i})),I=function(e,i,t){const n=u(e,i);return{percentage:n.percentage*t,pxAdjustment:(n.pxAdjustment+i)*t}}(g,p,t.some((e=>e.isDummy))?y:Math.min(y,t.length-g)),$="ltr"===f?-1:1;return(0,s.tZ)(d,{$overflowVisible:m,children:(0,s.tZ)(o,{$useTransition:h,style:{transform:`translateX(${$*I.percentage}%) translateX(${$*I.pxAdjustment+$*p/2}px)`},ref:v,onTransitionEnd:Z,children:t.map((e=>{let{slide:t,displayIndex:n,isDummy:a}=e;const l=n>=i&&n<i+g;return(0,s.tZ)(c,{"aria-hidden":!!a||void 0,$pageSize:g,$margin:p,children:r({slide:t,carouselSlideProps:{isDummy:a,isVisible:l,index:n}})},n)}))})})}},40012:(e,i,t)=>{t.d(i,{Z:()=>p});var n=t(88885),r=t(91931),a=t(67780),l=t(55811),s=t(11652),d=t(62146),o=t(29194),c=t(33990);const u=(0,r.w1)(a.c,(e=>{let{$theme:i,$size:t=40,$type:n="floating"}=e;return{width:`${t}px`,height:`${t}px`,..."floating"===n?{boxShadow:i.shadows.floatingButton}:{}}})),p=(0,r.Le)(u,(e=>function(i){let{onClick:t,direction:r,size:a,disabled:u,type:p}=i;const g=(0,o.gm)(),h=(0,n.T)(),Z="postmates"===(0,l.Z)()?d.Z:s.Z;let m="backward"===r;return"rtl"===g&&(m=!m),(0,c.tZ)(e,{"aria-label":h("forward"===r?"shared.previous":"shared.next"),onClick:t?()=>t():void 0,disabled:u,$size:a,$type:p,children:(0,c.tZ)(Z,{size:16,rotate:m?0:180})})}))},6319:(e,i,t)=>{t.d(i,{Z:()=>ie});var n=t(36151),r=t(91931),a=t(40836),l=t(94131),s=t(55546),d=t(49235),o=t(60802),c=t(40012),u=t(73489),p=t(98569),g=t(50291),h=t(29194),Z=t(94579),m=t(45257),x=t(36278),S=t(15208),f=t(30768),v=t(79313),y=t(55811),I=t(30761),$=t(75514),b=t(28109),B=t(87173),z=t(32762);const E=e=>{let{surface:i,initialLimit:t=d.SB}=e;const{cardLimit:n,setCardLimit:r}=(0,B.N8)(),a=(0,b.Z)(),{desktopFeatures:s}=(0,z.Z)(),o=i===l.cx.STOREFRONT_CATALOG_ITEM&&!s?.hasNewPageWrapper;return a((()=>{if(i!==l.cx.STOREFRONT_CATALOG_ITEM&&i!==l.cx.AISLE_FEED_BILLBOARD||!o)return;const e=()=>{$.Z&&$.Z.innerWidth>=d.aj?r(t+1):r(t)};return e(),$.Z&&$.Z.addEventListener("resize",e),()=>{$.Z&&$.Z.removeEventListener("resize",e)}}),[i,r,t]),n};var P=t(7695),_=t(85218),A=t(29396),T=t(87294),C=t(33990);const D=(0,r.zo)("div",(e=>{let{$placeLeft:i,$isHovering:t,$buttonPosition:n=`-${d.L/2}px`}=e;return{zIndex:Z.I_.surface,position:"absolute",top:"50%",transform:"translate(0, -50%)",opacity:t?1:0,transition:"opacity 300ms ease-in-out",...i?{left:n}:{right:n}}})),L=(0,r.zo)("div",(e=>{let{$size:i,$direction:t}=e;return{zIndex:Z.I_.surface,position:"absolute",top:-i-d.lS+"px",..."ltr"===t?{right:`${i+4}px`}:{left:`${i+4}px`}}})),w=(0,r.zo)("div",(e=>{let{$size:i,$direction:t}=e;return{zIndex:Z.I_.surface,position:"absolute",top:-i-d.lS+"px",..."ltr"===t?{right:0}:{left:0}}})),k=(0,r.w1)(S.b,(e=>{let{$hasButton:i}=e;return{padding:i?"24px 24px 4px 24px":"24px 40px"}})),O=(0,r.zo)("div",(e=>{let{$theme:i}=e;return{paddingTop:i.sizing.scale800}})),R=(0,r.w1)(m.rj,{display:"flex",alignItems:"center"}),M=(0,r.zo)("div",{position:"relative"}),N=(0,r.zo)("div",(e=>{let{$theme:i}=e;return{...i.typography.DisplayBoldSmall,"@media screen and (max-width: 1366px)":{...i.typography.DisplayBoldXSmall},marginBottom:"8px"}})),V=(0,r.zo)("div",(e=>{let{$theme:i}=e;return{...i.typography.ParagraphMedium}})),U=e=>{let{cardCarousel:i,surface:t,isHovering:n,verticalPosition:r}=e;const S=(0,y.Z)()===I.s.postmates,$=(0,f.Z)(),b=(0,h.gm)(),B=i.template||"",{filteredItems:z,initialIndex:U,onSlidesDisplayed:F}=(0,p.Z)(i.carouselItems||[],t,B,r),H=E({surface:t}),J=(0,_.Z)(),X=(0,T._)({...A.J.feed_desktop_billboard_floaty_arrows_flag,defaultValue:!1}),j=J?Z.g6:Z.zV;if(!z.length)return null;const G=(0,v.N)(i),K=(0,v.f)(G),Y=e=>{let{slide:i,carouselSlideProps:n}=e;return(0,C.tZ)(u.Z,{slide:i,slides:z,surface:t,template:B,verticalPosition:r,carouselSlideProps:n,eaterMessageStyles:(0,P.X4)(t,B,j)})},q=(e,i,t)=>function(n){return n?(0,C.tZ)(D,{$isHovering:e,$placeLeft:"rtl"!==b,$buttonPosition:t?`-${(d.L+4)/2}px`:void 0,children:(0,C.tZ)(c.Z,{direction:"backward",onClick:n,size:i})}):null},W=(e,i,t)=>function(n){return n?(0,C.tZ)(D,{$isHovering:e,$placeLeft:"rtl"===b,$buttonPosition:t?`-${(d.L+4)/2}px`:void 0,children:(0,C.tZ)(c.Z,{direction:"forward",onClick:n,size:i})}):null},Q=e=>function(i){return(0,C.BX)(C.HY,{children:[(0,C.tZ)(c.Z,{direction:"backward",onClick:i,size:e,type:"regular"}),(0,C.tZ)(x.ZP,{$width:"4px"})]})},ee=e=>function(i){return(0,C.BX)(C.HY,{children:[(0,C.tZ)(x.ZP,{$width:"4px"}),(0,C.tZ)(c.Z,{direction:"forward",onClick:i,size:e,type:"regular"})]})};switch(t){case"promo_manager":case l.cx.PROMO_MANAGER_BOTTOM_CAROUSEL:case l.cx.CHECKOUT_PROMO_MANAGER_BOTTOM_CAROUSEL:case l.cx.PICKUP_FEED_ITEM:case l.cx.ORDER_TRACKING_FEED_ITEM:return(0,C.tZ)(g.K2,{children:(0,C.tZ)(g.qY,{$centerPadding:d.R4,children:(0,C.tZ)(o.Z,{autoScrollInterval:1===z.length?0:K,initialIndex:U,slides:z,renderSlide:Y,renderPrevButton:q(n,d.L),renderNextButton:W(n,d.L),pageSize:1,margin:d.uJ,onSlidesDisplayed:F,overflowVisible:!0})})});case l.cx.HOME_FEED_ITEM:{const e=z.length<3,t=z.length<=3?0:i.shouldAutoScroll?K||4e3:0,n=()=>{let e=(0,C.tZ)(a.v,{id:"billboard.heading"}),i=(0,C.tZ)(a.v,{id:"billboard.subheading"});return S&&(e=(0,C.tZ)(a.v,{id:"postmates.components.heading"}),i=(0,C.tZ)(a.v,{id:"postmates.components.subhead"})),(0,C.BX)(m.bL,{span:4,children:[(0,C.tZ)(N,{children:e}),(0,C.tZ)(V,{children:i})]})};return X?(0,C.tZ)(O,{children:(0,C.BX)(R,{"data-testid":"billboard-grid",children:[e?n():null,(0,C.tZ)(m.bL,{span:e?8:12,children:(0,C.tZ)(g.rB,{children:(0,C.tZ)(o.Z,{autoScrollInterval:t,initialIndex:U,slides:z,renderSlide:Y,renderPrevButton:q(!0,d.VJ,X),renderNextButton:W(!0,d.VJ,X),pageSize:e?2:3,margin:d.Cv,onSlidesDisplayed:F,isInfinite:!0})})})]})}):(0,C.tZ)(k,{$ignorePadding:!0,$hasButton:z.length>3,children:(0,C.BX)(R,{"data-testid":"billboard-grid",children:[e?n():null,(0,C.tZ)(m.bL,{span:e?8:12,children:(0,C.tZ)(g.rB,{children:(0,C.tZ)(o.Z,{autoScrollInterval:t,initialIndex:U,slides:z,renderSlide:Y,renderPrevButton:Q(d.VJ),renderNextButton:ee(d.VJ),pageSize:e?2:3,margin:d.pU,onSlidesDisplayed:F,isInfinite:!0})})})]})})}case l.cx.VERTICAL_FEED_BILLBOARD:{const e=z.length<3,i=i=>{if(!e||!i)return null;let t=(0,C.tZ)(a.v,{id:"billboard.verticalFeeds.header"}),n=(0,C.tZ)(a.v,{id:"billboard.verticalFeeds.subHeader"});return i===s.Cf.GROCERY&&(t=(0,C.tZ)(a.v,{id:"billboard.verticalFeeds.grocery.header"}),n=(0,C.tZ)(a.v,{id:"billboard.verticalFeeds.grocery.subHeader"})),(0,C.BX)(m.bL,{span:4,children:[(0,C.tZ)(N,{children:t}),(0,C.tZ)(V,{children:n})]})};return(0,C.tZ)(k,{$ignorePadding:!0,$hasButton:z.length>3,children:(0,C.BX)(R,{children:[i($),(0,C.tZ)(m.bL,{span:e?8:12,children:(0,C.tZ)(g.rB,{children:(0,C.tZ)(o.Z,{initialIndex:U,slides:z,renderSlide:Y,renderPrevButton:Q(d.VJ),renderNextButton:ee(d.VJ),pageSize:e?2:3,margin:d.pU,onSlidesDisplayed:F,isInfinite:!0})})})]})})}case l.cx.STOREFRONT_CATALOG_ITEM:{const e=e=>(0,C.tZ)(L,{$size:d.VJ,$direction:b,children:(0,C.tZ)(c.Z,{direction:"backward",onClick:e,type:"regular",size:d.VJ,disabled:!e})}),i=e=>(0,C.tZ)(w,{$size:d.VJ,$direction:b,children:(0,C.tZ)(c.Z,{direction:"forward",onClick:e,type:"regular",size:d.VJ,disabled:!e})});return(0,C.tZ)(M,{children:(0,C.tZ)(o.Z,{initialIndex:U,slides:z,renderSlide:Y,renderPrevButton:e,renderNextButton:i,pageSize:H,margin:d.pU,onSlidesDisplayed:F,shouldStartAlign:!0})})}case l.cx.HOME_FEED_COLLECTION_CARD:return(0,C.tZ)(M,{children:(0,C.tZ)(o.Z,{initialIndex:U,slides:z,renderSlide:Y,pageSize:1,margin:d.pU,onSlidesDisplayed:F})});case l.cx.HOME_FEED_GR_PROMO:return(0,C.tZ)(M,{children:(0,C.tZ)(o.Z,{shouldStartAlign:!0,initialIndex:U,slides:z,renderSlide:Y,renderPrevButton:q(n,d.L),renderNextButton:W(n,d.L),pageSize:3,margin:d.pU,onSlidesDisplayed:F,overflowVisible:!0})});case l.cx.AISLE_FEED_MANUAL_CAROUSEL:case l.cx.AISLE_FEED_BILLBOARD:return(0,C.tZ)(M,{children:(0,C.tZ)(o.Z,{initialIndex:U,slides:z,renderSlide:Y,renderPrevButton:Q(d.VJ),renderNextButton:ee(d.VJ),pageSize:H,margin:d.pU,onSlidesDisplayed:F,shouldStartAlign:!0})})}return(0,C.tZ)(g.K2,{children:(0,C.tZ)(g.qY,{$centerPadding:d.R4,children:(0,C.tZ)(o.Z,{initialIndex:U,slides:z,renderSlide:Y,renderPrevButton:q(n,d.L),renderNextButton:W(n,d.L),pageSize:3,margin:d.pU,onSlidesDisplayed:F,overflowVisible:!0})})})};var F=t(33535),H=t(88448),J=t(97666),X=t(62149),j=t(31913),G=t(83118),K=t(45165);const Y=(0,r.zo)("div",(e=>{let{$color:i}=e;return{height:"58px",display:"flex",justifyContent:"center",alignItems:"center",...i?{backgroundColor:i}:{}}})),q=e=>{let{campaignBanner:i}=e;const{pathname:t}=(0,X.TH)(),n=(0,K.Z)();if("/feed"!==t)return null;const{animatedBackground:r,carouselItems:a}=i,{animationUrl:l,fallbackImageUrl:s,loopAnimation:d,backgroundColor:o}=r||{animationUrl:""};return(0,C.BX)(Y,{$color:n({color:o}),children:[l?(0,C.BX)(C.HY,{children:[(0,C.tZ)(G.Z,{animationUrl:l,placeholderImageUrl:s||"",loop:d||!1}),(0,C.tZ)(x.sA,{})]}):null,a?.length?(0,C.tZ)(j.ZP,{text:a[0]?.text}):null]})};var W=t(70327);const Q=e=>{let{cardItem:i,surface:t,verticalPosition:r}=e;const[a,l]=(0,n.useState)(!1),s=(0,F.ZP)(),d=i.cardItem,o=i.uuid||"",c=i.metadata?.trackingID||"",u="cardItemPayload";(0,n.useEffect)((()=>{s("eats:eater_message_view",{eaterMessage:{uuid:o,verticalPosition:r,surface:t,itemType:u,trackingID:c}})}),[s,o,c,t,r]);const p=e=>{e.stopPropagation(),e.preventDefault(),l(!0),s("eats:eater_message_dismiss",{eaterMessage:{uuid:o,itemType:u,verticalPosition:r,surface:t,trackingID:c}})};switch(d?.type){case"systemBanner":{if(a)return null;const{systemBanner:e}=d,i=()=>(0,C.tZ)(J.Z,{dismissAction:p,systemBanner:e,systemBannerStyles:(0,P.a4)().SYSTEM_BANNER});return(0,C.tZ)(W.Z,{messageKey:"system-banner",children:e.cta?.action?(0,C.tZ)(H.ZP,{linkStyleType:H.co.BANNER,action:e.cta.action,actionTrackingID:e.cta.trackingID||"",surface:t,analytics:{uuid:o,template:"",verticalPosition:r,itemType:u,trackingID:c},children:i()}):i()})}case"campaignBanner":{const{campaignBanner:e}=d,i=()=>(0,C.tZ)(q,{campaignBanner:e});return(0,C.tZ)(W.Z,{messageKey:"campaign-banner",children:e.primaryCta?.action?(0,C.tZ)(H.ZP,{linkStyleType:H.co.BANNER,action:e.primaryCta.action,actionTrackingID:e.primaryCta.trackingID||"",surface:t,analytics:{uuid:o,verticalPosition:r,itemType:u,trackingID:c},children:i()}):i()})}}return null};var ee=t(32562);const ie=e=>{let{eaterMessage:{payload:i,surfaceId:t},feedIndex:r=0}=e;const a=(0,n.useRef)(null),l=(0,ee.Z)(a);if(!i)return null;let s=null;switch(i.type){case"cardCarousel":s=(0,C.tZ)(B.ZP,{children:(0,C.tZ)(U,{cardCarousel:i.cardCarousel,surface:t||"",isHovering:l,verticalPosition:r})});break;case"cardItemPayload":s=(0,C.tZ)(Q,{cardItem:i.cardItemPayload,surface:t||"",verticalPosition:r})}return s?(0,C.tZ)("div",{ref:a,children:s}):null}}}]);