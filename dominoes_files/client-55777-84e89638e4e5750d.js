(self.webpackChunkFusion=self.webpackChunkFusion||[]).push([[55777],{35207:(e,t,r)=>{"use strict";r.d(t,{ZP:()=>_,q7:()=>u});var o=r(91931),a=r(36278),n=r(8639),i=r(13823),s=r(94579),d=r(86575),c=r(33990);const l=(0,o.zo)("div",(e=>{let{$margin:t,$padding:r,$font:o={style:"PARAGRAPH_DEFAULT",weight:"NORMAL"},$textColor:a="CONTENT_PRIMARY",$backgroundColor:d="BACKGROUND_PRIMARY",$theme:c}=e;const l=(0,i.x)(o),u=(0,n.Lq)(a),_=(0,n.Lq)(d);return{...l?c.typography[l]:{},...u?{color:c.colors[u]}:{},..._?{backgroundColor:c.colors[_]}:{},...t?{margin:t}:{},...r?{padding:r}:{},display:"flex",alignItems:"center",whiteSpace:"normal",textAlign:"left",position:"sticky",top:0,zIndex:s.I_.surface}}));function u(e){return(0,d.X)(e.icon)?(0,c.tZ)(d.x,{styledIcon:e}):null}function _(e){let{badge:t,margin:r,padding:o,tag:n}=e;if(!t||!t.text)return null;let i=null;return t.icon&&t.icon.icon&&(i=(0,c.BX)(c.HY,{children:[(0,c.tZ)(d.x,{styledIcon:t.icon}),(0,c.tZ)(a.ZP,{$width:"16px"})]})),(0,c.BX)(l,{$as:n,$margin:r,$padding:o,$font:t.text.font,$textColor:t.text.color,$backgroundColor:t.backgroundColor,children:[i,t.text.text]})}},95148:(e,t,r)=>{"use strict";r.d(t,{Z:()=>d});var o=r(34567),a=r(52246),n=r(48566),i=r(79851),s=r(33990);function d(e){const t=e.button||o.Z,r=(0,n.Z)(e.source),d=(0,i.Z)();return(0,s.tZ)(t,{$as:a.rU,to:d,onClick:()=>{r(),e.onClick&&e.onClick()},children:e.children})}},60278:(e,t,r)=>{"use strict";r.d(t,{Vk:()=>te,ZP:()=>re,cS:()=>ce,Ut:()=>ie,SV:()=>se,gx:()=>de});var o=r(43193),a=r(36151),n=r(72843),i=r(40836),s=r(91631),d=r(58984),c=r(15070),l=r(95761),u=r(52298),_=r(33990);function p(e){return e.error&&"string"==typeof e.error.message?e.error.message:(0,_.tZ)(i.v,{id:"shared.genericServerError"})}var I=r(95148),U=r(91931),C=r(79851),N=r(12945),m=r(42973),E=r(5137),T=r(34567),A=r(47986),h=r(52246),y=r(11189),O=r(74748),S=r(48566),f=r(89400),R=r(93356),v=r(70247),P=r(90867),D=r(72275),g=r(53434),b=r(25543),Z=r(33535),L=r(45106),k=r(35207),G=r(76150),M=r(21304),B=r(67318),X=r(55758),w=r(74057),x=r(20196),z=r(83059),Y=r(62149),W=r(66971),H=r(14426),$=r(7930),F=r(89917),V=r(95461),K=r(61127),Q=r(62904);const q=(0,U.zo)("div",(e=>{let{$theme:t}=e;return{...t.typography.HeadingMedium,display:"flex",marginBottom:"8px"}})),j=(0,U.zo)("div",(e=>{let{$theme:t}=e;return t.typography.ParagraphMedium})),J=(0,U.zo)("div",(e=>{let{marginTop:t}=e;return{marginTop:t,display:"flex",alignItems:"center",flexDirection:"column"}}));function ee(e){const t=(0,Y.TH)(),r="storefrontError"===n.parse(t.search||"")?.pmod?y.c2:A.C45,a=(0,g.Z)(),{paymentProfiles:i}=(0,N.IM)(),u=(0,m.Z)("validation_error"),_=(0,S.Z)("order_estimate_error"),p=(0,C.Z)(),I=(0,s.k6)(),{updateDraftOrder:U}=(0,R.A4)(),E=(0,P.Z)(),{restaurantLink:T}=(0,D.Z)(),{serverCart:h}=(0,v.iQ)(),O=(0,d.I0)(),f=h.data?.items.length||0,b=(0,L.Z)(),{openSidebarCart:k,closeSidebarCart:$,sidebarCartVisible:K}=(0,G.Lb)(),{isMobile:Q}=(0,c.v)((e=>{let{device:t}=e;return t})),q=(0,M.pv)(),j=(0,Z.ZP)(),{storeUUID:J,isGroupOrder:ee}=(0,v.Dz)(),te=(0,X.g)(),{diningMode:re}=(0,w.Z)(),{enqueue:oe}=(0,x.Ds)(),ae=ce(),{handleDebundleDraftOrders:ne}=(0,W.x)(),{handleDiscardAndBundleOrders:ie}=(0,H.Z)(),se=(0,V.Z)(),de=(0,F.Z)(),le=o.useCallback((e=>{e&&oe({message:e},z.t.short)}),[oe]);return async(o,n,s)=>{const d="listItem"===s?.type?s.listItem?.action?.actionParams:null;switch(o?.type){case"RECUSTOMIZE":{j("eats:checkout_error_recustomize");const e="recustomizeParams"===o.params?.type&&o.params?.recustomizeParams?.itemsToRecustomize;if(e){const[r]=e;I.replace((0,A.lVP)(t,{itemUuid:r}))}else I.replace(r(t));return}case"REMOVE_ITEMS":{j("eats:checkout_error_remove_items");const e="removeParams"===o.params?.type&&o.params?.removeParams?.itemsToRemove;e&&u({shoppingCartItemUUIDs:e});const a=(e||[]).length,n=f-a<=0;return void(b&&e&&!ee&&n||I.replace(r(t)))}case"CLEAR_CART":return _(),void I.replace(p);case"RETRY_ESTIMATE":return U({forceUpdate:!0}),void I.replace(r(t));case"SWITCH_PAYMENT":{const e=i&&i.length>0?(0,A.vN_)(t,"paymentsSelectProfile"):(0,A.vN_)(t,"paymentsAddProfile");return void I.replace(e)}case"ADD_PAYMENT":return void I.replace((0,A.vN_)(t,"paymentsAddProfile"));case"SWITCH_DINING_MODE":{E();const e="switchDiningModeParams"===o.params?.type&&o.params?.switchDiningModeParams?.diningMode;return e&&e!==re&&te(e,{storeUuid:J}),void I.replace(r(t))}case"SWITCH_TO_DOOR_TO_DOOR":return O((0,l.J4)()),q(),await a("door_to_door"),void I.replace(r(t));case"SWITCH_TO_LEAVE_AT_DOOR":return O((0,l.J4)()),q(),await a("leave_at_door"),void I.replace(r(t));case"SWITCH_DELIVERY_TYPE":{const e="switchDeliveryTypeParams"===o?.params?.type?o.params.switchDeliveryTypeParams:null;return e?.deliveryType&&O((0,l.Lu)(e?.deliveryType)),O((0,l.J4)()),q(),void I.replace(r(t))}case"VIEW_CARTS":if(E(),Q){const o=e?(0,A._UC)(e):r(t);I.replace((0,A.nQQ)(o))}else I.replace(r(t)),k();return;case"NONE":return E(),j("eats:checkout_error_dismiss"),void(e?I.replace(e):I.replace(r(t)));case"GO_TO_MENU":return void I.replace(T);case"CLEAR_CART_AND_REDIRECT_TO_FEED":return _(),se&&de({type:"REDIRECT_TO_FEED"}),void I.replace(p);case"SCHEDULE_ORDER":return O((0,l.J4)()),q(),void I.replace((0,B.t)(t,{storeUuid:J,entryPoint:"checkout"}));case"REDIRECT_TO_FEED":return se&&de({type:"REDIRECT_TO_FEED"}),void I.replace(p);case"GO_BACK":return E(),void I.replace(r(t));case"SELECT_TAX_PROFILE":return q(),void I.replace((0,A.vN_)(t,"taxProfiles"));case"INPUT_PHONE_NUMBER":return void de({type:"EMBEDDING_APP_PHONE_UPDATE"})}switch(n?.actionType){case"NONE":return E(),j("eats:checkout_error_dismiss"),void(e?I.replace(e):I.replace(r(t)));case"SCHEDULE_ORDER":return j("eats:order_validation_recovery_path_clicked",{error:ae,storeUuid:J,source:b?"checkout":"cart",type:"SCHEDULE_ORDER"}),void I.replace((0,B.t)(t,{storeUuid:J,entryPoint:"checkout"}));case"REDIRECT_TO_FEED":if(K&&$(),j("eats:order_validation_recovery_path_clicked",{error:ae,storeUuid:J,source:b?"checkout":"cart",type:"REDIRECT_TO_FEED"}),se&&de({type:"REDIRECT_TO_FEED"}),I.replace(p),d&&"findAnotherStoreParams"===d.type){const e=(d.findAnotherStoreParams?.snackBarMessage?.richTextElements||[])[0],t=e&&"text"===e.type?e?.text?.text?.text:null;le(t)}return;case"SWITCH_TO_PICKUP":{j("eats:order_validation_recovery_path_clicked",{error:ae,storeUuid:J,source:b?"checkout":"cart",type:"SWITCH_TO_PICKUP"}),E();const e="PICKUP";return e&&e!==re&&te(e,{storeUuid:J}),void I.replace(r(t))}case"NOTIFY_WHEN_AVAILABLE":return j("eats:order_validation_recovery_path_clicked",{error:ae,storeUuid:J,source:b?"checkout":"cart",type:"NOTIFY_WHEN_AVAILABLE"}),void I.push((0,A.vN_)(t,"notifyMe"));case"REMOVE_ITEMS":{j("eats:order_validation_recovery_path_clicked",{error:ae,storeUuid:J,source:b?"checkout":"cart",type:"REMOVE_ITEMS"});const e="removeParams"===n.actionParams?.type&&n.actionParams?.removeParams?.itemsToRemove;e&&u({shoppingCartItemUUIDs:e});const o=(e||[]).length,a=f-o<=0;return void(b&&e&&!ee&&a||I.replace(r(t)))}case"DEBUNDLE_AND_NAVIGATE":return void ne(d);case"DISCARD_EXISTING_AND_CREATE_NEW_BUNDLE":return void ie(d)}}}function te(e){let{error:t}=e;const r=(0,Z.ZP)();(0,a.useEffect)((()=>{r("eats:generic_draft_order_modal_impression",{error:JSON.stringify(t)})}),[r,t]);const{draftOrder:o}=(0,v.Dz)(),n=Boolean(o?.addParticipantsIntended),s=(0,C.Z)();return(0,_.BX)(_.HY,{children:[(0,_.tZ)(q,{children:(0,_.tZ)(i.v,{id:"components.genericError.title"})}),(0,_.tZ)(j,{children:(0,_.tZ)(p,{error:null})}),(0,_.tZ)(u.ZP,{$height:24}),n?(0,_.tZ)(T.Z,{$as:h.rU,to:s,children:(0,_.tZ)(i.v,{id:"shared.viewRestaurants"})}):(0,_.tZ)(I.Z,{source:"order_estimate_error",children:(0,_.tZ)(i.v,{id:"shared.clearCart"})})]})}function re(e){const t=e.titleAs||q,r=e.bodyAs||o.Fragment,a=e.originUrl,n=e.validationError.alert,i=ee(a),s=n?.primaryButton,d=n?.secondaryButton,c=(0,L.Z)(),l=(0,Z.ZP)(),{storeUUID:u}=(0,v.Dz)(),p=(n&&"richBody"in n&&n.richBody||void 0)?.sections;if((0,b.Z)(),l("eats:order_validation_modal_shown",{error:e.validationError,storeUuid:u,source:c?"checkout":"cart"}),!n)return(0,_.tZ)(te,{error:e.validationError});let I="";"bodyBadges"in n&&n.bodyBadges?I=n.bodyBadges.map(((e,t)=>(0,_.tZ)(k.ZP,{badge:e},t))):"body"in n&&n.body&&(I=(0,_.tZ)(f.Z,{badge:n.body,baseFont:"ParagraphMedium"}));let U="";return U="string"==typeof n.title?n.title:n.title?.text,(0,_.BX)(_.HY,{children:[U?(0,_.tZ)(t,{children:U}):null,(0,_.BX)(r,{children:[(0,_.tZ)(j,{children:I}),p?p.map(((e,t)=>(0,_.tZ)(ae,{richBodySection:e},t))):null,(0,_.BX)(J,{marginTop:p?.length?"16px":"24px",children:[s?(0,_.tZ)(T.Z,{onClick:()=>{l("eats:order_validation_modal_dismiss",{error:e.validationError,storeUuid:u,source:c?"checkout":"cart"}),i(s)},children:s.title}):null,d?(0,_.tZ)(E.Z,{onClick:()=>{l("eats:order_validation_modal_dismiss",{error:e.validationError,storeUuid:u,source:c?"checkout":"cart"}),i(d)},children:d.title}):null]})]})]})}const oe=(0,U.zo)("div",(e=>{const{$hasAction:t}=e;return{cursor:t?"pointer":"default",":hover":{backgroundColor:t?"rgba(0,0,0,0.04)":"transparent"},":active":{backgroundColor:t?"rgba(0,0,0,0.08)":"transparent"}}}));function ae(e){let{richBodySection:t}=e;const r=ee(),o=(0,M.CF)();if(function(e,t){return!e&&"listItem"===t?.type&&t?.listItem&&t.listItem.action?.actionType===O.bE.SCHEDULE_ORDER}(!(0,K.Z)(o?.data?.checkoutPayloads?.timeWindowPicker),t))return null;if("listItem"!=t?.type)return null;const a=t?.listItem?.listContent?.leadingContent,n=t?.listItem?.listContent?.title,i=t?.listItem?.listContent?.trailingContent,s=t?.listItem?.listContent?.hasDivider,d=t?.listItem?.action;return n?(0,_.tZ)(oe,{$hasAction:!!d&&Boolean(d),onClick:()=>{r(void 0,d,t)},children:(0,_.tZ)($.Z,{leadingContent:a,title:n,trailingContent:i,hasDivider:s})}):null}const ne=new Set([Q.Sc,Q.no,Q.pc,Q.Ys,Q.aZ]),ie=e=>{const t=ee(),r=e?.alert?.primaryButton;return r&&e?.type===Q.Sc&&"REMOVE_ITEMS"===r.type?()=>t(r):null},se=e=>{const{draftOrder:t}=(0,v.Dz)();if(e?.type!==Q.Sc||!t)return[];const r=t?.shoppingCart?.items||[];let o=[];const a=e?.alert?.primaryButton?.params;a&&"removeParams"===a.type&&(o=a.removeParams.itemsToRemove||[]);const n=[];return o.forEach((e=>{const t=r.find((t=>{let{shoppingCartItemUuid:r}=t;return r===e}));t&&t.title&&n.push(t.title)})),n},de=()=>(0,c.v)((e=>{let{draftOrder:t,stores:r}=e;const o=t.draftOrder.data?.draftOrder.storeUuid||"";return r[o]?r[o]?.data?.orderForLaterInfo:null})),ce=()=>{const e=((0,M.CF)().data?.validationErrors||[])[0];return e&&e.type&&ne.has(e.type)?e:null}},47073:(e,t,r)=>{"use strict";r.d(t,{Z:()=>P});const o=Object.freeze({UNKNOWN:"UNKNOWN",PRIMARY:"PRIMARY",SECONDARY:"SECONDARY",TERTIARY:"TERTIARY",ALWAYS_LIGHT:"ALWAYS_LIGHT",BACKGROUND_PROTECTION:"BACKGROUND_PROTECTION",DESTRUCTIVE_PRIMARY:"DESTRUCTIVE_PRIMARY",DESTRUCTIVE_SECONDARY:"DESTRUCTIVE_SECONDARY"}),a=Object.freeze({UNKNOWN:"UNKNOWN",PILL:"PILL",RECT:"RECT"}),n=Object.freeze({UNKNOWN:"UNKNOWN",CIRCLE:"CIRCLE",SQUARE:"SQUARE"}),i=Object.freeze({UNKNOWN:"UNKNOWN",SMALL:"SMALL",NORMAL:"NORMAL",LARGE:"LARGE"});var s=r(68065),d=r(86695),c=r(91931),l=r(33497),u=r(57444),_=r(58814),p=r(8639),I=r(31913);const U={[i.SMALL]:s.NO.compact,[i.NORMAL]:s.NO.default,[i.LARGE]:s.NO.large};function C(e){return e&&U[e]||s.NO.default}const N={[o.PRIMARY]:d.TO.primary,[o.SECONDARY]:d.TO.secondary,[o.TERTIARY]:d.TO.tertiary};function m(e){return e&&N[e]||d.TO.primary}const E={[n.CIRCLE]:s.X3.circle,[n.SQUARE]:s.X3.square};const T={[a.RECT]:s.X3.default,[a.PILL]:s.X3.pill};var A=r(89217);const h=Object.freeze({UNKNOWN:"UNKNOWN",SPACING_UNIT_0X:"SPACING_UNIT_0X",SPACING_UNIT_0_5X:"SPACING_UNIT_0_5X",SPACING_UNIT_1X:"SPACING_UNIT_1X",SPACING_UNIT_1_5X:"SPACING_UNIT_1_5X",SPACING_UNIT_2X:"SPACING_UNIT_2X",SPACING_UNIT_2_5X:"SPACING_UNIT_2_5X",SPACING_UNIT_3X:"SPACING_UNIT_3X",SPACING_UNIT_3_5X:"SPACING_UNIT_3_5X",SPACING_UNIT_4X:"SPACING_UNIT_4X",SPACING_UNIT_4_5X:"SPACING_UNIT_4_5X",SPACING_UNIT_5X:"SPACING_UNIT_5X",SPACING_UNIT_6X:"SPACING_UNIT_6X",SPACING_UNIT_7X:"SPACING_UNIT_7X",SPACING_UNIT_8X:"SPACING_UNIT_8X",SPACING_UNIT_9X:"SPACING_UNIT_9X",SPACING_UNIT_10X:"SPACING_UNIT_10X",SPACING_UNIT_11X:"SPACING_UNIT_11X",SPACING_UNIT_12X:"SPACING_UNIT_12X",SPACING_UNIT_13X:"SPACING_UNIT_13X"});var y=r(33990);const O=(0,c.zo)("button",(e=>{let{$theme:t,disabled:r,$backgroundColor:o,$titleColor:a,shape:n,$size:i}=e,d=t.colors.buttonPrimaryText;if(a&&"textColor"===a.type){const e=(0,p.Lq)(a.textColor);e&&(d=t.colors[e]||"")}let c=t.colors.buttonPrimaryFill,I=t.colors.buttonPrimaryHover,U=t.colors.buttonPrimaryActive;if(o&&"backgroundColor"===o.type){const e=(0,p.Lq)(o.backgroundColor);if(e&&(c=t.colors[e]||""),c){const e=(0,p.RQ)(c)?p.vm:p.dK;I=e(c,.1),U=e(c,.2)}else I="",U=""}return{maxWidth:"100%",color:d,height:R(i),...(0,l.Z)({$theme:t}),backgroundColor:c,":hover":r?{}:{backgroundColor:I},":active":r?{}:{backgroundColor:U},transitionDuration:t.animation.timing200,transitionTimingFunction:t.animation.linearCurve,transitionProperty:"background",...r?(0,u.Z)(t):(0,_.Z)(t),...n===s.X3.pill?{minHeight:"36px",borderRadius:t.borders.pillButtonBorderRadius,padding:"0 12px"}:{}}})),S=(0,c.zo)("span",(e=>{let{$whiteSpace:t}=e;return"nowrap"===t?{overflow:"hidden",textOverflow:"ellipsis"}:{}})),f=(e,t,r)=>{if(!e)return null;switch(e.type){case"icon":{const o={...e?.icon};return!e.icon.size&&t&&(o.size=v(t)),e?.icon?.color||(o.color=(e=>{if("definedStyle"===e?.type)switch(m(e.definedStyle)){case"primary":return"CONTENT_INVERSE_PRIMARY";case"secondary":case"tertiary":return"CONTENT_PRIMARY";default:return"CONTENT_NEGATIVE"}return"CONTENT_INVERSE_PRIMARY"})(r)),(0,y.tZ)(A.ZP,{illustration:{icon:o,type:e.type}})}case"unknown":case"urlImage":default:return null}},R=e=>{switch(e){case i.UNKNOWN:return"36px";case i.SMALL:return"24px";case i.NORMAL:return"36px";case i.LARGE:return"56px";default:return"36px"}},v=e=>{switch(e){case i.SMALL:return h.SPACING_UNIT_2X;case i.NORMAL:return h.SPACING_UNIT_2_5X;case i.LARGE:default:return h.SPACING_UNIT_3X}},P=e=>{let{viewModel:t,onClick:r,isDisabled:o,__whiteSpace:a="nowrap"}=e;const{content:n,isEnabled:i=!o,buttonSize:c}=t,l=t?.style??{type:"unknown",unknown:!0},u=t?.isLoading||!1;if(!n)return null;let _=null,p=null,U=null,N=s.X3.default;switch(n.type){case"textContent":{let e={style:"LABEL_DEFAULT",weight:"MEDIUM"};if(c)switch(c){case"LARGE":e={style:"LABEL_LARGE",weight:"MEDIUM"};break;case"NORMAL":e={style:"LABEL_DEFAULT",weight:"MEDIUM"};break;case"SMALL":e={style:"LABEL_SMALL",weight:"MEDIUM"}}p=f(n.textContent.leadingContent,c,l),U=f(n.textContent.trailingContent,c,l),_=(0,y.tZ)(S,{$whiteSpace:a,children:(0,y.tZ)(I.ZP,{text:n.textContent.textContent,whiteSpace:a,__font:e})}),N=function(e){return e&&T[e]||s.X3.default}(n.textContent.shape);break}case"iconContent":if(!n.iconContent.iconIllustration)return null;N=function(e){return e&&E[e]||s.X3.circle}(n.iconContent.shape),_=(0,y.tZ)(A.SZ,{richIllustration:n.iconContent.iconIllustration});break;default:return null}switch(l.type){case"unknown":case"definedStyle":{const e="unknown"===l.type?"UNKNOWN":l.definedStyle;let o=!1;switch(N){case s.X3.default:o=!0}return(0,y.tZ)(d.zx,{overrides:{BaseButton:{style:{maxWidth:"100%"}}},size:C(t.buttonSize),kind:m(e),shape:N,isFullWidth:o,onClick:r,disabled:!i,isLoading:u,startEnhancer:p,endEnhancer:U,children:_})}case"customStyle":{const{backgroundColor:e,titleColor:t}=l.customStyle;return(0,y.tZ)(O,{onClick:r,disabled:!i,shape:N,$backgroundColor:e,$titleColor:t,$size:c,children:_})}default:return null}}},66971:(e,t,r)=>{"use strict";r.d(t,{x:()=>I});var o=r(91631),a=r(47986),n=r(70247),i=r(62149),s=r(47885),d=r(64388),c=r(5639),l=r(60743),u=r(57578),_=r(87750),p=r(76150);const I=()=>{const e=(0,i.TH)(),t=(0,o.k6)(),{isMobile:r}=(0,c.hU)(),{draftOrders:I,bundleGroupUUID:U}=(0,n.Dz)(),{isStorePrecheckoutBundlingEnabled:C}=(0,s.Z)(),{mutate:N}=(0,_.A)("discardBundleGroup"),{openSidebarCart:m}=(0,p.Lb)(),{setActiveDraftOrder:E}=(0,l.Z)(),T=I?.data||{},A=Object.values(T)?.find((e=>e.data?.draftOrder?.bundleGroupInfo?.bundleGroupUUID===U&&"PRIMARY"===e.data?.draftOrder?.bundleGroupInfo?.bundleGroupRole))?.data?.draftOrder,{store:h}=(0,d.ZP)(C?A?.storeUuid:null),y=Object.values(T)?.find((e=>e.data?.draftOrder?.bundleGroupInfo?.bundleGroupUUID===U&&"SECONDARY"===e.data?.draftOrder?.bundleGroupInfo?.bundleGroupRole))?.data?.draftOrder,{store:O}=(0,d.ZP)(C?y?.storeUuid:null);return{handleDebundleDraftOrders:async o=>{if(o&&"debundleParams"===o.type){const n=o.debundleParams,i=n.bundleGroupUUID;if(i&&await N({bundleGroupUUID:i,shouldRemoveDraftOrders:!1}),"goToCart"===n?.postDebundleNavigationParams?.type&&i){const o=n.postDebundleNavigationParams.goToCart?.draftOrderUUID;o&&E(o);const i=o===A?.uuid?h:o===y?.uuid?O:null;if(r)t.replace((0,a.nQQ)((0,a.C45)(e)));else{const r=i?.data?(0,a.gfM)(e,{...(0,a.Btk)(i.data),newQueryParams:{entryPoint:"checkout-validation-debundle"}}):null;r&&t.replace(r),m()}return}if("goToBundleInterstitial"===n?.postDebundleNavigationParams?.type&&i){const r=n.postDebundleNavigationParams.goToBundleInterstitial?.storeUUID,o=r===A?.storeUuid?h:r===y?.storeUuid?O:null;if(!o?.data)return;const i=(0,a.gfM)(e,{...(0,a.Btk)(o.data),newQueryParams:{entryPoint:"checkout-validation-debundle"}}),s=(0,u.kR)(o.data.catalogSectionsMap)?.catalogSectionUUID;if(s){const e=encodeURIComponent(JSON.stringify({storeUuid:r,catalogSectionUuid:s})),o=(0,a._UC)(i);t.replace((0,a.vN_)(o,"bundleItems",e))}}}}}}},14426:(e,t,r)=>{"use strict";r.d(t,{Z:()=>U});var o=r(36151),a=r(91631),n=r(87750),i=r(94677),s=r(90867),d=r(84272),c=r(64388),l=r(62149),u=r(47986),_=r(11189),p=r(69694),I=r(28984);const U=()=>{const e=(0,a.UO)(),t=(0,a.k6)(),r=(0,l.TH)(),{mutate:U}=(0,n.A)("discardBundleGroup"),{mutate:C}=(0,n.A)("createBundleGroup"),{addDraftItemToCart:N,cleanDraftAddToCart:m}=(0,i.Z)(),E=(0,s.Z)(),{storeUuid:T}=(0,u.RAN)(r,["storeUuid"]),{primaryDraftOrderUUID:A,primaryBundledStoreUuid:h}=(0,d.Z)(),{store:y}=(0,c.ZP)(T,{primaryStoreUUID:h}),O=(0,u.WxO)(e),S=y.data?(0,u.Btk)(y.data):O,f=(0,u.gfM)(r,S),{onMaxMerchantsBottomSheetImpression:R,onMaxMerchantsBottomSheetOptionClick:v}=(0,I.Z)();let P;y.data&&h&&A&&(P=(0,_.mn)({location:r,secondaryStore:y.data,primaryBundledStoreUuid:h,primaryDraftOrderUUID:A}));const{draftOrderUUID:D}=(0,p.Z)(T);(0,o.useEffect)((()=>{R({primaryStoreUuid:h,secondaryStoreUuid:T})}),[R,h,T]);return{handleDiscardAndBundleOrders:(0,o.useCallback)((async e=>{const r="debundleParams"===e?.type?e.debundleParams.bundleGroupUUID:null;if(r&&A&&T){if(v({primaryStoreUuid:h,secondaryStoreUuid:T,action:"replace"}),await U({bundleGroupUUID:r,shouldRemoveDraftOrders:!1}),D&&await C({primaryDraftOrderUUID:A,secondaryDraftOrdersInfo:{type:"draftOrderUUIDs",draftOrderUUIDs:[D]}}),N&&N({eventSource:"pcb_bundle_limit_reached"}),E(),m(),P)return t.replace(P);t.replace(f)}}),[U,N,E,m,t,P,f,A,h,D,C,T,v])}}},72275:(e,t,r)=>{"use strict";r.d(t,{Z:()=>S});var o=r(36151),a=r(88885),n=r(8051),i=r(14966),s=r(58442),d=r(91931),c=r(62149),l=r(64388),u=r(70247),_=r(83960),p=r(69630),I=r(10825),U=r(33535),C=r(76150),N=r(45106),m=r(80341),E=r(87444),T=r(26599),A=r(33023),h=r(47986);const y=e=>{let{location:t,store:r}=e;const o=r.data?(0,h.gfM)(t,(0,h.Btk)(r.data)):"";return(e=>{let{location:t,locationType:r,storeUuid:o="",restaurantLink:a}=e;return(0,A.qP)(r)?(0,h.Bwo)(t,{storeUuid:o}):a})({location:t,locationType:r?.data?.location?.locationType,storeUuid:r?.data?.uuid,restaurantLink:o})};var O=r(33990);function S(e){const{isDraftOrderCreator:t,isDraftOrderParticipant:A,creatorName:h,hasGroupOrder:S,orderDisplayName:f,isEditOrder:R,deliveryAddress:v,deliveryTime:P,diningMode:D}=(0,_.Z)(),g=(0,a.T)(),[b]=(0,d.hQ)(),{serverCart:Z}=(0,u.iQ)(),L=(0,c.TH)(),{sidebarCartVisible:k,sidebarCartIn:G,closeSidebarCart:M}=(0,C.Lb)(),B=!(0,T.Z)()||!(!k&&!G),{store:X,getStore:w}=(0,l.ZP)(Z.data?.storeUuid||e?.storeUuid,{deliveryAddress:v,deliveryTime:P,diningMode:D,cacheOnly:!B}),[,x]=(0,d.hQ)(),z=(0,p.Z)(),Y=(0,I.Z)(),W=(0,U.ZP)(),H=(0,N.Z)(),{isBundledOrder:$,draftOrderUUID:F,draftOrder:V}=(0,u.Dz)(),K=V?.bundleGroupInfo?.bundleGroupRole,Q=(0,E.Z)("canonical_product_smart_cart"),{currentCartIsSmartCart:q}=(0,m.R)(),j=q&&Q,J=S&&f||R&&g("go.edit_group_order")||t&&g("go.your_group_order")||A&&g("go.group_order_title",{firstName:h})||j&&g("smart_cart.cart_title.text")||g("components.CheckoutOrderMarketplaceHeader.yourOrder"),ee=X.data?.title||"",te=(0,O.tZ)("span",{className:b({...z?x.typography.LabelMedium:x.typography.LabelSmall,...(0,i.lE)({$theme:x}),color:x.colors.action}),children:ee}),re=y({location:L,store:X}),oe=(0,s.P)(g("go.cart_store_name"),{storeName:te}),ae=X.data?.heroImageUrls?.[0]?.url??(0,n.pZ)(r(44412)),ne=o.useCallback((()=>{z&&(Y(),w()),W("eats:click_store_link",{source:H?"checkout":"cart",...z&&{activePreferenceType:"draft_order"},...$?{storePreCheckoutBundling:{draftOrderUuid:F,bundleGroupRole:String(K)}}:null}),M()}),[z,W,H,M,Y,w,K,F,$]);return{title:J,store:X,storeTitle:ee,storeImg:ae,storeAddr:X.data?.location?.streetAddress,restaurantLink:re,restaurantLinkNode:oe,onGoToStore:ne}}},33023:(e,t,r)=>{"use strict";r.d(t,{SF:()=>s,oW:()=>i,qP:()=>n});var o=r(40836),a=r(33990);const n=e=>!!e&&"ITEMLESS_STORE"===e,i=e=>n(e)?(0,a.tZ)(o.v,{id:"checkout.fare_breakdown.estimated_total_label"}):(0,a.tZ)(o.v,{id:"checkout.fare_breakdown.total_label"}),s=e=>n(e)?(0,a.tZ)(o.v,{id:"shared.estimated_subtotal"}):(0,a.tZ)(o.v,{id:"shared.subtotal"})},90867:(e,t,r)=>{"use strict";r.d(t,{Z:()=>I});var o=r(58984),a=r(95761),n=r(55758),i=r(70496),s=r(69630),d=r(7876),c=r(83960),l=r(21304),u=r(93356),_=r(81219),p=r(70605);function I(){const e=(0,n.g)(),t=(0,i.Z)(),r=(0,o.I0)(),I=(0,s.Z)(),{updateDraftOrderMutation:U}=(0,u.A4)(),{deliveryTime:C,deliveryAddress:N,diningMode:m,storeUuid:E}=(0,c.Z)(),T=(0,l.pv)();return()=>{r((0,a.J4)()),r((0,_.dr)()),r((0,p.zc)()),T(),U.reset(),I?r((0,d.A0)(E,{...C&&{storeScheduledTime:C},...N&&{storeDeliveryLocation:N},...m&&{storeDiningMode:m}})):(N&&t(N,null),m&&e(m))}}},62904:(e,t,r)=>{"use strict";r.d(t,{Sc:()=>o,Ys:()=>i,aZ:()=>s,no:()=>n,pc:()=>a});const o="UNAVAILABLE_ITEMS",a="STORE_UNAVAILABLE",n="INVALID_DELIVERY_TIME_RANGE",i="RADIUS_REDUCED_BY_SURGE",s="ALCOHOL_ORDER_BEYOND_SALES_HOURS"},7930:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var o=r(91931),a=r(77481),n=r(33990);const i=(0,o.zo)("div",{width:"inherit"}),s=e=>{let{leadingContent:t,title:r,size:o,trailingContent:s,hasDivider:d}=e;return(0,n.tZ)(i,{"data-sdui":"list-content-wrapper",children:(0,n.tZ)(a.Z,{viewModel:{leadingContent:t,title:r,size:o,trailingContent:s,hasDivider:d},hasListDivider:!0})})}},80341:(e,t,r)=>{"use strict";r.d(t,{R:()=>I});var o=r(36151),a=r(31615),n=r(50026),i=r(83960),s=r(60743);const d=Object.freeze({UNKNOWN:"UNKNOWN",STOREFRONT:"STOREFRONT",SMART_CART_CAROUSEL:"SMART_CART_CAROUSEL",REORDER_BUTTON:"REORDER_BUTTON",GIFT_SHOP:"GIFT_SHOP"});var c=r(80310);const l=e=>e.reduce(((e,t)=>(t?.childOptions?.options&&t.uuid&&(e[t.uuid]=(0,c.lP)(t.childOptions.options)),e)),{});var u=r(21304),_=r(87444),p=r(86990);const I=e=>{const{draftOrder:t,deliveryTime:r}=(0,i.Z)(e),[c,I]=(0,o.useState)(!1),[U,C]=(0,o.useState)(null),{setActiveDraftOrder:N}=(0,s.Z)(),m=(0,p.Z)({storeId:e,originalCurrencyCode:null}),E=(0,_.Z)("canonical_product_smart_cart"),{cmpQuery:T}=(0,u.ZP)(E?["canonicalProductStorePickerPayload"]:[]),A=Boolean(T?.data?.checkoutPayloads?.canonicalProductStorePickerPayload),h={type:d.SMART_CART_CAROUSEL,funnelPath:[d.SMART_CART_CAROUSEL],metadata:{smartCartMetadata:{originalStoreUUID:e}}},{createDraftOrder:y}=(0,a.Z)("smart-cart",void 0,h),{discardDraftOrder:O}=(0,n.Z)();return{error:U,isLoading:c,resetErrorState:()=>{C(null)},onSelectStore:async e=>{I(!0);const o=e.items,a=t?.shoppingCart.items;if(!o||!a||!e.storeUuid||e.storeUuid===t?.storeUuid)return I(!1),void C(new Error("Invalid payload"));const n=((e,t)=>{const r=[];return(e.items??[]).forEach((o=>{const a=((e,t)=>t.find((t=>t.shoppingCartItemUuid===e.replacingShoppingCartItemUuid)))(o,t);if(!a)return;const{uuid:n,sectionUuid:i,subsectionUuid:s,storeUuid:d,shoppingCartItemUuid:c,fulfillmentIssueAction:u,imageURL:_,numAlcoholicItems:p,title:I,price:U,consumerUuid:C,customizations:N,...m}=a;o.itemUuid&&e.storeUuid&&r.push({uuid:o.itemUuid,shoppingCartItemUuid:o.itemUuid,sectionUuid:o.sectionUuid??void 0,storeUuid:e.storeUuid,subsectionUuid:o.subsectionUuid?o.subsectionUuid:o.sectionUuid??"",customizations:o.selectedCustomizations?l(o.selectedCustomizations):{},...m})})),r})(e,a);if(r)try{const{draftOrder:e}=await y({shoppingCartItems:n,deliveryTime:r,currencyCode:m});e&&(N(e.uuid),O({draftOrderUUIDs:[t.uuid],storeUUID:t.storeUuid??""}),I(!1))}catch(e){I(!1),C(e)}},currentCartIsSmartCart:A}}},53434:(e,t,r)=>{"use strict";r.d(t,{Z:()=>l});var o=r(36151),a=r(58984),n=r(24934),i=r(54669),s=r(45547),d=r(95761),c=r(38777);function l(){const e=(0,i.Z)(),{deliveryInstructions:t}=(0,o.useContext)(n.X3),{upsertDeliveryLocationWithInstruction:r}=(0,s.Z)(),l=(0,a.I0)(),{isDelegatedBooking:u}=(0,c.W)();return(0,o.useCallback)((async o=>{if(!e)return void 0;if(u)return void await l((0,d.Dr)(o));const a=t.data?.instructions||[];let n=a.find((e=>e.interactionType===o));"leave_at_door"!==o||n||(n=a.find((e=>"door_to_door"===e.interactionType))),await r({instruction:{aptOrSuite:n?.aptOrSuite||"",notes:n?.notes||"",businessName:n?.businessName||"",interactionType:o},nickName:e.label||"",location:e}),await l((0,d.Dr)(o))}),[t.data?.instructions,e,r])}},25543:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var o=r(43193),a=r(70247),n=r(33535),i=r(49373);const s=()=>{const e=(0,n.ZP)(),{serverCart:t}=(0,a.iQ)(),r=t.data?.items||[],s=(0,i.dH)(r),{data:d,error:c}=t;o.useEffect((()=>{"DRAFT_ORDER_VALIDATION_ERROR"===c?.meta?.type&&e("eats:draft_order_validation_error",{quantity:s,storeUuid:d?.storeUuid,draftOrderUuid:d?.draftOrderUuid,cartUuid:d?.cartUuid})}),[c,d,s,e])}},44412:(e,t,r)=>{e.exports=r.p+"4e76c3bddd07ac48.svg"}}]);