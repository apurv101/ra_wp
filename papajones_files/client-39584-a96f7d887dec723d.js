"use strict";(self.webpackChunkFusion=self.webpackChunkFusion||[]).push([[39584,86856],{__fusion__1368:(e,t,i)=>{i.r(t),i.d(t,{default:()=>o});var n=i(36151),r=i(33990);const o=n.forwardRef((function(e,t){let{title:i="Chevron down small",titleId:n,size:o="1em",...a}=e;return(0,r.BX)("svg",{width:o,height:o,viewBox:"0 0 24 24",fill:"none",ref:t,"aria-labelledby":n,...a,children:[void 0===i?(0,r.tZ)("title",{id:n,children:"Chevron down small"}):i?(0,r.tZ)("title",{id:n,children:i}):null,(0,r.tZ)("path",{d:"M18 8v3.8l-6 4.6-6-4.6V8l6 4.6L18 8Z",fill:"currentColor"})]})}))},39584:(e,t,i)=>{i.d(t,{Z:()=>$t});var n=i(43193),r=i(36151),o=i(91931),a=i(34626),d=i(54669),l=i(80165),s=i(4525),c=i(93866),u=i(83563),h=i(69630),g=i(54403),p=i(54176),m=i(32762),f=i(33879);var b=i(46280),v=i(62149),y=i(52246),x=i(88885),w=i("__fusion__1509"),Z=i("__fusion__1368"),$=i(33535),k=i(22395),S=i(74057),C=i(54939),z=i(71051),B=i(29230),R=i(45423),_=i(90499),D=i(33990);const I=(0,o.zo)("div",{textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden",flex:"0 1 content"}),M=e=>{let{diningMode:t,deliveryTime:i}=e;const n="scheduled"in i,o=(0,r.useMemo)((()=>n?(0,D.tZ)(_.Z,{deliveryTime:i}):null),[n,i]);return(0,D.tZ)(I,{"data-test":"delivery-time",children:"scheduled"in i?o:(0,D.tZ)(R.Z,{shortenedTime:!0,diningMode:t})})};var L=i(97130);const P=(0,o.zo)(y.rU,(e=>{let{$theme:t,$isDisabled:i}=e;return{...t.typography.LabelSmall,borderRadius:t.borders.pillButtonBorderRadius,display:"flex",flexDirection:"row",alignItems:"center",cursor:"pointer",height:`${B.Kv.componentHeight}px`,boxSizing:"border-box",minWidth:`${B.Kv.addressMinWidth}px`,flex:"0 1 auto",color:i?t.colors.contentTertiary:t.colors.contentPrimary}})),O=(0,o.zo)("div",(e=>{let{$theme:t}=e;return{textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden",flex:`1 1 ${t.sizing.scale1200}`,maxWidth:"180px"}})),T=e=>{const[t,i]=(0,o.hQ)(),{deliveryTime:n,deliveryLocation:a,diningMode:d}=(0,S.Z)(),s=(0,r.useContext)(z.k7),c=(0,x.T)(),u=(0,$.ZP)(),h=(0,l.WI)("header-location-button"),{shouldOverrideLabel:g,overrideLabel:p}=(0,C.Z)(),{storeUuid:m,isSchedulable:f}=e,{redirectUrl:b}=(0,L.X)();return a?(0,D.BX)(P,{"data-testid":"edit-delivery-location-button",ref:h,$isDisabled:e.deliveryLocationPickerDisabled,to:()=>b({storeUuid:m,isSchedulable:f,locationManagerOrigin:"feed",nextUrl:!0}),onClick:t=>{e.deliveryLocationPickerDisabled?t.preventDefault():(u("eats:delivery_details_click"),s.set("addressChangeTouched",!0))},children:[(0,D.tZ)(w.default,{size:"16","aria-label":c("component.location_typeahead_mobile.deliver_to"),title:c("component.location_typeahead_mobile.deliver_to"),className:t({marginRight:i.sizing.scale100})}),(0,D.tZ)(O,{"data-testid":"delivery-address-label",children:g?p:a.address.address1}),(0,D.tZ)(k.Z,{spaces:2}),(0,D.tZ)(M,{diningMode:d,deliveryTime:n}),(0,D.tZ)(Z.default,{size:"16","aria-label":c("component.location_typeahead_mobile.deliver_to"),title:c("component.location_typeahead_mobile.deliver_to"),className:t({marginLeft:i.sizing.scale100})})]}):null};var K=i(80235),W=i(79810),N=i(92300),H=i(75267);const U={fixed:"fixed",intrinsic:"intrinsic"},A=(e,t)=>`segments-${e}-segment-${t}`,E=(0,W.zo)("div",(e=>{let{$theme:t,$fill:i=U.intrinsic,$height:n="fit-content",$width:r="fit-content"}=e;const o={backgroundColor:t.colors.backgroundSecondary,borderRadius:t.sizing.scale500,boxSizing:"border-box",isolation:"isolate",padding:t.sizing.scale100,position:"relative",overflow:"hidden",height:n,width:r};return(e=>e===U.intrinsic)(i)&&(o["::-webkit-scrollbar"]={display:"none"},o["-ms-overflow-style"]="none",o.scrollbarWidth="none"),o}));E.displayName="StyledRoot";const F=(0,W.zo)("div",(e=>{let{$theme:t}=e;return{backgroundColor:t.colors.backgroundSecondary,boxSizing:"border-box",display:"flex",height:"100%",justifyContent:"space-evenly",position:"relative",width:"100%",zIndex:-2,flexDirection:"row",overflow:"hidden",minHeight:"40px"}}));F.displayName="StyledSegmentList";const X=(0,W.zo)("button",(e=>{let{$theme:t,$fill:i=U.intrinsic,$focusVisible:n=!1,$isActive:r=!1}=e;const o={cursor:"pointer",position:"relative",WebkitAppearance:"none",marginLeft:"0",marginRight:"0",marginTop:"0",marginBottom:"0",boxSizing:"border-box",display:"grid",alignItems:"center",paddingInline:t.sizing.scale500,paddingBlock:t.sizing.scale300,borderLeftWidth:0,borderTopWidth:0,borderRightWidth:0,borderBottomWidth:0,borderRadius:t.sizing.scale300,color:r?t.colors.contentPrimary:t.colors.contentTertiary,backgroundColor:"transparent",flexGrow:1,transitionProperty:"box-shadow, color",transitionDuration:t.animation.timing200,transitionTimingFunction:t.animation.linearCurve,outline:"none",outlineOffset:"-3px",justifyContent:"center",overflow:"hidden",":hover":{boxShadow:r?"none":t.lighting.overlay100},":disabled":{cursor:"not-allowed",color:t.colors.contentStateDisabled,":hover":{boxShadow:"none"}},":disabled:hover":{background:"none"}};return n&&(o.outline=`3px solid ${t.colors.accent}`),(e=>e===U.fixed)(i)&&(o.flexGrow=1,o.flexBasis=0),o}));X.displayName="StyledSegment";const j=(0,W.zo)("div",(()=>({display:"flex",height:"14px",width:"14px",alignItems:"center"})));j.displayName="StyledArtworkContainer";const V=(0,W.zo)("div",(e=>{let{$theme:t,$length:i=0,$distance:n=0,$animate:r=!1}=e;const o={position:"absolute",borderRadius:t.sizing.scale300,boxSizing:"border-box",height:"100%",width:"100%",border:`${t.sizing.scale0} solid ${t.colors.primary}`,backgroundColor:t.colors.backgroundPrimary,zIndex:-1,bottom:"0px",left:"0px"};return o.width=`${i}px`,o.transform=`translateX(${n}px)`,r&&(o.transitionProperty="all",o.transitionDuration=t.animation.timing400,o.transitionTimingFunction=t.animation.easeInOutQuinticCurve),o}));V.displayName="StyledActive";(0,W.zo)("div",(e=>{let{$theme:t,$pad:i=!0}=e;const n={flexGrow:1,outline:"none"};return i&&(n.paddingTop=t.sizing.scale600,n.paddingRight=t.sizing.scale600,n.paddingBottom=t.sizing.scale600,n.paddingLeft=t.sizing.scale600),n})).displayName="StyledSegmentPanel";const G=(0,W.zo)("div",(e=>{let{$theme:t}=e;return{...t.typography.LabelSmall,overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis",position:"relative"}})),Q=(0,W.zo)("div",(e=>{let{$theme:t}=e;return{...t.typography.ParagraphXSmall,padding:0,margin:0,overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis",position:"relative"}})),Y=(0,W.zo)("div",(e=>{let{$theme:t}=e;return{display:"flex",gridGap:t.sizing.scale100,alignItems:"center",position:"relative",justifyContent:"center",overflow:"hidden"}})),q=(0,W.zo)("div",(e=>{let{$theme:t}=e;return{...t.typography.ParagraphXSmall,width:"16px",height:"16px",display:"flex",justifyContent:"center",alignItems:"center",borderRadius:"50%",backgroundColor:t.colors.accent,color:t.colors.white}})),J=(0,W.zo)("div",(e=>{let{$theme:t}=e;return{width:"8px",height:"8px",display:"flex",justifyContent:"center",alignItems:"center",borderRadius:"50%",backgroundColor:t.colors.accent,color:t.colors.accent,alignSelf:"start",marginLeft:"-2px"}})),ee="next",te="previous",ie=e=>{if(!e)return{length:0,distance:0};let{width:t}=e.getBoundingClientRect();return t=Math.floor(t),{length:t,distance:e.offsetLeft}};function ne(e){let{activeKey:t="0",disabled:i=!1,children:n,fill:o=U.intrinsic,activateOnFocus:a=!0,onChange:d,overrides:l={},uid:s=null,width:c,height:u}=e;const h=(0,K.D)(),g=s||h,{Root:p,Active:m}=l,[f,b]=(0,N.jb)(p,E),[v,y]=(0,N.jb)(m,V),[x,w]=(0,N.jb)(l.SegmentList,F),[Z,$]=r.useState(0);r.useEffect((()=>{$(Z+1)}),[t]);const k=r.useRef(),[S,C]=r.useState({length:0,distance:0}),z=r.useCallback((()=>{k.current&&C(ie(k.current))}),[k.current]);r.useEffect(z,[k.current]),r.useEffect((()=>{k.current&&k.current.parentNode.scrollWidth>k.current.parentNode.clientWidth&&(Z>1?k.current.scrollIntoView({behavior:"smooth",block:"nearest",inline:"nearest"}):(e=>{const{x:t,y:i,width:n,height:r}=e.parentNode.getBoundingClientRect(),{x:o,y:a,width:d,height:l}=e.getBoundingClientRect(),s=o-t+d/2,c=a-i+l/2,{scrollLeft:u,scrollTop:h}=e.parentNode,g={x:u+s-n/2,y:h+c-r/2};e.parentNode.scroll(g.x,g.y)})(k.current))}),[k.current]);const B={$fill:o},[,R]=(0,W.hQ)(),_=r.useCallback((e=>{if((e=>"rtl"===e)(R.direction))switch(e.keyCode){case 39:return te;case 37:return ee;default:return null}else switch(e.keyCode){case 37:return te;case 39:return ee;default:return null}}),[R.direction]);return(0,D.tZ)(f,{...B,...b,$width:c,$height:u,children:(0,D.BX)(x,{"data-baseweb":"segmented-list",role:"listbox","aria-label":"segmented control",...w,children:[r.Children.map(n,((e,n)=>{if(e)return(0,D.tZ)(re,{childKey:e.key,childIndex:n,activeKey:t,activeSegmentRef:k,updateHighlight:z,parseKeyDown:_,activateOnFocus:a,uid:g,disabled:i,sharedStylingProps:B,onChange:d,setKeyUpdated:$,...e.props})})),(0,D.tZ)(v,{"data-baseweb":"segment-highlight",$length:S.length,$distance:S.distance,$animate:Z>1,"aria-hidden":"true",role:"presentation",...B,...y})]})})}function re(e){let{childKey:t,childIndex:i,activeKey:n,activeSegmentRef:o,updateHighlight:a,parseKeyDown:d,activateOnFocus:l,uid:s,disabled:c,sharedStylingProps:u,onChange:h,setKeyUpdated:g,...p}=e;const m=t||String(i),f=m==n,{artwork:b,overrides:v={},segmentRef:y,onClick:x,label:w,description:Z,badge:$,badgeHint:k,...S}=p,C=r.useRef();r.useImperativeHandle(y,(()=>f?o.current:C.current));const z=r.useRef({length:0,distance:0});r.useEffect((()=>{z.current=ie(f?o.current:C.current)})),r.useEffect((()=>{if(window.ResizeObserver){const e=new window.ResizeObserver((e=>{if(e[0]&&e[0].target){const t=ie(e[0].target);t.length===z.current.length&&t.distance===z.current.distance||(g(1),a())}}));return e.observe(f?o.current:C.current),()=>{e.disconnect()}}}),[n]),r.useEffect(a,[w]);const{Segment:B,ArtworkContainer:R,LabelBlock:_,Label:I,Description:M,Badge:L,BadgeHint:P}=v,[O,T]=(0,N.jb)(B,X),[K,W]=(0,N.jb)(_,Y),[U,E]=(0,N.jb)(R,j),[F,V]=(0,N.jb)(I,G),[ne,re]=(0,N.jb)(M,Q),[oe,ae]=(0,N.jb)(L,q),[de,le]=(0,N.jb)(P,J),[se,ce]=r.useState(!1),ue=r.useCallback((e=>{(0,H.E)(e)&&ce(!0)}),[]),he=r.useCallback((e=>{!1!==se&&ce(!1)}),[se]),ge=r.useCallback((e=>{const t=[...e.target.parentNode.childNodes].filter((e=>!e.disabled&&"option"===e.getAttribute("role")));if(1===t.length)return;const i=t.indexOf(e.target),n=d(e);if(n){let e;n===te?e=t[i-1]?t[i-1]:t[t.length-1]:n===ee&&(e=t[i+1]?t[i+1]:t[0]),e&&(e.focus(),l&&e.click())}}));return(0,D.BX)(O,{"data-baseweb":"segment",id:A(s,m),role:"option",onKeyDown:ge,"aria-selected":f,tabIndex:f?"0":"-1",ref:f?o:C,disabled:!f&&c,type:"button",$focusVisible:se,$isActive:f,$hasArtwork:!!b,$hasLabel:!!w,...u,...S,...T,onClick:e=>{"function"==typeof h&&h({activeKey:m}),"function"==typeof x&&x(e)},onFocus:(0,H.Ah)({...S,...T},ue),onBlur:(0,H.Z5)({...S,...T},he),children:[(0,D.BX)(K,{...W,children:[!!b&&(0,D.tZ)(U,{"data-baseweb":"artwork-container",...u,...E,children:(0,D.tZ)(b,{size:20,color:"contentPrimary"})}),!!w&&(0,D.tZ)(F,{...V,children:w||m}),!!$&&(0,D.tZ)(oe,{...ae,children:$}),k&&(0,D.tZ)(de,{...le})]}),Z?(0,D.tZ)(ne,{...M,...re,children:Z}):null]},m)}function oe(e){return null}var ae=i(22849),de=i(87444),le=i(46329),se=i(1257),ce=i(50818),ue=i(47986),he=i(70471),ge=i(70971);const pe=e=>{const t=(0,r.useRef)(!1),i=(0,v.TH)(),o=(0,$.ZP)(),{modalName:a}=(0,ue.RAN)(i,["modalName"]),{diningModes:d,handleDiningModeClick:l}=(0,le.ZP)(null),s=(0,se.Z)(d),c=e.supportedDiningModes?e.supportedDiningModes:s;(0,le.OT)({diningModes:s});const{diningMode:u}=(0,S.Z)(),h=(0,de.Z)("apple_maps_checkout_dining_mode_listener"),g=(0,he.Z)(),p=(0,ge.T)(),m=c&&c.length<2||!e.supportedDiningModes&&!s||p;(0,r.useEffect)((()=>{m||!c||t.current||(t.current=!0,o("eats:dining_mode_selector",{diningModes:(0,ce.rG)(c),diningMode:u}))}),[o,c,u,m]),(0,r.useEffect)((()=>{if(!h||!g)return;Boolean(a)||"DELIVERY"===u&&(l("PICKUP"),o("eats:apple_maps_checkout_dining_mode_reset_activated"))}),[a,g,u,l,h,o]);const f=n.useCallback((e=>{e&&(o("eats:dining_mode_click",{diningMode:e}),l(e))}),[o,l]);return m?null:(0,D.tZ)(ne,{activeKey:u,onChange:e=>{let{activeKey:t}=e;return f(ae.k5[t])},disabled:e.disabled,overrides:{Root:{style:e=>{let{$theme:t}=e;return{borderRadius:t.borders.pillButtonBorderRadius,height:`${B.Kv.componentHeight}px`}}},SegmentList:{style:{minHeight:"unset",overflow:"visible",backgroundColor:"transparent"}},Active:{style:e=>{let{$theme:t}=e;return{borderRadius:t.borders.pillButtonBorderRadius,boxShadow:t.lighting.shadow400,border:"none"}}}},children:(c||[]).map((e=>(0,D.tZ)(oe,{label:e.title,overrides:{Segment:{style:e=>{let{$theme:t}=e;return{borderRadius:t.borders.pillButtonBorderRadius}}}}},e.mode)))})};var me=i(98414),fe=i(23401),be=i(57955),ve=i(639),ye=i(83960),xe=i(8961),we=i(91631),Ze=i(29721),$e=i(48700),ke=i(97415),Se=i(76150),Ce=i("__fusion__1609"),ze=i(60743),Be=i(21661),Re=i(94579),_e=i(8690),De=i(67206),Ie=i(29194),Me=i(63346),Le=i(86255),Pe=i(32518),Oe=i(70247),Te=i(7052),Ke=i(38777),We=i(86695);const Ne=Math.round(555.5),He=(0,o.zo)("div",(e=>{let{$theme:t}=e;return{display:"flex",maxWidth:`${B.Kv.componentHitArea}px`,position:"relative"}})),Ue=(0,o.zo)("div",(e=>{let{$theme:t,$isLoading:i}=e;return{...i?{...(0,De.Z)({$theme:t}),backgroundSize:"100vw 100%"}:{},display:"flex",flexDirection:"row",alignItems:"stretch",cursor:"pointer",borderRadius:t.borders.pillButtonBorderRadius,margin:0,whiteSpace:"nowrap",...t.typography.LabelMedium}})),Ae=(0,o.zo)("div",{display:"flex",flexDirection:"row",alignItems:"center",height:`${B.Kv.componentHeight}px`,width:`${B.Kv.componentHeight}px`}),Ee=(0,o.zo)("div",(e=>{let{$theme:t,$direction:i}=e;return{width:"18px",height:"36px",background:`radial-gradient(circle at ${"ltr"===i?"100%":"0%"}, transparent 18px, ${t.colors.backgroundPrimary} 18px)`}})),Fe=(0,o.zo)("div",(e=>{let{$theme:t,$direction:i}=e;return{width:"18px",height:"36px",background:`radial-gradient(circle at ${"ltr"===i?"0%":"100%"}, transparent 18px, ${t.colors.backgroundPrimary} 18px)`}})),Xe=(0,o.zo)("div",(e=>{let{$theme:t}=e;return{background:t.colors.menuFill,color:t.colors.contentPrimary,boxShadow:"0px 4px 16px rgba(0, 0, 0, 0.12)",marginTop:t.sizing.scale300,top:t.sizing.scale1000,right:"0",position:"absolute",width:"420px",borderRadius:t.sizing.scale300,maxHeight:`${Ne}px`,overflow:"auto",zIndex:Re.I_.modal}})),je=()=>{const[e,t]=(0,o.hQ)(),{toggleSidebarCartVisible:i,headerCartDropdownVisible:r,setHeaderCartDropdownVisible:a}=(0,Se.Lb)(),{totalOrders:d,cartViews:l,currentStoreDraftOrderUUID:s,draftOrders:c,draftOrderUUIDs:u,setActiveDraftOrder:h}=(0,ze.Z)(),{isDelegatedBooking:g}=(0,Ke.W)(),{isBundledOrder:p}=(0,Oe.Dz)(),m=(0,$.ZP)(),f=(0,x.T)(),{toggleIsDropdownOpen:b,dropdownRef:y,isDropdownOpen:w,onCartSelect:Z}=(0,Be.Z)({isDropdownOpen:r,setIsDropdownOpen:a}),k=(0,we.UO)(),S=(0,Le.Z)({encodedStoreUuid:k?.encodedStoreUuid}),{isEditOrder:C,currentUserItemCount:z}=(0,ye.Z)(S),B=Boolean(s),R=(0,Ie.gm)(),_=(0,Te.qM)(),{isRepeatOrderCartView:I}=(0,_e.Z)(),M=(0,v.TH)(),{cartOpen:L}=(0,ue.RAN)(M,["cartOpen"]),P=n.useCallback((()=>{if(B||C)h(s||""),i(),m("eats:cart_cta_click",{isMulticart:"true",...p?{storePreCheckoutBundling:{sourceType:"BUNDLED_STORE"}}:null});else{if(0===d||g)i();else if(1!==d||I(l[0])||(0,Pe.ed)(l[0]))b();else{const e=l[0]?.metadata?.openCheckoutMetadata,t=e?.draftOrderUUID??e?.bundleGroupMetadata?.primaryDraftOrderUUID??u[0];h(t),i()}m("eats:cart_cta_click",{isMulticart:"true"})}}),[B,C,h,s,i,m,p,d,g,I,l,u,b]),O=p?_:z;n.useEffect((()=>{m("eats:multicart_cart_pill",{...p?{storePreCheckoutBundling:{sourceType:"BUNDLED_STORE"}}:null})}),[m,p]),n.useEffect((()=>{L&&c.hasLoaded&&("single"===L?i():P())}),[c.hasLoaded]);const T=B||C;return(0,D.tZ)(He,{ref:y,children:(0,D.tZ)(Ue,{$isLoading:!c.hasLoaded,children:c.hasLoaded?(0,D.BX)(D.HY,{children:[(0,D.tZ)(We.zx,{"data-test":"items-button","aria-label":f("multicart.carts"),onClick:P,kind:"tertiary",shape:"circle",overrides:{BaseButton:{style:e=>{let{$theme:t}=e;return{position:"relative",top:t.sizing.scale0}}}},children:(0,D.tZ)(Ze.Z,{color:$e.r$.positive,content:T?O:d,children:(0,D.tZ)(Ce.default,{size:20,"aria-label":T?f(1===O?"shared.numCartItemsSingular":"shared.numCartItems",{numCartItems:O}):f(1===d?"shared.numCartsSingular":"shared.numCarts",{numCarts:d}),title:f(T?"shared.cart":"multicart.carts")})})}),w?(0,D.tZ)(Xe,{children:(0,D.tZ)(Me.Z,{onCartSelect:(e,t)=>{Z(e,t),i()},isMobile:!1})}):null]}):(0,D.BX)(Ae,{children:[(0,D.tZ)(Ee,{$direction:R}),(0,D.tZ)(ke.CB,{$width:t.sizing.scale1200}),(0,D.tZ)(Fe,{$direction:R})]})})})};var Ve=i(49373),Ge=i(60306);const Qe=()=>{const e=(0,xe.Z)(),t=(0,x.T)(),{serverCart:i}=(0,Oe.iQ)(),{toggleSidebarCartVisible:n}=(0,Se.Lb)(),r=i.data?.items||[],o=(0,Ve.dH)(r),{isDraftOrderParticipant:a,isBillSplitOrder:d}=(0,ye.Z)(),l=(0,h.Z)(),s=(0,$.ZP)(),c=(0,Ge.Z)();return e&&(!a||l||c&&d)?(0,D.tZ)(We.zx,{"aria-label":"checkout",onClick:()=>{n(),s("eats:cart_cta_click")},kind:"tertiary",shape:"circle",children:(0,D.tZ)(Ze.Z,{color:$e.r$.positive,content:o,overrides:{Root:{style:e=>{let{$theme:t}=e;return{top:t.sizing.scale0}}}},children:(0,D.tZ)(Ce.default,{size:20,title:t("shared.cart")})})}):null},Ye=()=>{const e=(0,xe.Z)(),t=(0,h.Z)(),{isDraftOrderParticipant:i,isBillSplitOrder:n}=(0,ye.Z)(),r=(0,Ge.Z)();return(e||t)&&(!i||t||r&&n)?t?(0,D.tZ)(je,{}):(0,D.tZ)(Qe,{}):null};var qe=i(60582),Je=i(27769),et=i(12011),tt=i(94072),it=i(75514);const nt=(0,o.zo)("div",{height:`${B.Kv.height}px`});nt.displayName="HeaderV2DesktopWrapper";const rt=(0,o.zo)("div",(e=>{let{$isSticky:t}=e;return{width:"100%",...t?{position:"fixed",top:"0",left:"0",zIndex:Re.I_.cover}:{}}}));rt.displayName="HeaderV2StickyContainer";const ot=e=>{let{isSticky:t,children:i}=e;const n=(0,r.useRef)(null),[o,a]=(0,r.useState)(!1);return(0,r.useEffect)((()=>{if(it.Z&&t){if(it.Z.IntersectionObserver){const e=new it.Z.IntersectionObserver((e=>{let[t]=e;o===t?.isIntersecting&&a(!t?.isIntersecting)}),{root:null,threshold:1,rootMargin:"0px 10000px"});return n.current&&e.observe(n.current),()=>{e.disconnect()}}{const e=()=>{if(!n.current)return;const e=n.current.getBoundingClientRect().top<0;o!==e&&a(e)};return it.Z.addEventListener("scroll",e),e(),()=>{it.Z?.removeEventListener("scroll",e)}}}}),[o,t]),(0,D.tZ)(nt,{ref:n,children:(0,D.tZ)(rt,{$isSticky:o,children:i(o)})})};var at=i(7288),dt=i(51170);const lt={"0%":{opacity:0},"100%":{opacity:1}},st={"0%":{opacity:1},"100%":{opacity:0}},ct=(0,o.zo)("div",(e=>{let{$visibility:t,$animationDuration:i,$entryAnimation:n,$exitAnimation:r}=e;return{display:"flex",flex:1,animationName:t?n:r,animationDuration:`${i}ms`,animationFillMode:"forwards"}}));ct.displayName="AnimatedMountWrapper";const ut=e=>{let{$style:t,children:i,visibility:n=!1,shouldUnmountOnHidden:o=!0,animationDuration:a=parseInt(Re.pB.defaultDuration,10),entryAnimation:d=lt,exitAnimation:l=st}=e;const[s,c]=(0,r.useState)(n);(0,r.useEffect)((()=>{n&&c(!0)}),[n]);const u=(0,r.useCallback)((()=>{!n&&s&&o&&c(!1)}),[n,s,o]);return s?(0,D.tZ)(ct,{$style:t,$visibility:n,$animationDuration:a,$entryAnimation:d,$exitAnimation:l,onAnimationEnd:u,children:i}):null};var ht=i(64388),gt=i(44087),pt=i(6531),mt=i(33136),ft=i(3565);const bt=(0,o.zo)("div",(e=>{let{$theme:t,$hasMinWidth:i}=e;return{maxWidth:`${B.Kv.maxWidth}px`,minWidth:i?`${B.Kv.minWidth}px`:void 0,paddingLeft:`${B.Kv.padding}px`,paddingRight:`${B.Kv.padding}px`,margin:"0 auto",boxSizing:"border-box",height:`${B.Kv.height}px`,color:t.colors.onHeader,position:"relative",display:"flex",flexDirection:"row",alignItems:"center"}}));bt.displayName="HeaderWrapper";const vt=(0,o.zo)("div",(e=>{let{$showDiningMode:t,$showAddress:i,$showSearch:n,$hasDeliveryLocation:r}=e,o=0;return r?(t&&(o+=B.Kv.diningModeMinWidth+B.Kv.componentSpacing),i&&(o+=B.Kv.addressMinWidth+B.Kv.componentSpacing),n&&(o+=B.Kv.searchMinWidth+B.Kv.componentSpacing)):i&&(o=B.Kv.unaddressedMinWidth),{display:"flex",flex:"1 1 auto",alignItems:"center",alignSelf:"flex-start",height:"100%",minWidth:`${o}px`,width:"100%"}})),yt={from:{maxWidth:"100%",opacity:1},to:{maxWidth:"0%",opacity:0}},xt={from:{maxWidth:"0%",opacity:0},to:{maxWidth:"100%",opacity:1}},wt=e=>{const{diningMode:t,diningModeLinks:i,address:y,showCart:x,showLoginSignup:w,search:Z,disableRedirectToHomeFeed:$,isSticky:k,background:C,navigation:z,customNavigation:R,onClickBack:_}=function(e){const t=e.type??"default",i=(0,r.useMemo)((()=>{switch(t){case"default":return{type:t,diningMode:e.diningMode??"hidden",address:e.address??"default",showCart:e.showCart??!0,showLoginSignup:e.showLoginSignup??!0,search:e.search??"default",isSticky:e.isSticky??!0,background:e.background??"default",navigation:e.navigation??"default",disableRedirectToHomeFeed:e.disableRedirectToHomeFeed??!1};case"full":return{type:t,diningMode:e.diningMode??"default",address:e.address??"default",showCart:e.showCart??!0,showLoginSignup:e.showLoginSignup??!0,search:e.search??"default",isSticky:e.isSticky??!0,background:e.background??"default",navigation:e.navigation??"default",disableRedirectToHomeFeed:e.disableRedirectToHomeFeed??!1};case"minimal":return{type:t,diningMode:e.diningMode??"hidden",address:e.address??"hidden",showCart:e.showCart??!1,showLoginSignup:e.showLoginSignup??!1,search:e.search??"hidden",isSticky:e.isSticky??!0,background:e.background??"default",navigation:e.navigation??"default",disableRedirectToHomeFeed:e.disableRedirectToHomeFeed??!1}}}),[e.background,e.diningMode,e.disableRedirectToHomeFeed,e.isSticky,e.navigation,e.address,e.showCart,e.showLoginSignup,e.search,t]);return i.diningModeLinks=e.diningModeLinks,i.onClickBack=e.onClickBack,i.customNavigation=e.customNavigation,i}(e),[I,M]=(0,o.hQ)(),L=n.useRef(null),{pathname:P}=(0,v.TH)(),{user:O}=(0,a.Z)(),K=(0,d.Z)(),W=(0,l.WI)("header-location-typeahead"),{closeAndUpdate:N}=(0,s.Z)(),H=(0,h.Z)(),[U,A]=(0,r.useState)(!1),{feed:E}=(0,p.Z)(),F=(0,de.Z)("drafting_search_repolish_fancy_search_bar"),{isInStoreSearchSuggestionsXpEnabled:X}=(0,tt.Z)(),{encodedStoreUuid:j}=(0,v.UO)(),V=(0,Le.Z)({encodedStoreUuid:j,shouldEvaluate:Boolean(j)}),{store:G}=(0,ht.ZP)(V),Q=Boolean(V),Y=Boolean(G.data?.scheduledOrderInfo?.isSchedulable),{isStoreOfdRedesignPhase2XpEnabled:q}=(0,m.Z)(),J=P.startsWith("/search"),{diningModes:ee}=(0,le.ZP)(null),te=(0,se.Z)(ee),ie=(0,ge.T)(),{state:{isAddressInputVisible:ne,address:re}}=(0,dt.D)(),oe=re??y,{diningMode:ae}=(0,S.Z)(),ce=(0,r.useMemo)((()=>!("hidden"!==t&&!ie)||("link"===t?!i?.value:!K&&"PICKUP"!==ae||(!te||te.length<2))),[t,ie,K,ae,te,i?.value]),ue=K?.address?.address1||"",{campaign:he}=(0,Je.M)(Q||!1),ye=Q&&"instore"===Z&&X?fe.Z:et.Z,xe=(0,gt.Z)(),we=(0,pt.Z)(),Ze=!F&&(k&&U),$e=!!F||!U,ke=!!F||!U,Se=F?x&&K:!U&&x&&K;return(0,D.tZ)(ot,{isSticky:k,children:e=>(0,D.tZ)(b.aV,{$showOverlay:Ze,children:(0,D.tZ)(b.im,{ref:L,$isTransparent:!e&&"transparent"===C,$hasBorderBottom:e,children:(0,D.BX)(bt,{$hasMinWidth:!xe&&!we,children:[(0,D.tZ)("div",{className:I({flex:"0",marginLeft:`-${M.sizing.scale550}`}),children:(0,D.tZ)(at.Z,{navigation:z,customNavigation:R,onClickBack:_})}),(0,D.tZ)("div",{className:I({marginLeft:M.sizing.scale300,marginRight:M.sizing.scale850,justifyContent:"flex-start",flex:"0"}),children:(0,D.tZ)(u.Z,{size:"small"})}),(0,D.BX)(vt,{$showDiningMode:!ce,$showAddress:"hidden"!==oe,$showSearch:"hidden"!==Z,$hasDeliveryLocation:Boolean(K),children:[(0,D.BX)(ut,{visibility:$e,entryAnimation:xt,exitAnimation:yt,$style:{flex:"0 1 auto",overflow:"hidden"},children:[ce?null:(0,D.tZ)("div",{className:I({marginRight:`${B.Kv.componentSpacing}px`}),children:"link"===t?(0,D.tZ)(me.Z,{diningModeToggle:i,size:"mini",hasPillShadow:!0}):(0,D.tZ)(pe,{disabled:E.isLoading})}),K&&"hidden"!==oe&&"unaddressedOnly"!==oe?(0,D.tZ)("div",{className:I({display:"flex",marginRight:`${B.Kv.componentSpacing}px`,flex:"0 1 auto",minWidth:F?"fit-content":`${B.Kv.addressMinWidth}px`}),children:(0,D.tZ)(T,{storeUuid:V,isSchedulable:Y,deliveryLocationPickerDisabled:"disabled"===oe})}):null]}),K?"hidden"!==Z?(0,D.tZ)(ye,{wrapperRef:L,expandedState:U,setExpandedState:A,isSearchFeed:J,storeUuid:V,size:"mini"}):(0,D.tZ)(b.sA,{}):"hidden"!==oe?(0,D.tZ)(ut,{visibility:ne,children:q?(0,D.tZ)(be.Z,{}):(0,D.tZ)(b.qX,{children:(0,D.tZ)(ve.Z,{registerRef:W,onLocationSelected:e=>{N(e,void 0,$)},initialQuery:ue,id:"header",size:"mini",highlightFocus:!1})})}):null]}),Se?(0,D.tZ)("div",{className:I({flex:"0",minWidth:M.sizing.scale700})}):null,(0,D.tZ)("div",{className:I({justifyContent:"flex-end",display:"flex",flexGrow:0,alignItems:"center"}),children:ke?(0,D.BX)(D.HY,{children:[x&&K?(0,D.BX)(D.HY,{children:[(0,D.tZ)(Ye,{}),H?(0,D.tZ)(f.Z,{startShoppingRedirect:!J&&!Q}):(0,D.tZ)(g.Z,{})]}):null,(0,D.tZ)(c.Z,{}),O.data?.isLoggedIn?null:(0,D.tZ)(D.HY,{children:(0,D.tZ)("div",{className:I({display:"flex",marginLeft:`${B.Kv.componentSpacing}px`}),children:w?(0,D.tZ)(qe.m,{campaign:he,hideIcon:!0,signInButtonColor:"transparent"!==C||e?"transparent":"white",signUpButtonColor:"transparent"===C?"black":"default"}):null})})]}):null})]})})})})},Zt=()=>(0,D.tZ)(bt,{$hasMinWidth:!1,$style:{justifyContent:"center"},children:(0,D.tZ)(ft.Z,{background:"header"})}),$t=e=>(0,D.tZ)(mt.Z,{FallbackComponent:Zt,component:"header_v2",children:(0,D.tZ)(wt,{...e})})},98414:(e,t,i)=>{i.d(t,{Z:()=>y});var n=i(36151),r=i(91931),o=i(94579),a=i(53456),d=i(57444),l=i(33990);const s={default:{toggleBackgroundColor:"backgroundPrimary",selectedItemColor:"contentPrimary",itemColor:"contentPrimary",togglePillBackgroundColor:"backgroundSecondary"},contrast:{toggleBackgroundColor:"backgroundInversePrimary",selectedItemColor:"contentInversePrimary",itemColor:"contentPrimary",togglePillBackgroundColor:"backgroundSecondary"},transparent:{toggleBackgroundColor:"backgroundPrimary",selectedItemColor:"contentPrimary",itemColor:"contentPrimary",togglePillBackgroundColor:"backgroundOverlay"}},c={mini:"36px",default:"40px",large:"48px"},u=(0,r.zo)("div",(e=>{let{$width:t}=e;return{display:"flex",position:"relative",width:t||"auto"}})),h=(0,r.zo)("div",(e=>{let{$theme:t,$background:i,$height:n,$isDisabled:r}=e;return{background:t.colors[i],display:"flex",width:"100%",borderRadius:t.borders.pillButtonBorderRadius,padding:"4px",boxSizing:"border-box",whiteSpace:"nowrap",height:n||"40px",...r?{...(0,d.Z)(t)}:{}}})),g=(0,r.zo)("div",(e=>{let{$position:t,$theme:i,$width:n,$background:r}=e;return{position:"absolute",transform:`translateX(${t}px)`,height:"calc(100% - 8px)",width:`${n||0}px`,background:i.colors[r],borderRadius:i.borders.pillButtonBorderRadius,zIndex:o.I_.base,transition:n?o.pB.default:"none"}})),p=(0,r.zo)("div",(e=>{let{$isDisabled:t}=e;return{width:"50%",display:"flex",justifyContent:"center",zIndex:o.I_.surface,...t?{pointerEvents:"none"}:{}}})),m=(0,r.w1)(a.Z,(e=>{let{$theme:t}=e;return{display:"flex",flex:1,overflow:"hidden",textOverflow:"ellipsis",alignItems:"center",...t.typography.LabelSmall,justifyContent:"center",height:"100%",padding:"0 16px",borderRadius:t.borders.pillButtonBorderRadius,transition:o.pB.default}})),f=e=>{let{value:t,onChange:i,items:r=[],variant:o="default",size:a="default",isDisabled:d=!1,hasPillShadow:f=!1}=e;const[b,v]=(0,n.useState)({position:0,width:0}),y=(0,n.useRef)([]),x=(0,n.useMemo)((()=>s[o]||s.default),[o]);(0,n.useEffect)((()=>{let e=0;r.forEach(((i,n)=>{const r=y.current[n]?y.current[n]?.getBoundingClientRect():null;t===i.value&&r&&v({position:e,width:r.width}),e+=r?.width||0}))}),[t,r]);return(0,l.tZ)(u,{children:(0,l.BX)(h,{$background:x.togglePillBackgroundColor,$isDisabled:d,$height:c[a],children:[r.map(((e,n)=>{let{label:r,value:o,props:a}=e;const s=t===o,c=(e=>d?"contentStateDisabled":e?x.selectedItemColor:x.itemColor)(s);return(0,l.tZ)(p,{ref:e=>{y.current[n]=e},$isDisabled:d,children:(0,l.tZ)(m,{type:"radio",color:c,label:r,value:o,checked:s,hideBackground:!0,hasShadow:f&&s,onChange:()=>{d||i(o)},$as:a?.$as,to:a?.to})},o)})),(0,l.tZ)(g,{$isDisabled:d,$background:x.toggleBackgroundColor,$position:b.position,$width:b.width})]})})};var b=i(78490);const v=()=>{},y=e=>{let{diningModeToggle:t,size:i,hasPillShadow:r}=e;const o=Boolean(t),a=(0,b.Z)(t).map((e=>({...e,value:e.value}))),d=(0,n.useMemo)((()=>a.map((e=>({...e,value:e.value})))),[a]),s=t?.value;return o&&s?(0,l.tZ)(f,{size:i,items:d,value:s,onChange:v,hasPillShadow:r}):null}}}]);