"use strict";(self.webpackChunkFusion=self.webpackChunkFusion||[]).push([[31719,18181],{__fusion__1088:(e,t,r)=>{r.r(t),r.d(t,{default:()=>o});var i=r(36151),n=r(33990);const o=i.forwardRef((function(e,t){let{title:r="Delivery bag two",titleId:i,size:o="1em",...a}=e;return(0,n.BX)("svg",{width:o,height:o,viewBox:"0 0 24 24",fill:"none",ref:t,"aria-labelledby":i,...a,children:[void 0===r?(0,n.tZ)("title",{id:i,children:"Delivery bag two"}):r?(0,n.tZ)("title",{id:i,children:r}):null,(0,n.BX)("g",{fill:"currentColor",children:[(0,n.tZ)("path",{d:"M21 7V2h-6v3h3v11c0 1.54-.59 2.94-1.54 4H20c2.21 0 4-1.79 4-4V7h-3Z"}),(0,n.tZ)("path",{d:"M13 2H3v5H0v9c0 2.21 1.79 4 4 4h8c2.21 0 4-1.79 4-4V7h-3V2ZM6 7V5h4v2H6Z"})]})]})}))},11841:(e,t,r)=>{r.d(t,{Z:()=>p});var i=r(36151),n=r(92300),o=r(99864),a=r(28333),s=r(84036),l=r(16782),d=r(33990);class c extends i.Component{static defaultProps={autoComplete:"on",autoFocus:!1,disabled:!1,name:"",onBlur:()=>{},onFocus:()=>{},overrides:{},required:!1,size:l.NO.default,startEnhancer:null,endEnhancer:null,clearable:!1,type:"text",readOnly:!1};state={isFocused:this.props.autoFocus||!1};onFocus=e=>{this.setState({isFocused:!0}),this.props.onFocus(e)};onBlur=e=>{this.setState({isFocused:!1}),this.props.onBlur(e)};render(){const{startEnhancer:e,endEnhancer:t,overrides:{Root:r,StartEnhancer:i,EndEnhancer:c,...p},...g}=this.props,[m,Z]=(0,n.jb)(r,s.fC),[f,y]=(0,n.jb)(i,s.Fp),[v,x]=(0,n.jb)(c,s.Fp),b=(0,o.t)(this.props,this.state);return(0,d.BX)(m,{"data-baseweb":"input",...b,...Z,$adjoined:u(e,t),$hasIconTrailing:this.props.clearable||"password"==this.props.type,children:[h(e)&&(0,d.tZ)(f,{...b,...y,$position:l.Xf.start,children:"function"==typeof e?e(b):e}),(0,d.tZ)(a.Z,{...g,overrides:p,adjoined:u(e,t),onFocus:this.onFocus,onBlur:this.onBlur}),h(t)&&(0,d.tZ)(v,{...b,...x,$position:l.Xf.end,children:"function"==typeof t?t(b):t})]})}}function u(e,t){return h(e)&&h(t)?l.y4.both:h(e)?l.y4.left:h(t)?l.y4.right:l.y4.none}function h(e){return Boolean(e||0===e)}const p=c},95197:(e,t,r)=>{r.d(t,{Z:()=>y});var i=r(7646),n=r(36278),o=r(52246),a=r(79908),s=r(91931),l=r(33535),d=r(69630),c=r(10825),u=r(83960),h=r(64388),p=r(40836),g=r(72275),m=r(33990);const Z=(0,s.w1)(i.Bi,{padding:"0px 12px 0 8px"}),f=(0,s.zo)("div",(e=>{let{$theme:t}=e;return t.typography.LabelSmall})),y=e=>{const t=(0,d.Z)(),r=(0,l.ZP)(),i=(0,c.Z)(),{deliveryAddress:s,deliveryTime:y,diningMode:v,storeUuid:x}=(0,u.Z)(),{getStore:b}=(0,h.ZP)(x,{deliveryAddress:s,deliveryTime:y,diningMode:v}),{restaurantLink:C}=(0,g.Z)({storeUuid:x});return C?(0,m.BX)(Z,{"data-testid":"add-items-mini-button",$as:o.rU,to:C,onClick:()=>{t&&(i(),b()),r("eats:click_store_link",{source:e.source,...t?{activePreferenceType:"draft_order"}:{}}),e.onClick&&e.onClick()},children:[(0,m.tZ)(a.Z,{type:"PlusSmall"}),(0,m.tZ)(n.Q3,{}),(0,m.tZ)(f,{children:(0,m.tZ)(p.v,{id:"shared.addItems"})})]}):null}},92839:(e,t,r)=>{r.d(t,{Z:()=>ve});var i=r(83960),n=r(8961),o=r(43193),a=r(36151),s=r(40836),l=r(88885),d=r(8051),c=r(91631),u=r(62149),h=r(36278),p=r(97415),g=r(91931),m=r(76150),Z=r(31854),f=r(56348),y=r(34567),v=r(60743),x=r(33535),b=r(21661),C=r(94579),S=r(8690),$=r(67206),_=r(29194),w=r(63346),z=r(86255),k=r(32518),I=r(32562),O=r(70247),B=r(7052),T=r(38777),P=r(47986),L=r(34626),D=r(49373),R=r(79168),E=r(33990);const M=Math.round(555.5),U=(0,d.pZ)(r(44412)),H=(0,g.zo)("div",(e=>({display:"flex",transition:"max-width 400ms ease, opacity 400ms ease 100ms",maxWidth:e.$isVisible?"300px":0,opacity:e.$isVisible?1:0,position:"relative"}))),A=(0,g.zo)("div",(e=>{let{$theme:t,$isOverlapping:r,$isLoading:i}=e;return{...i?{...(0,$.Z)({$theme:t}),backgroundSize:"100vw 100%"}:{backgroundColor:t.colors.buttonPrimaryFill},display:"flex",flexDirection:"row",alignItems:"stretch",cursor:"pointer",height:"48px",borderRadius:t.borders.pillButtonBorderRadius,overflow:"hidden",boxShadow:r?t.shadows.filterCard:"none",margin:r?"24px 16px":0,...t.typography.LabelMedium,whiteSpace:"nowrap"}})),X={display:"flex",flexDirection:"row",alignItems:"center"},F=(0,g.zo)("div",X),V=(0,g.zo)("div",(e=>{let{$theme:t,$direction:r}=e;return{width:"24px",height:"48px",background:`radial-gradient(circle at ${"ltr"===r?"100%":"0%"}, transparent 24px, ${t.colors.backgroundPrimary} 24px)`}})),Q=(0,g.zo)("div",(e=>{let{$theme:t,$direction:r}=e;return{width:"24px",height:"48px",background:`radial-gradient(circle at ${"ltr"===r?"0%":"100%"}, transparent 24px, ${t.colors.backgroundPrimary} 24px)`}})),N=(0,g.zo)("button",(e=>{let{$theme:t,$isDualButtons:r}=e;return{...X,padding:r?"14px 16px 14px 12px":"8px 16px",...(0,y.x)({$theme:t})}})),W=(0,g.zo)("button",(e=>{let{$theme:t,$isDualButtons:r,$isLoggedIn:i}=e;return{...X,padding:i?r?"14px 12px 14px 8px":"8px 16px 8px 8px":"8px 12px",...(0,y.x)({$theme:t})}})),G=(0,g.zo)("div",(e=>{let{$theme:t}=e;return{height:"32px",width:"32px",flexShrink:0,borderRadius:t.borders.radiusFull,overflow:"hidden",position:"relative"}})),Y=(0,g.zo)("img",{height:"32px",width:"32px",objectFit:"cover",flexShrink:0}),q=(0,g.zo)("div",(e=>{let{$theme:t}=e;return{width:"1.5px",margin:"12px 0",background:t.colors.contentSecondary}})),j=(0,g.zo)("div",(e=>{let{$theme:t,$isOverlapping:r}=e;return{background:t.colors.menuFill,color:t.colors.contentPrimary,boxShadow:"0px 4px 16px rgba(0, 0, 0, 0.12)",marginTop:"8px",top:r?"64px":t.sizing.scale1000,right:"0",position:"absolute",width:"420px",borderRadius:"16px",maxHeight:`${M}px`,overflow:"auto",zIndex:C.I_.modal}})),K=(0,g.zo)("div",(e=>{let{$theme:t,$isHovering:r}=e;return{borderRadius:"50%",width:t.sizing.scale950,height:t.sizing.scale950,position:"absolute",left:`-${t.sizing.scale0}`,...r?{backgroundColor:t.colors.buttonPrimaryHover}:{backgroundColor:t.colors.buttonPrimaryFill}}})),J=(0,g.zo)("div",(e=>{let{$theme:t}=e;return{display:"flex",position:"relative",width:t.sizing.scale1400}})),ee=(0,g.zo)("div",(e=>{let{$theme:t}=e;return{position:"absolute",left:t.sizing.scale750}})),te=(0,g.zo)("div",{position:"relative",display:"flex",alignItems:"center",justifyContent:"center"}),re=(0,g.zo)("div",(e=>{let{$theme:t}=e;return{...t.typography.LabelSmall,position:"absolute",width:t.sizing.scale950,height:t.sizing.scale950,display:"flex",justifyContent:"center",alignItems:"center",borderRadius:"50%",backgroundColor:"rgba(0, 0, 0, 0.5)"}})),ie=(0,g.zo)("div",(e=>{let{$theme:t}=e;return{marginLeft:t.sizing.scale300,whiteSpace:"nowrap"}})),ne=e=>e.storeImage?.length>1?(0,E.BX)(J,{children:[(0,E.tZ)("div",{children:(0,E.tZ)(G,{children:(0,E.tZ)(Y,{src:e.storeImage[0],alt:"store"})})}),(0,E.tZ)(ee,{children:(0,E.BX)(te,{children:[(0,E.tZ)(K,{$isHovering:e.isHovering}),(0,E.tZ)(G,{children:(0,E.tZ)(Y,{src:e.storeImage[1],alt:"store"})}),e.storeImage.length>2?(0,E.BX)(re,{children:["+",e.storeImage.length-1]}):null]})})]}):(0,E.tZ)(G,{children:(0,E.tZ)(Y,{src:e.storeImage[0],alt:"store"})}),oe=e=>1===e.totalOrders?(0,E.tZ)(s.v,{id:"shared.numCartsSingular",data:{numCarts:e.totalOrders}}):(0,E.tZ)(s.v,{id:"shared.numCarts",data:{numCarts:e.totalOrders}}),ae=e=>1===e.numCartItems?(0,E.tZ)(s.v,{id:"shared.numCartItemsSingular",data:{numCartItems:e.numCartItems}}):(0,E.tZ)(s.v,{id:"shared.numCartItems",data:{numCartItems:e.numCartItems}}),se=()=>{const{serverCart:e}=(0,O.iQ)(),t=e.data?.items||[],r=(0,D.dH)(t);return(0,E.BX)(E.HY,{children:[(0,E.tZ)(Z.Z,{size:16}),(0,E.BX)(ie,{children:[(0,E.tZ)(s.v,{id:"shared.cart"})," • ",r]})]})},le=e=>{let{isOverlapping:t,floatingMenuOpen:r,handleFloatingMenuOpen:n,size:s}=e;const{toggleSidebarCartVisible:d,headerCartDropdownVisible:g,setHeaderCartDropdownVisible:y}=(0,m.Lb)(),{totalOrders:C,cartViews:$,activeDraftOrderUUID:D,currentStoreDraftOrderUUID:M,draftOrders:X,draftOrderUUIDs:G,setActiveDraftOrder:Y,cartsViewIsLoading:K}=(0,v.Z)(),{isDelegatedBooking:J}=(0,T.W)(),{bundleGroupUUID:ee,isBundledOrder:te}=(0,O.Dz)(),re=(0,x.ZP)(),ie=(0,l.T)(),{toggleIsDropdownOpen:le,dropdownRef:de,isDropdownOpen:ce,onCartSelect:ue}=(0,b.Z)({isDropdownOpen:r??g,setIsDropdownOpen:n??y}),he=(0,c.UO)(),pe=(0,z.Z)({encodedStoreUuid:he?.encodedStoreUuid}),{isEditOrder:ge,currentUserItemCount:me,isRepeatGroupOrder:Ze}=(0,i.Z)(pe),fe=Boolean(M),ye=(0,_.gm)(),ve=(0,B.qM)(),{user:xe}=(0,L.Z)(),{isRepeatOrderCartView:be}=(0,S.Z)(),Ce=(0,u.TH)(),{cartOpen:Se}=(0,P.RAN)(Ce,["cartOpen"]),$e=o.useCallback((()=>{if(0===C||J)d();else if(1!==C||be($[0])||(0,k.ed)($[0]))le();else{const e=$[0]?.metadata?.openCheckoutMetadata,t=e?.draftOrderUUID??e?.bundleGroupMetadata?.primaryDraftOrderUUID??G[0];Y(t),d()}re("eats:cart_cta_click",{isMulticart:"true"})}),[C,J,be,$,re,d,G,Y,le]),_e=ee||M||D,we=(0,a.useMemo)((()=>$.find((e=>e.draftOrderUUID===_e||e.metadata?.openCheckoutMetadata?.bundleGroupMetadata?.bundleGroupUUID===_e))),[$,_e]),ze=o.useRef(null),ke=(0,I.Z)(ze),Ie=(()=>{const e=[U,U],t=[U];return K&&te?e:K&&!te?t:we?.storeImageUrls&&we?.storeImageUrls?.length>0?we.storeImageUrls:te&&!K?e:t})(),Oe=C>1||fe&&Ze,Be=Boolean(fe&&Oe),Te=te?ve:me;o.useEffect((()=>{re("eats:multicart_cart_pill",{...te?{storePreCheckoutBundling:{sourceType:"BUNDLED_STORE"}}:null})}),[re,te]),o.useEffect((()=>{Se&&X.hasLoaded&&("single"===Se?d():$e())}),[X.hasLoaded]);const Pe=(0,R.Z)(s);return(0,E.BX)(H,{ref:de,$isVisible:!0,children:[(0,E.tZ)(h.ZP,{$width:"24px"}),(0,E.tZ)(A,{$isOverlapping:t,$isLoading:!X.hasLoaded,$style:Pe,children:X.hasLoaded?(0,E.BX)(E.HY,{children:[fe||ge?(0,E.tZ)(W,{ref:ze,"data-test":"items-button",$isDualButtons:Be,$isLoggedIn:Boolean(xe.data?.isLoggedIn),type:"button",onClick:()=>{Y(M||""),d(),re("eats:cart_cta_click",{isMulticart:"true",...te?{storePreCheckoutBundling:{sourceType:"BUNDLED_STORE"}}:null})},children:xe.data?.isLoggedIn?(0,E.BX)(E.HY,{children:[(0,E.tZ)(ne,{storeImage:Ie,isHovering:ke}),(0,E.tZ)(h.ZP,{$width:"8px"}),(0,E.tZ)(ae,{numCartItems:Te})]}):(0,E.tZ)(se,{})}):null,fe&&!Oe||ge?null:(0,E.BX)(E.HY,{children:[Be?(0,E.tZ)(q,{}):null,(0,E.tZ)(N,{"data-test":"cart-btn",$isDualButtons:Be,"aria-label":ie("multicart.carts"),type:"button",onClick:$e,children:xe.data?.isLoggedIn?(0,E.BX)(E.HY,{children:[(0,E.tZ)(Z.Z,{size:20}),(0,E.tZ)(h.ZP,{$width:"8px"}),fe?null:(0,E.tZ)(oe,{totalOrders:C}),Oe?(0,E.BX)(E.HY,{children:[fe?null:(0,E.tZ)(h.ZP,{$width:"8px"}),(0,E.tZ)(f.Z,{size:12})]}):null]}):(0,E.tZ)(se,{})}),ce?(0,E.tZ)(j,{$isOverlapping:t,children:(0,E.tZ)(w.Z,{onCartSelect:(e,t)=>{ue(e,t),d()},isMobile:!1})}):null]})]}):(0,E.BX)(F,{children:[(0,E.tZ)(V,{$direction:ye}),(0,E.tZ)(p.CB,{$width:"80px"}),(0,E.tZ)(Q,{$direction:ye})]})})]})};var de=r(57444),ce=r(58814);const ue=e=>{let{$theme:t,disabled:r}=e;return{color:t.colors.onlineOrderingSecondaryInverseText,background:t.colors.onlineOrderingSecondaryInverse,...r?(0,de.Z)(t):{":hover":{background:t.colors.onlineOrderingSecondaryInverseHover},":active":{background:t.colors.onlineOrderingSecondaryInverseActive},...(0,ce.Z)(t)}}};var he=r(69630),pe=r(28222),ge=r(60306);const me=(0,g.zo)("div",(e=>({display:"flex",transition:"max-width 400ms ease, opacity 400ms ease 100ms",maxWidth:e.$isVisible?"300px":0,opacity:e.$isVisible?1:0,overflow:"hidden",position:"relative"}))),Ze=(0,g.zo)("button",(e=>{let{$theme:t,$isOverlapping:r,$isOnlineOrdering:i}=e;return{display:"flex",flexDirection:"row",alignItems:"center",cursor:"pointer",padding:"8px 12px",height:C.GC,borderRadius:t.borders.pillButtonBorderRadius,boxShadow:r?t.shadows.filterCard:"none",margin:r?"24px 16px":0,...i?ue({$theme:t}):(0,y.x)({$theme:t}),...t.typography.LabelSmall}})),fe=(0,g.zo)("div",(e=>{let{$theme:t}=e;return{marginLeft:t.sizing.scale300,whiteSpace:"nowrap"}})),ye=e=>{let{isOverlapping:t}=e;const r=(0,n.Z)(),{serverCart:o}=(0,O.iQ)(),{toggleSidebarCartVisible:a}=(0,m.Lb)(),l=o.data?.items||[],d=(0,D.dH)(l),{isDraftOrderParticipant:c,isBillSplitOrder:u}=(0,i.Z)(),p=(0,he.Z)(),g=(0,x.ZP)(),f=(0,ge.Z)(),y=(0,pe.Z)();return r&&(!c||p||f&&u)?(0,E.BX)(me,{$isVisible:!0,children:[(0,E.tZ)(h.ZP,{$width:"24px"}),(0,E.BX)(Ze,{"data-test":"cart-btn",$isOverlapping:t,type:"button","aria-label":"checkout",onClick:()=>{a(),g("eats:cart_cta_click")},$isOnlineOrdering:y,children:[(0,E.tZ)(Z.Z,{size:16}),(0,E.BX)(fe,{children:[(0,E.tZ)(s.v,{id:"shared.cart"})," • ",d]})]})]}):null},ve=e=>{let{isOverlapping:t=!1,floatingMenuOpen:r,handleFloatingMenuOpen:o,size:a}=e;const s=(0,n.Z)(),l=(0,he.Z)(),{isDraftOrderParticipant:d,isBillSplitOrder:c}=(0,i.Z)(),u=(0,ge.Z)();return(s||l)&&(!d||l||u&&c)?l?(0,E.tZ)(le,{isOverlapping:t,floatingMenuOpen:r,handleFloatingMenuOpen:o,size:a}):(0,E.tZ)(ye,{isOverlapping:t}):null}},54403:(e,t,r)=>{r.d(t,{Z:()=>oe});var i=r(75514),n=r(36151),o=r(52246),a=r(91631),s=r(72843),l=r(40836),d=r(91931),c=r(76150),u=r(83960),h=r(81984),p=r(78561),g=r(33841),m=r(52298),Z=r(72275),f=r(94579),y=r(94229),v=r(6966),x=r(74419),b=r(47986),C=r(95197),S=r(12477),$=r(64388),_=r(70247),w=r(36278),z=r(19496),k=r(55811),I=r(33535),O=r(25750),B=r(31854),T=r(33990);const P=(0,d.zo)("div",(e=>{let{$theme:t}=e;return{padding:t.sizing.scale1600,display:"flex",alignItems:"center",justifyContent:"center",flexDirection:"column"}})),L=(0,d.zo)("div",(e=>{let{$theme:t}=e;return{...t.typography.ParagraphMedium,marginTop:"16px",textAlign:"center"}})),D=()=>(0,T.BX)(P,{children:[(0,T.tZ)(B.Z,{size:44,color:"contentInverseTertiary"}),(0,T.tZ)(L,{children:(0,T.tZ)(l.v,{id:"shared.emptycartmessage"})})]});var R=r(79876),E=r(74365),M=r(26587),U=r(37573),H=r(35972),A=r(90961),X=r(86255),F=r(82133),V=r(60306),Q=r(62149),N=r(72147),W=r(13631),G=r(87444),Y=r(38777),q=r(80341);const j=(0,d.zo)("div",(e=>{let{$theme:t,$isClosing:r}=e;return{position:"fixed",top:"62px",right:"82px",width:"432px",zIndex:f.I_.modal,background:t.colors.backgroundPrimary,boxShadow:t.shadows.box,transition:"opacity 500ms",opacity:r?0:1,color:t.colors.contentPrimary}})),K=(0,d.zo)("div",{maxHeight:"calc(100vh - 150px)",overflowY:"scroll"}),J=(0,d.zo)("div",{padding:"0 24px"}),ee=(0,d.zo)("div",{paddingTop:"16px",display:"flex"}),te=(0,d.zo)("div",(e=>e.$theme.typography.DisplayXSmall)),re=(0,d.zo)(o.rU,(e=>({...e.$theme.typography.ParagraphSmall,color:e.$theme.colors.contentSecondary}))),ie=(0,d.zo)("div",{display:"flex",alignItems:"center"}),ne=(0,d.zo)("div",(e=>{let{$theme:t}=e;return{...t.typography.ParagraphMedium,display:"inline"}})),oe=()=>{const e=(0,Q.TH)(),t=s.parse(e.search)[b.FSm.cartDisplay],[r,o]=(0,n.useState)(!1),{cartRef:d,sidebarCartVisible:f,sidebarCartClosing:B,openSidebarCart:P,closeSidebarCart:L,hideSidebarCart:oe}=(0,c.Lb)({transitionMS:500}),{isDraftOrderCreator:ae,isDraftOrderParticipant:se,hasGroupOrder:le,isDraftOrderCartLocked:de,isBillSplitOrder:ce,orderDisplayName:ue}=(0,u.Z)(),{title:he,storeTitle:pe,restaurantLink:ge,restaurantLinkNode:me}=(0,Z.Z)(),{elementRef:Ze,isStuck:fe}=(0,v.Z)(),ye=(0,n.useRef)(null),{serverCart:ve}=(0,_.iQ)(),xe=ve.data?.storeUuid,{store:be}=(0,$.ZP)(xe),Ce=(0,k.Z)(),Se=(0,Q.UO)(),$e=(0,X.Z)({encodedStoreUuid:Se.encodedStoreUuid}),_e=(0,a.k6)(),we=(0,A.Z)(),ze=Boolean(we),ke="postmates"===Ce,Ie=(0,I.ZP)(),{isDelegatedBooking:Oe}=(0,Y.W)(),Be=!ve.data?.items.length,{guestCheckoutEnabled:Te}=(0,U.Z)(),Pe=(0,F.xZ)(),Le=(0,G.Z)("canonical_product_smart_cart");(0,n.useEffect)((()=>{if(t){clearTimeout(ye.current??void 0),P();const e=setTimeout((()=>{o(!0)}),300);return()=>{clearTimeout(e)}}o(!0)}),[t,P]),(0,n.useEffect)((()=>{if("undefined"==typeof i.Z||B)return;const e=()=>{r&&!B&&L()};return i.Z&&i.Z.addEventListener("scroll",e),()=>{i.Z&&i.Z.removeEventListener("scroll",e)}}),[r,L,B]),(0,n.useEffect)((()=>oe),[oe]);const De=(0,V.Z)();(0,n.useEffect)((()=>{f&&Ie("eats:cart_view",{storeUuid:String(be.data?.uuid),cartView:Pe,isDelegatedBooking:String(Oe)})}),[f,Ie,be]);const{currentCartIsSmartCart:Re}=(0,q.R)(),Ee=Re&&Le;return f&&(!se||De&&ce)?(0,T.tZ)(j,{ref:d,$isClosing:B,children:(0,T.BX)(K,{"data-test":"cart",children:[ae&&de?(0,T.tZ)(E.c,{children:(0,T.tZ)(ne,{children:(0,T.tZ)(l.v,{id:"go.unlock_cart_warning_text_2"})})}):null,(0,T.tZ)(x.Z,{hasCloseButton:!0,headerRef:Ze,isStuck:fe,onClose:L,title:le&&ue||pe,...ae?{topRightIconButton:{icon:(0,T.tZ)(R.Z,{color:"black"}),onClick:()=>_e.push((0,b.vN_)(e,"shareGroupOrder"))}}:{}}),Be&&!ae?(0,T.tZ)(D,{}):(0,T.BX)(J,{children:[(0,T.tZ)(m.ZP,{$height:24}),(0,T.tZ)(te,{"data-test":"cart-header",children:ae||Ee?he:pe}),Le?(0,T.tZ)(N.C,{defaultSelectedStoreUuid:xe}):null,ae?(0,T.BX)(T.HY,{children:[(0,T.tZ)(m.ZP,{$height:16}),(0,T.BX)(ie,{children:[(0,T.tZ)(re,{to:ge,onClick:()=>{Ie("eats:click_store_link",{source:"cart"})},children:me}),(0,T.tZ)(z.Z,{})]})]}):null,(0,T.tZ)(ee,{children:(0,T.BX)(O.Z,{separator:w.sA,children:[ae||$e===xe?null:(0,T.tZ)(C.Z,{source:"cart"}),le||be.data?.isGroupOrderingDisabled||ke||Te?null:(0,T.tZ)(S.Z,{store:be})]})}),ze?(0,T.tZ)(H.Q,{$spaceBefore:32}):(0,T.tZ)(m.ZP,{$height:16}),ae||De&&ce?(0,T.BX)(T.HY,{children:[(0,T.tZ)(M.Z,{gutterWidth:24}),(0,T.tZ)(h.Z,{gutterWidth:24,showAddGuestsBtn:!1,showFacePile:!0,showRemoveParticipantButton:!0})]}):(0,T.tZ)(T.HY,{children:(0,T.tZ)(p.Z,{})}),(0,T.BX)(g.Z,{children:[be.data?(0,T.tZ)(W.Z,{store:be.data}):null,(0,T.tZ)(y.Z,{})]})]})]})}):null}},12477:(e,t,r)=>{r.d(t,{Z:()=>C});var i=r(47986),n=r(40836),o=r(52298),a=r(7646),s=r(52246),l=r(36278),d=r(34626),c=r(55186),u=r(79876),h=r(91931),p=r(58984),g=r(83960),m=r(69630),Z=r(7876),f=r(33535),y=r(62149),v=r(33990);const x=(0,h.zo)("div",(e=>{let{$theme:t}=e;return{...t.typography.LabelSmall}})),b=e=>{const t=(0,y.TH)(),r=(0,f.ZP)(),d={...e.authOnClick?{onClick:t=>{r("eats:start_group_order_button"),e.authOnClick&&e.authOnClick(t)}}:{...e.beforeNavigate?{onClick:()=>{r("eats:start_group_order_button"),e.beforeNavigate&&e.beforeNavigate()}}:null,to:e.store.data?(0,i.Ljk)(t,(0,i.Btk)(e.store.data)):""},...e.href?{href:e.href}:null,...e.href&&e.authOnClick?{$as:"a"}:{$as:s.rU}};return(0,v.BX)(v.HY,{children:[(0,v.tZ)(o.ZP,{$height:24}),(0,v.BX)(a.Bi,{...d,children:[(0,v.tZ)(u.Z,{size:16}),(0,v.tZ)(l.sA,{}),(0,v.tZ)(x,{children:(0,v.tZ)(n.v,{id:"components.checkout.group_order"})})]})]})},C=e=>{const{user:t}=(0,d.Z)(),r=(0,y.TH)(),n=(0,p.I0)(),o=(0,m.Z)(),{deliveryAddress:a,deliveryTime:s,storeUuid:l,diningMode:u,isEditOrder:h}=(0,g.Z)();return h?null:!t.data?.isLoggedIn&&e.store.data?(0,v.tZ)(c.Z,{type:"login",redirectTo:(0,i.Ljk)(r,(0,i.Btk)(e.store.data)),children:t=>{let{onClick:r,href:i}=t;return(0,v.tZ)(b,{store:e.store,authOnClick:r,href:i})}}):(0,v.tZ)(b,{store:e.store,...o&&l?{beforeNavigate:()=>{n((0,Z.A0)(l,{...s?{storeScheduledTime:s}:{},...a?{storeDeliveryLocation:a}:{},...u?{storeDiningMode:u}:{}}))}}:{}})}},61799:(e,t,r)=>{r.d(t,{Z:()=>s});var i=r(40836),n=r(15649),o=r(60362),a=r(33990);const s=e=>{const t=(0,n.Z)(),r={date:(0,o.p6)(t,e.date),startTime:(0,o.CJ)(t,e.startTime),endTime:(0,o.CJ)(t,e.endTime)};return"shared.scheduledFor.dateAndTimeRange"===e.translationKey?(0,a.tZ)(i.v,{id:"shared.scheduledFor.dateAndTimeRange",data:r}):"shared.scheduledDeliveryTime.dateAndTimeRange"===e.translationKey?(0,a.tZ)(i.v,{id:"shared.scheduledDeliveryTime.dateAndTimeRange",data:r}):"shared.scheduledPickupTime.dateAndTimeRange"===e.translationKey?(0,a.tZ)(i.v,{id:"shared.scheduledPickupTime.dateAndTimeRange",data:r}):(0,a.tZ)(i.v,{id:"shared.dateAndTimeRange",data:r})}},9071:(e,t,r)=>{r.d(t,{Z:()=>z});var i=r(36151),n=r(91931),o=r(46329),a=r(33535),s=r(50818),l=r(94579),d=r(53456),c=r(1257),u=r(74057),h=r(28222),p=r(57444),g=r(91631),m=r(47986),Z=r(70471),f=r(87444),y=r(62149),v=r(70971),x=r(79168),b=r(33990);const C=(0,n.zo)("div",(e=>{let{$isFullWidth:t}=e;return{display:"flex",position:"relative",width:t?"100%":"auto"}})),S=(0,n.w1)(d.Z,(e=>{let{$theme:t}=e;return{display:"flex",alignItems:"center",justifyContent:"center",width:"100%",...t.typography.LabelSmall,textAlign:"center",height:"100%",padding:"0 16px",borderRadius:t.borders.pillButtonBorderRadius,transition:l.pB.default}})),$=(0,n.zo)("div",(e=>{let{$theme:t,$background:r,$isDisabled:i}=e;return{background:t.colors[r||"backgroundSecondary"],display:"flex",width:"100%",borderRadius:t.borders.pillButtonBorderRadius,padding:"4px",boxSizing:"border-box",whiteSpace:"nowrap",...i?{...(0,p.Z)(t)}:{}}})),_=(0,n.zo)("div",(e=>{let{$isDisabled:t}=e;return{width:"50%",display:"flex",justifyContent:"center",zIndex:l.I_.surface,...t?{pointerEvents:"none"}:{}}})),w=(0,n.zo)("div",(e=>{let{$background:t,$position:r,$theme:i,$width:n,$hasShadow:o}=e;return{position:"absolute",transform:`translateX(${r}px)`,height:"calc(100% - 8px)",width:`${n||0}px`,background:i.colors[t],borderRadius:i.borders.pillButtonBorderRadius,zIndex:l.I_.base,transition:n?l.pB.default:"none",...o?{boxShadow:i.lighting.shadow400}:{}}})),z=e=>{const t=(0,g.k6)(),r=(0,y.TH)(),n=(0,a.ZP)(),l=(0,i.useRef)([]),d=(0,i.useRef)(!1),[p,z]=(0,i.useState)({position:0,width:0}),{diningModes:k,handleDiningModeClick:I}=(0,o.ZP)(null),O=(0,c.Z)(k),{modalName:B}=(0,m.RAN)(r,["modalName"]),{diningMode:T}=(0,u.Z)();(0,o.OT)({diningModes:O});const P=(0,h.Z)(),L=(0,f.Z)("apple_maps_checkout_dining_mode_listener"),D=(0,Z.Z)(),R=(0,v.T)(),E=e.supportedDiningModes?e.supportedDiningModes:O,M=E&&E.length<2||!e.supportedDiningModes&&!O||R;(0,i.useEffect)((()=>{M||!E||d.current||(d.current=!0,n("eats:dining_mode_selector",{diningModes:(0,s.rG)(E),diningMode:T}))}),[n,E,T,M]),(0,i.useEffect)((()=>{if(!L||!D)return;Boolean(B)||"DELIVERY"===T&&(I("PICKUP"),n("eats:apple_maps_checkout_dining_mode_reset_activated"))}),[B,D,T,I,L,n]),(0,i.useEffect)((()=>{if(E){let e=0;E.forEach(((t,r)=>{const i=l.current[r]?.getBoundingClientRect()||null;T===t.mode&&i&&z({position:e,width:i.width}),e+=i?.width||0}))}}),[E,T]);const U=(0,x.Z)(e.size??(e.smallPill?"small":void 0));if(M)return null;let H;return H=e.isDisabled&&e.inverseColors?"contentStateDisabled":P?"primary":e.inverseColors?"backgroundInversePrimary":"backgroundPrimary",(0,b.tZ)(C,{$isFullWidth:Boolean(e.isFullWidth),children:(0,b.BX)($,{$isDisabled:e.isDisabled,$style:U,children:[(E||[]).map(((i,o)=>{const a=T===i.mode;let s;return s=e.isDisabled?e.inverseColors&&a?"disabled":"contentStateDisabled":P&&a?"buttonPrimaryText":P&&!a?"contentPrimary":e.inverseColors&&a?"contentInversePrimary":"contentPrimary",(0,b.tZ)(_,{ref:e=>{l.current[o]=e},$isDisabled:e.isDisabled,children:(0,b.tZ)(S,{type:"radio",color:s,label:i.title,value:i.mode,checked:a,hideBackground:!0,onChange:()=>{e.isDisabled||(n("eats:dining_mode_click",{diningMode:i.mode}),I(i.mode),D&&"DELIVERY"===i.mode&&t.push((0,m.vN_)(r,"locationManager","DELIVERY_LOCATION_MANAGER")))}})},i.mode)})),(0,b.tZ)(w,{$background:H,$position:p.position,$width:p.width,$hasShadow:e.hasPillShadow})]})})}},33841:(e,t,r)=>{r.d(t,{Z:()=>d});var i=r(91931),n=r(24187),o=r(52298),a=r(69630),s=r(33990);const l=(0,i.zo)("div",(e=>{let{$theme:t,$isInMulticart:r}=e;return{padding:"24px",position:r?"sticky":"absolute",bottom:0,left:0,right:0,...t.overlays.floatingButtonGradient}}));function d(e){const[t,r]=(0,n.Z)(),i=(0,a.Z)();return(0,s.BX)(s.HY,{children:[i?null:(0,s.tZ)(o.ZP,{$height:t?.height||0}),(0,s.tZ)(l,{$isInMulticart:i,ref:r,children:e.children})]})}},74365:(e,t,r)=>{r.d(t,{c:()=>m});var i=r(43193),n=r(36151),o=r(91931),a=r(94579),s=r(14770),l=r(33990);const d=(0,o.zo)("div",{padding:"16px 24px"}),c=(0,o.zo)("div",(e=>({position:"absolute",width:"100%",top:"0",left:"0",backgroundColor:e.$theme.colors[e.$bgColor],zIndex:a.I_.modal}))),u=(0,o.zo)(s.Z,{width:"24px",height:"24px",display:"flex",position:"relative",cursor:"pointer",right:"6px"}),h=(0,o.zo)("div",{position:"relative",marginTop:"8px"}),p=((0,o.zo)("div",(e=>{let{$theme:t}=e;return{...t.typography.LabelMedium,color:t.colors.onNegative}})),(0,o.zo)("div",(e=>{let{$theme:t}=e;return t.typography.LabelMedium}))),g=e=>{const[t,r]=i.useState(!1);(0,n.useEffect)((()=>{r(!1)}),[]);return(0,l.tZ)(l.HY,{children:t?null:(0,l.tZ)(c,{$bgColor:e.$bgColor,children:(0,l.BX)(d,{children:[(0,l.tZ)(u,{onClick:()=>{r(!0)},iconColor:e.$iconFill}),(0,l.tZ)(h,{children:e.children})]})})})},m=e=>(0,l.tZ)(g,{$bgColor:"warning",$iconFill:"onWarning",children:(0,l.tZ)(p,{children:e.children})})},96965:(e,t,r)=>{r.d(t,{Z:()=>I});var i=r(36151),n=r(52246),o=r(88885),a=r(33535),s=r(79908),l=r(45423),d=r(22395),c=r(36278),u=r(91931),h=r(57444),p=r(61799),g=r(22787),m=r(58814);var Z=r(80165),f=r(74057),y=r(54939),v=r(28222),x=r(82794),b=r(71051),C=r(29230),S=r(97130),$=r(33990);const _=e=>{let{$theme:t,$isOnlineOrdering:r,$isDisabled:i}=e;return i?(0,h.Z)(t):r?(e=>{let{$theme:t,disabled:r}=e;return{color:t.colors.onlineOrderingPrimaryInverseText,background:t.colors.onlineOrderingPrimaryInverse,...r?(0,h.Z)(t):{":hover":{background:t.colors.onlineOrderingPrimaryInverseHover},":active":{background:t.colors.onlineOrderingPrimaryInverseActive},...(0,m.Z)(t)}}})({$theme:t}):(0,g.y)({$theme:t})},w=(0,u.zo)(n.rU,(e=>{let{$size:t,$drawBorder:r,$theme:i,$isOnlineOrdering:n,$isDisabled:o}=e;return{...i.typography.LabelSmall,borderRadius:i.borders.pillButtonBorderRadius,display:"flex",flexDirection:"row",alignItems:"center",cursor:"pointer",height:"large"===t?"48px":"36px",padding:"8px 12px",boxSizing:"border-box",border:r?`1px solid ${i.colors.onlineOrderingPrimaryInverseActive}`:void 0,minWidth:`${C.Kv.addressMinWidth}px`,flex:"0 1 auto",..._({$theme:i,$isDisabled:o,$isOnlineOrdering:n})}})),z=(0,u.zo)("div",(e=>{let{$theme:t}=e;return{textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden",flex:`1 1 ${t.sizing.scale1200}`}})),k=(0,u.zo)("div",{textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden",flex:"0 1 content"}),I=e=>{const{deliveryTime:t,deliveryLocation:r,diningMode:n}=(0,f.Z)(),u=(0,i.useContext)(b.k7),h=(0,o.T)(),g=(0,a.ZP)(),m=(0,Z.WI)("header-location-button"),C=(0,v.Z)(),_=(0,x.d1)()?.customization?.colorInfo?.primary,{shouldOverrideLabel:I,overrideLabel:O}=(0,y.Z)(),{storeUuid:B,isSchedulable:T}=e,{redirectUrl:P}=(0,S.X)();return r?(0,$.BX)(w,{"data-testid":"edit-delivery-location-button",ref:m,$size:e.size,$isDisabled:e.deliveryLocationPickerDisabled,to:()=>P({storeUuid:B,isSchedulable:T}),onClick:t=>{e.deliveryLocationPickerDisabled?t.preventDefault():(g("eats:delivery_details_click"),u.set("addressChangeTouched",!0))},$isOnlineOrdering:C,$drawBorder:Boolean(C&&_),children:[(0,$.tZ)(s.Z,{color:"onHeader",type:"Pin",width:"16px",ariaLabel:h("component.location_typeahead_mobile.deliver_to")}),(0,$.tZ)(c.ZP,{$width:"8px"}),I?O:(0,$.tZ)(z,{"data-testid":"delivery-address-label",children:r.address.address1}),(0,$.tZ)(d.Z,{spaces:2}),(0,$.tZ)(k,{"data-test":"delivery-time",children:"scheduled"in t?(0,$.tZ)(p.Z,{date:t.date,startTime:t.startTime,endTime:t.endTime}):(0,$.tZ)(l.Z,{shortenedTime:!0,diningMode:n})})]}):null}},81707:(e,t,r)=>{r.d(t,{Z:()=>s});var i=r(36151),n=r(73518),o=r(33990);function a(e,t){return(0,o.tZ)(n.Z,{viewBox:"0 0 24 24",ref:t,...e,children:(0,o.tZ)("path",{d:"M18 7V2H6v5H1v15h22V7h-5zm-3 0H9V5h6v2z"})})}const s=i.forwardRef(a)},56348:(e,t,r)=>{r.d(t,{Z:()=>s});var i=r(36151),n=r(73518),o=r(33990);function a(e,t){return(0,o.tZ)(n.Z,{viewBox:"0 0 24 24",ref:t,...e,children:(0,o.tZ)("path",{d:"M22 6.9v3.8l-10 7.7-10-7.7V6.9l10 7.7 10-7.7z"})})}const s=i.forwardRef(a)},31723:(e,t,r)=>{r.d(t,{Z:()=>s});var i=r(36151),n=r(73518),o=r(33990);function a(e,t){return(0,o.tZ)(n.Z,{viewBox:"0 0 9 12",ref:t,...e,children:(0,o.tZ)("path",{d:"M8.9 6l-4.6 6H.5l4.6-6L.5 0h3.8l4.6 6z"})})}const s=i.forwardRef(a)},87873:(e,t,r)=>{r.d(t,{Z:()=>s});var i=r(36151),n=r(73518),o=r(33990);function a(e,t){return(0,o.tZ)(n.Z,{viewBox:"0 0 20 20",ref:t,...e,children:(0,o.tZ)("path",{d:"M18.834 17l-3.666-3.667c.916-1.333 1.5-2.916 1.5-4.666C16.667 4.333 13.083.75 8.75.75 4.417.75.834 4.333.834 8.667c0 4.333 3.583 7.916 7.917 7.916 1.75 0 3.333-.583 4.666-1.5l3.667 3.667 1.75-1.75zm-15.5-8.25c0-3 2.417-5.417 5.417-5.417s5.416 2.417 5.416 5.417-2.416 5.417-5.416 5.417c-3 0-5.417-2.417-5.417-5.417z"})})}const s=i.forwardRef(a)},53456:(e,t,r)=>{r.d(t,{Z:()=>l});var i=r(91931),n=r(37555),o=r(94579),a=r(33990);const s=(0,i.zo)("div",(e=>{let{$color:t,$checked:r,$hideBackground:i,$theme:n,$hasShadow:a}=e;return{...n.typography.LabelSmall,padding:"8px 12px",boxSizing:"border-box",...r?{backgroundColor:n.colors.buttonPrimaryFill,color:n.colors.buttonPrimaryText}:{backgroundColor:n.colors.buttonSecondaryFill,color:n.colors.buttonSecondaryText},...i?{backgroundColor:"initial"}:{},...t?{color:n.colors[t]}:{},cursor:"pointer",userSelect:"none",...a?{boxShadow:n.lighting.shadow400,transition:"box-shadow ease 0ms",transitionDelay:r?o.pB.defaultDuration:"0ms"}:{}}})),l=(0,i.Le)(s,(e=>function(t){return(0,a.tZ)(e,{$color:t.color,$checked:t.checked,$hideBackground:t.hideBackground,$hasShadow:t.hasShadow,role:t.type,"aria-checked":t.checked,tabIndex:0,"aria-label":t.label,onClick:()=>t.onChange(t.value),onKeyDown:e=>e.keyCode===n.Fx&&t.onChange(t.value),$as:t.$as,to:t.to,children:t.label})}))},6573:(e,t,r)=>{r.d(t,{Z:()=>x});var i=r(91931),n=r(40836),o=r(36278),a=r(79908),s=r(94579),l=r(81707),d=r(33990);const c=(0,i.zo)("li",(e=>{let{$theme:t,$isHighlighted:r,$size:i}=e;return{backgroundColor:r?t.colors.menuFillHover:"transparent",padding:"mini"===i?t.sizing.scale500:t.sizing.scale600,display:"flex",cursor:"pointer",transition:s.pB.itemBackground,outline:"none",":hover":{background:t.colors.menuFillHover}}})),u=(0,i.zo)("div",{alignSelf:"start"}),h=(0,i.zo)("div",{minWidth:0}),p=(0,i.zo)("div",(e=>{let{$theme:t,$size:r}=e;return{..."mini"===r?t.typography.ParagraphSmall:t.typography.ParagraphMedium,color:t.colors.contentPrimary,textOverflow:"ellipsis",overflow:"hidden"}})),g=(0,i.zo)("div",(e=>{let{$theme:t,$size:r}=e;return{..."mini"===r?t.typography.ParagraphXSmall:t.typography.ParagraphSmall,color:t.colors.contentSecondary,textOverflow:"ellipsis",overflow:"hidden"}})),m=e=>(0,d.BX)(c,{$isHighlighted:e.highlightedIndex===e.index,...e.getItemProps({index:e.index}),$size:e.size,children:[(0,d.tZ)(u,{children:(0,d.tZ)(a.Z,{type:"Pin",background:!0})}),(0,d.tZ)(o.ZP,{$width:"8px"}),(0,d.BX)(h,{children:[(0,d.tZ)(p,{$size:e.size,children:e.location.addressLine1}),(0,d.tZ)(g,{$size:e.size,children:e.location.addressLine2})]})]}),Z=e=>(0,d.BX)(c,{$isHighlighted:e.highlightedIndex===e.index,...e.getItemProps({index:e.index}),children:[(0,d.BX)(u,{children:["work"===e.taggedLocation.tag.toLowerCase()?(0,d.tZ)(l.Z,{..."mini"===e.size?{size:20}:{}}):null,"work"!==e.taggedLocation.tag.toLowerCase()?(0,d.tZ)(a.Z,{type:"home"===e.taggedLocation.tag?"Home":"Time",background:!0,..."mini"===e.size?{width:20,height:20}:{}}):null]}),(0,d.tZ)(o.ZP,{$width:"8px"}),(0,d.BX)(h,{children:[(0,d.tZ)(p,{$size:e.size,children:e.taggedLocation.address.address.title}),(0,d.tZ)(g,{$size:e.size,children:e.taggedLocation.address.address.subtitle}),e.taggedLocation.interactionString&&e.taggedLocation.instructionNotes?(0,d.tZ)(g,{$size:e.size,children:(0,d.tZ)(n.v,{id:"shared.taggedLocationInstructions",data:{interaction:e.taggedLocation.interactionString,notes:e.taggedLocation.instructionNotes}})}):(0,d.tZ)(g,{$size:e.size,children:e.taggedLocation.interactionString||e.taggedLocation.instructionNotes})]})]}),f=(0,i.zo)("li",(e=>{let{$theme:t}=e;return{...t.typography.ParagraphMedium,padding:"16px"}})),y=e=>{let{getItemProps:t}=e;return(0,d.tZ)(f,{...t({index:0}),children:(0,d.tZ)(n.v,{id:"shared.hmmCantFindThisAddress"})})},v=(0,i.zo)("ul",(e=>{let{$hasResults:t,$theme:r,$size:i}=e;return{background:r.colors.menuFill,position:"absolute",top:"100%",left:0,right:0,zIndex:s.I_.foreground,boxShadow:r.shadows.box,...t?{paddingBottom:"8px"}:{},..."mini"===i?{borderRadius:r.borders.inputBorderRadiusMini,marginTop:r.sizing.scale300}:{}}})),x=e=>{let t=null,r=!1;return e.isOpen&&(e.showTryAgainMessage?t=(0,d.tZ)(y,{getItemProps:e.getItemProps}):(t=e.locations.map(((t,r)=>"isTaggedLocation"in t&&t.isTaggedLocation?(0,d.tZ)(Z,{index:r,taggedLocation:t,getItemProps:e.getItemProps,highlightedIndex:e.highlightedIndex,size:e.size},r):"isTaggedLocation"in t?void 0:(0,d.tZ)(m,{index:r,location:t,getItemProps:e.getItemProps,highlightedIndex:e.highlightedIndex,size:e.size},r))),r=e.locations.length>0)),(0,d.tZ)(v,{...e.getMenuProps(),$hasResults:r,$size:e.size,children:t})}},639:(e,t,r)=>{r.d(t,{Z:()=>g});var i=r(88885),n=r(91931),o=r(6573),a=r(33535),s=r(48402),l=r(69404),d=r(54669),c=r(94579),u=r(68568),h=r(33990);const p=(0,n.zo)("label",c.E2),g=e=>{const t=(0,a.ZP)(),r=(0,d.Z)(),n=(0,i.T)(),{query:c,placeholder:g,locations:m,isLoading:Z,highlightedIndex:f,isOpen:y,showTryAgainMessage:v,openMenu:x,reset:b,getItemProps:C,getMenuProps:S,getInputProps:$,getLabelProps:_}=(0,u.Z)({onLocationSelected:e.onLocationSelected,initialQuery:e.initialQuery,id:e.id,initialIsClosed:!0});return(0,h.tZ)(l.Z,{children:(0,h.BX)("div",{ref:e.registerRef,children:[(0,h.tZ)(p,{..._(),children:n("shared.combobox.a11y_instructions")}),(0,h.tZ)(s.Z,{query:c,getInputProps:$,reset:b,placeholder:g,isLoading:Z,iconType:"Pin",backgroundColor:"inputFill",onFocus:()=>{x(),t("eats:enter_delivery_address_start",{address:r?.address.address1,latitude:r?.latitude,longitude:r?.longitude})},size:e.size,highlightFocus:e.highlightFocus}),(0,h.tZ)(o.Z,{locations:m.data||[],getMenuProps:S,getItemProps:C,highlightedIndex:f,showTryAgainMessage:v,isOpen:y,size:e.size})]})})}},15208:(e,t,r)=>{r.d(t,{Z:()=>d,b:()=>s});var i=r(43193),n=r(94579),o=r(91931),a=r(33990);const s=(0,o.zo)("div",(e=>{let{$ignorePadding:t}=e;return{marginLeft:`-${n.lK}`,marginRight:`-${n.lK}`,...t?{}:{paddingLeft:n.lK,paddingRight:n.lK}}})),l=(0,o.zo)("div",(e=>({maxWidth:e.$maxWidth?e.$maxWidth:n.eo,minWidth:n.pA,margin:"0 auto",boxSizing:"border-box",...e.$ignorePadding?{}:{padding:`0 ${n.lK}`}}))),d=(0,o.Le)(l,(e=>i.forwardRef((function(t,r){return(0,a.tZ)(e,{ref:r,...t})}))))},43675:(e,t,r)=>{r.d(t,{Z:()=>y});var i=r(36151),n=r(58984),o=r(62149),a=r(44692),s=r(69086),l=r(78034),d=r(33535),c=r(54669),u=r(65717),h=r(7819),p=r(41878),g=r(25862),m=r(65014),Z=r(73472),f=r(33990);const y=e=>{const{searchHomeResults:t=[],sections:r=[],verticalList:y,selectedVertical:v}=e,x=(0,o.TH)(),b=(0,n.I0)(),C=(0,d.ZP)(),S=(0,c.Z)(),{startTiming:$}=(0,Z.K3)(),_=(0,u.Z)(),w=(e,r)=>({itemPosition:r,title:e.titleTerm,type:e.type,sectionItemsCount:t.length-1,sectionPosition:0,sectionTitle:e.type});i.useEffect((()=>{b((0,l.Vw)(y))}),[b,y]);const z=(t,r)=>{$(m.B.SEARCH_FEED_LOAD_EVENT_NAME),C("eats:search_end",{userQuery:t?.title,page:x.pathname,hasDeliveryLocation:Boolean(S),searchType:"suggestion",mvsMeta:{verticalList:y.map((e=>e.verticalType)).join(","),selectedVertical:v}}),e.onItemClick&&e.onItemClick(t,r)};return(0,g.Z)(m.B.SEARCH_HOME_LOAD_EVENT_NAME),(0,f.tZ)(f.HY,{children:t.map(((e,i)=>{const n=i<t.length-1,o=(0,p.aJ)(e,x,S,_,v);switch(e.type){case"sectionTitle":return(0,f.tZ)(a.L1,{title:e.title},i);case"searchHistory":case"searchHistoryV2":return(0,f.tZ)(a.rG,{onClick:()=>{z(t[i],i)},item:{title:e.title||"",url:o,iconType:a.d.CLOCK,eventData:r.length?w(e,i):void 0},hasBorder:n},i);case"popularCategory":case"topCategory":return(0,f.tZ)(a.rG,{onClick:()=>{z(t[i],i)},item:{title:e.title||"",url:o,iconType:a.d.CATEGORY,iconUrl:e.iconUrl},hasBorder:n},i);case"searchText":return(0,f.tZ)(a.rG,{onClick:()=>{z(t[i],i)},item:{title:e.title,iconType:a.d.SEARCH,url:o},hasBorder:n},i);case"store":return(0,f.tZ)(f.HY,{children:e.store?(0,f.tZ)(s.Z,{store:e.store,hasBorder:n,url:(0,h.C)(e.store,_,x)},i):null});default:return null}}))})}},66740:(e,t,r)=>{r.d(t,{Z:()=>f});var i=r(36151),n=r(91931),o=r(97415),a=r(67206),s=r(94579),l=r(33990);const d=(0,n.zo)("div",(e=>{let{$theme:t}=e;return{...(0,a.Z)({$theme:t}),backgroundSize:"100vw 100%",position:"absolute",top:0,bottom:0,left:0,right:0,zIndex:s.I_.background}})),c=(0,n.zo)("div",{display:"flex",flex:1}),u=(0,n.zo)("div",{position:"relative",display:"flex"}),h=(0,n.zo)("div",{flex:"none",display:"flex",flexDirection:"column",justifySectionWrapper:"center",alignItems:"center"}),p=(0,n.zo)("div",(e=>{let{$theme:t}=e;return{width:"40px",height:"40px",background:`radial-gradient(transparent 20px, ${t.colors.backgroundPrimary} 20px)`}})),g=(0,n.zo)("div",{display:"flex",flexDirection:"column",flex:1}),m=e=>{let{titleWidth:t}=e;return(0,l.BX)(c,{children:[(0,l.BX)(h,{children:[(0,l.tZ)(o.CB,{$height:"10px",$width:"40px"}),(0,l.tZ)(p,{}),(0,l.tZ)(o.CB,{$height:"10px",$width:"40px"})]}),(0,l.tZ)(o.CB,{$width:"12px"}),(0,l.BX)(g,{children:[(0,l.tZ)(o.CB,{$width:"100%",$grow:!0}),(0,l.tZ)(o.gD,{width:`${t}%`,height:"24px"}),(0,l.tZ)(o.CB,{$width:"100%",$grow:!0})]})]})},Z=e=>{let{itemWidths:t}=e;return(0,l.BX)(g,{children:[(0,l.BX)(g,{children:[(0,l.tZ)(o.CB,{$width:"100%",$height:"16px"}),(0,l.tZ)(o.gD,{width:"40%",height:"30px"}),(0,l.tZ)(o.CB,{$width:"100%",$height:"12px"})]}),(0,l.tZ)(g,{children:t.map(((e,t)=>(0,l.tZ)(m,{titleWidth:e},t)))})]})},f=e=>{const[t]=(0,i.useState)(e.itemNumbers.map((e=>(e=>[...Array(e)].map((()=>Math.floor(50*Math.random())+30)))(e))));return(0,l.BX)(u,{children:[(0,l.tZ)(d,{}),(0,l.tZ)(g,{children:t.map(((e,t)=>(0,l.tZ)(Z,{itemWidths:e},t)))})]})}},69086:(e,t,r)=>{r.d(t,{Z:()=>y});var i=r(94024),n=r.n(i),o=r(91931),a=r(36278),s=r(31913),l=r(39957),d=r(79857),c=r(2139),u=r(33990);const h=(0,o.zo)(l.Z,(e=>{let{$isGrayedOut:t}=e;return{display:"flex",width:"100%",alignItems:"center",opacity:t?.6:void 0}})),p=(0,o.zo)("div",(e=>{let{$theme:t}=e;return{width:t.sizing.scale950,display:"flex",justifyContent:"center",alignItems:"center"}})),g=(0,o.zo)("div",(e=>{let{$theme:t,$src:r}=e;return{borderRadius:"50%",width:t.sizing.scale950,height:t.sizing.scale950,backgroundImage:`url(${n()(r)})`,backgroundSize:"cover"}})),m=(0,o.zo)("div",(e=>{let{$theme:t,$hasBorder:r}=e;return{padding:`${t.sizing.scale600} 0`,width:"100%",boxSizing:"border-box",...r?{borderBottom:`${t.sizing.scale0} solid ${t.colors.borderOpaque}`}:{}}})),Z=(0,o.zo)("div",(e=>{let{$theme:t}=e;return{...t.typography.LabelMedium}})),f=(0,o.zo)("div",(e=>{let{$theme:t}=e;return{...t.typography.ParagraphSmall}})),y=e=>{const{url:t,hasBorder:r,onClick:i}=e,{categories:n=[],title:o="",heroImageUrl:l="",meta1:y,isOrderable:v}=e.store||{},x=(0,d.Z)(),b=(0,c.Z)(),C=x&&!b;return(0,u.BX)(h,{suggestionAction:t,$isGrayedOut:!1===v,onClick:i,shouldReplaceOnNavigate:C,children:[(0,u.tZ)(p,{children:l?(0,u.tZ)(g,{$src:l,title:o,"aria-hidden":!0}):null}),(0,u.tZ)(a.IQ,{}),(0,u.BX)(m,{$hasBorder:r,children:[(0,u.tZ)(Z,{children:o}),y?(0,u.tZ)(s.ZP,{text:y}):(0,u.tZ)(f,{children:n.join(" • ")})]})]})}},44692:(e,t,r)=>{r.d(t,{L1:()=>C,d:()=>m,rG:()=>b});var i=r(43193),n=r(91931),o=r(78422),a=r(36278),s=r(85191),l=r(39957),d=r(94024),c=r.n(d),u=r(81702),h=r(79857),p=r(2139),g=r(33990);const m={SEARCH:"search",CLOCK:"clock",CATEGORY:"category"},Z=(0,n.zo)("div",(e=>{let{$theme:t}=e;return{...t.typography.LabelMedium,color:t.colors.contentTertiary,margin:"12px 0 8px 0"}})),f=(0,n.zo)(l.Z,(e=>{let{$theme:t}=e;return{display:"flex",width:"100%",height:"64px",alignItems:"center"}})),y=(0,n.zo)("div",(e=>{let{$theme:t}=e;return{display:"flex",flexGrow:0,flexShrink:0,boxSizing:"border-box",justifyContent:"center",alignItems:"center",width:"36px",height:"36px",borderRadius:"50%",color:t.colors.contentTertiary}})),v=(0,n.zo)("div",(e=>{let{$theme:t,$hasBorder:r}=e;return{...t.typography.LabelMedium,display:"flex",alignItems:"center",justifyContent:"space-between",flexGrow:1,height:"100%",overflow:"hidden",boxSizing:"border-box",...r?{borderBottom:`${t.sizing.scale0} solid ${t.colors.borderOpaque}`}:{}}})),x=(0,n.zo)("div",(e=>({borderRadius:"50%",width:"40px",height:"40px",backgroundImage:`url(${c()(e.$src)})`,backgroundSize:"cover"}))),b=e=>{let{item:t,hasBorder:r,onClick:n}=e;const{iconType:l,title:d,url:c,iconUrl:Z}=t,[b,C]=(0,s.T)({root:null}),{trackSearchHomeItemClick:S,trackSearchHomeItemView:$}=(0,u.Z)(),_=(0,h.Z)(),w=(0,p.Z)(),z=(_||w)&&"link"===c.type;return i.useEffect((()=>{t.eventData&&C&&C.isIntersecting&&$(t.eventData)}),[C]),(0,g.BX)(f,{suggestionAction:c,ref:b,onClick:()=>{t.eventData&&S(t.eventData),n&&n(d)},shouldReplaceOnNavigate:z,children:[(0,g.tZ)(y,{children:l===m.CLOCK?(0,g.tZ)(o.Z,{name:"ClockOutlined",size:16}):l===m.SEARCH?(0,g.tZ)(o.Z,{name:"SearchOutlined",size:18}):l===m.CATEGORY&&Z?(0,g.tZ)(x,{$src:Z,title:d,"aria-hidden":!0}):null}),(0,g.tZ)(a.IQ,{}),(0,g.tZ)(v,{$hasBorder:r,children:d})]})},C=e=>{let{title:t}=e;return(0,g.tZ)(Z,{children:t})}},28700:(e,t,r)=>{r.d(t,{Z:()=>p});var i=r(43193),n=r(44692),o=r(91931),a=r(69086),s=r(73472),l=r(65014),d=r(33990);const c=(0,o.zo)("ul",(e=>{let{$theme:t}=e;return{width:"100%"}})),u=(0,o.zo)("li",(e=>({backgroundColor:"transparent",cursor:"pointer",display:"flex",alignItems:"center",outline:"none",...e.$showBackground?{":hover":{background:e.$theme.colors.menuFillHover}}:{},transition:"opacity .45s .5s,visibility .45s .5s,transform .45s ease .3s",transform:"translateY(0)",whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden"}))),h=(e,t,r,i,o)=>{switch(e.type){case"sectionTitle":return(0,d.tZ)(n.L1,{title:e.title},o);case"text":case"textV2":case"searchText":case"searchTextV2":return(0,d.tZ)(n.rG,{item:{title:i,iconType:n.d.SEARCH,url:r},hasBorder:t});case"searchHistory":case"searchHistoryV2":return(0,d.tZ)(n.rG,{item:{title:i,iconType:n.d.CLOCK,eventData:void 0,url:r},hasBorder:t},o);case"store":case"croStore":return(0,d.tZ)(a.Z,{store:e.store,hasBorder:t,url:r});case"popularCategory":return(0,d.tZ)(n.rG,{item:{title:i,url:r,iconType:n.d.CATEGORY},hasBorder:t},o);default:return null}},p=e=>{const{stopTiming:t}=(0,s.K3)();return i.useEffect((()=>{e.suggestions.length>0&&t(l.B.SEARCH_SUGGESTION_LOAD_EVENT_NAME,{shouldEmitTiming:!0})}),[e.suggestions,t]),(0,d.tZ)(c,{...e.getMenuProps(),children:e.suggestions.map(((t,r)=>{const i=r<e.suggestions.length-1,n=e.getSuggestionAction(t),o=t.title||"";return(0,d.tZ)(u,{...e.getItemProps({index:r,disabled:"sectionTitle"===t.type}),onClick:()=>{e.onItemClick&&e.onItemClick(t,r)},$showBackground:"sectionTitle"!==t.type,children:h(t,i,n,o,r)},r)}))})}},39957:(e,t,r)=>{r.d(t,{Z:()=>a});var i=r(36151),n=r(52246),o=r(33990);const a=i.forwardRef((function(e,t){let{suggestionAction:r,shouldReplaceOnNavigate:i,onClick:a,children:s,...l}=e;return"link"===r.type?(0,o.tZ)(n.rU,{...l,...i?{replace:!0}:null,to:r.to,onClick:a,ref:t,children:s}):"anchor"===r.type?(0,o.tZ)("a",{...l,href:r.href,onClick:a,ref:t,children:s}):(0,o.tZ)("a",{...l,onClick:e=>{e.preventDefault(),a&&a(e)},ref:t,children:s})}))},48402:(e,t,r)=>{r.d(t,{Z:()=>v});var i=r(36151),n=r(88885),o=r(40836),a=r(91931),s=r(79908),l=r(14770),d=r(62851),c=r(36278),u=r(79168),h=r(33990);const p=(0,a.w1)(d.U,(e=>({display:"flex",padding:"8px 16px",position:"relative",...e.$backgroundColor?{backgroundColor:e.$theme.colors[e.$backgroundColor]}:{},...e.$isFocused?{boxShadow:e.$theme.shadows.focusedInput}:{},...e.$height?{height:`${e.$height}px`}:{},...e.$borderRadius?{borderRadius:e.$borderRadius}:{}}))),g=(0,a.zo)("div",(e=>{let{$shouldAnimatePin:t}=e;return{padding:"8px 0",display:"flex",flexShrink:0,alignItems:"center",...t?{animationDuration:"3s",animationDelay:"2s",animationIterationCount:"infinite",animationName:{"0%":{transform:"rotateY(0deg)"},"20%":{transform:"rotateY(360deg)"},"100%":{transform:"rotateY(360deg)"}}}:{}}})),m=(0,a.zo)("input",(e=>({flex:1,backgroundColor:e.$backgroundColor?e.$theme.colors[e.$backgroundColor]:e.$theme.colors.inputFill,...e.$width?{width:`${e.$width}px`}:{},appearance:"none",fontSize:e.$fontSize,outline:"none","::placeholder":{..."mini"===e.$size?e.$theme.typography.LabelSmall:e.$theme.typography.LabelMedium,color:e.$theme.colors.contentTertiary}}))),Z=(0,a.zo)("button",(e=>{let{$theme:t,$size:r}=e;return{..."mini"===r?t.typography.LabelXSmall:t.typography.LabelSmall,color:t.colors.contentTertiary,cursor:"pointer"}})),f=(0,a.zo)("div",(e=>{let{$theme:t}=e;return{width:"1px",margin:"0 16px",backgroundColor:t.colors.borderOpaque}})),y=(0,a.zo)(l.Z,{cursor:"pointer"}),v=e=>{const[t,r]=(0,a.hQ)(),l=(0,n.T)(),[d,v]=i.useState(!1),x=i.useRef(null),{value:b,...C}=e.getInputProps({onFocus:()=>{e.onFocus&&e.onFocus(),v(!0)},onBlur:()=>v(!1),ref:x}),{fontSize:S,height:$}=(0,u.Z)(e.size);return(0,h.BX)(p,{$backgroundColor:e.backgroundColor,$isFocused:d&&(e.highlightFocus??!0),$height:e.size?parseInt($,10):e.height,$borderRadius:"mini"===e.size||"rounded"===e.borderStyle?r.borders.pillButtonBorderRadius:null,children:[(0,h.tZ)(g,{$shouldAnimatePin:e.shouldAnimatePin,children:(0,h.tZ)(s.Z,{type:e.isLoading?"Loading":e.iconType,ariaLabel:e.isLoading?l("loading"):void 0,..."mini"===e.size?{width:20,height:20}:{}})}),(0,h.tZ)(c.ZP,{$width:"mini"===e.size?"8px":"16px"}),(0,h.tZ)(m,{...C,value:b||"",type:"text",autoComplete:"off",name:"searchTerm",placeholder:e.placeholder,$backgroundColor:e.backgroundColor,$width:e.queryWidth,$fontSize:S,$size:e.size}),(0,h.tZ)(c.ZP,{$width:"8px"}),e.query.length>0?(0,h.tZ)(Z,{type:"button",onClick:()=>{e.reset(),x.current&&x.current.focus()},$size:e.size,children:(0,h.tZ)(o.v,{id:"shared.clear"})}):null,e.onClose&&e.query.length>0?(0,h.tZ)(f,{}):null,e.onClose?(0,h.tZ)(y,{onClick:e.onClose}):null]})}},69404:(e,t,r)=>{r.d(t,{Z:()=>i});const i=(0,r(91931).zo)("div",{flexDirection:"column",position:"relative",flex:1})},7052:(e,t,r)=>{r.d(t,{TJ:()=>X,ZP:()=>F,qM:()=>H});var i=r(36151),n=r(43193),o=r(91631),a=r(40836),s=r(88885),l=r("__fusion__1088"),d=r(58092),c=r(79406),u=r(59210),h=r("__fusion__1017"),p=r(91931),g=r(60743),m=r(22395),Z=r(33990);const f=e=>1===e.numCarts&&1===e.numCartItems?(0,Z.BX)(Z.HY,{children:[(0,Z.tZ)(a.v,{id:"shared.numCartsSingular",data:{numCarts:e.numCarts}}),(0,Z.tZ)(m.Z,{spaces:2,color:"buttonPrimaryText"}),(0,Z.tZ)(a.v,{id:"shared.numCartItemsSingular",data:{numCartItems:e.numCartItems}})]}):1===e.numCarts?(0,Z.BX)(Z.HY,{children:[(0,Z.tZ)(a.v,{id:"shared.numCartsSingular",data:{numCarts:e.numCarts}}),(0,Z.tZ)(m.Z,{spaces:2,color:"buttonPrimaryText"}),(0,Z.tZ)(a.v,{id:"shared.numCartItems",data:{numCartItems:e.numCartItems}})]}):1===e.numCartItems?(0,Z.BX)(Z.HY,{children:[(0,Z.tZ)(a.v,{id:"shared.numCarts",data:{numCarts:e.numCarts}}),(0,Z.tZ)(m.Z,{spaces:2,color:"buttonPrimaryText"}),(0,Z.tZ)(a.v,{id:"shared.numCartItemsSingular",data:{numCartItems:e.numCartItems}})]}):(0,Z.BX)(Z.HY,{children:[(0,Z.tZ)(a.v,{id:"shared.numCarts",data:{numCarts:e.numCarts}}),(0,Z.tZ)(m.Z,{spaces:2,color:"buttonPrimaryText"}),(0,Z.tZ)(a.v,{id:"shared.numCartItems",data:{numCartItems:e.numCartItems}})]});var y=r(33535),v=r(83960),x=r(86255),b=r(84272),C=r(86695),S=r(68065),$=r(62149),_=r(70247),w=r(49373),z=r(3062),k=r(79517),I=r(47986),O=r(73472),B=r(65014),T=r(19912),P=r(47667),L=r(94579),D=r(15070);const R=(0,p.zo)(C.zx,(e=>{let{$theme:t}=e;return{width:"100%",boxShadow:t.lighting.deepBelow,transition:`background-color ${L.pB.defaultDuration}`,":disabled":{backgroundColor:t.colors.contentTertiary,color:t.colors.contentInversePrimary}}})),E=(0,p.zo)("div",(e=>{let{$theme:t,$shouldCapitalize:r}=e;return{display:"flex",justifyContent:"center",alignItems:"center",width:"100%",color:t.colors.buttonPrimaryText,...r?{textTransform:"capitalize"}:{}}})),M=(0,p.zo)("span",(e=>{let{$theme:t}=e;return{marginLeft:t.sizing.scale300}})),U=(0,p.zo)("div",(e=>{let{$theme:t}=e;return{display:"flex",color:t.colors.primaryB,flexDirection:"row",alignItems:"center"}})),H=()=>{const{draftOrder:e,isBundledOrder:t,bundledOrders:r}=(0,_.Dz)();return(0,i.useMemo)((()=>{if(!t)return 0;const i=(0,w.dH)(e?.shoppingCart?.items);return(r||[]).reduce(((e,t)=>e+(0,w.dH)(t?.shoppingCart?.items)),i)}),[e,t,r])},A=()=>{const e=H();return(0,Z.BX)(Z.HY,{children:[(0,Z.tZ)(l.default,{size:24}),(0,Z.tZ)(M,{children:(0,Z.tZ)(a.v,{id:"store.bundle_store.view_cart_text",data:{totalItems:e}})})]})},X=e=>{let{Wrapper:t}=e;const r=(0,$.TH)(),n=(0,o.k6)(),d=(0,$.UO)(),c=(0,s.T)(),u=(0,x.Z)({encodedStoreUuid:d?.encodedStoreUuid}),h=(0,z.j)({getCartFrom:"storeId",storeId:u}),p=(0,y.ZP)(),{startTiming:g}=(0,O.K3)(),m=(0,P.Z)(),f="CREATING"===h.status&&m,v=k.Tf.from(0);let b=!1,C="";switch(h.status){case"CREATING":case"OUTDATED":case"AVAILABLE":case"SYNCING":("CREATING"!==h.status||f)&&(Object.entries(h.rawCartData?.cartQuantities??{}).reduce(((e,t)=>{let[r,i]=t;return e.add(i.currentQuantity)}),v),C=h.rawCartData?.draftOrder?.uuid??"","appearance"in h&&"BUNDLED"===h.appearance.type&&(b=!0,h.appearance.otherOrders.forEach((e=>{Object.entries(e.rawCartData?.cartQuantities??{}).reduce(((e,t)=>{let[r,i]=t;return e.add(i.currentQuantity)}),v)}))))}const _=(0,i.useCallback)((()=>{g(B.B.CART_LOAD_COMPLETE,{shouldOverride:!0,metadata:{entryPoint:"view_cart_button"}}),g(B.B.CART_LOAD_COMPLETE_WITH_ITEMS,{shouldOverride:!0,metadata:{entryPoint:"view_cart_button"}}),p("eats:cart_cta_click",{isMulticart:"true",...b?{storePreCheckoutBundling:{sourceType:"BUNDLED_STORE"}}:null}),n.push((0,I.nQQ)(r,{draftOrderId:C}),{clearLocation:r})}),[n,r,C,p,b,g]);return(0,T.Z)({eventName:"eats:multicart_cart_pill",eventPayload:{...b?{storePreCheckoutBundling:{sourceType:"BUNDLED_STORE"}}:null},shouldEmit:v.isGt(0)}),v.isLte(0)?null:(0,Z.tZ)(t,{children:(0,Z.tZ)(R,{"aria-label":c(f?"shared.creating_cart":"shared.viewCart"),size:S.NO.large,onClick:_,disabled:f,children:(0,Z.tZ)(E,{children:f?(0,Z.tZ)(a.v,{id:"components.cart_button.creating_cart_text"}):b?(0,Z.BX)(Z.HY,{children:[(0,Z.tZ)(l.default,{size:24}),(0,Z.tZ)(M,{children:(0,Z.tZ)(a.v,{id:"store.bundle_store.view_cart_text",data:{totalItems:Math.ceil(v.toFloat())}})})]}):(0,Z.tZ)(a.v,{id:"components.cart_button.multicart_view_cart_text",data:{totalItems:Math.ceil(v.toFloat())}})})})})},F=e=>{let{linkUrl:t,Wrapper:r}=e;const[i,l]=n.useState(!1),[,m]=(0,p.hQ)(),C=n.useRef(!0),w=n.useRef(null),z=(0,$.TH)(),k=(0,o.k6)(),I=(0,$.UO)(),T=(0,s.T)(),P=(0,y.ZP)(),{isSecondaryBundledStore:L,primaryBundledStoreUuid:M}=(0,b.Z)(),H=(0,x.Z)({encodedStoreUuid:I?.encodedStoreUuid}),{isInVerboseCartPillTreatment:X,totalOrders:F}=(0,g.Z)(),{isEditOrder:V,hasGroupOrder:Q,isBillSplitOrder:N,currentUserItemCount:W,isDraftOrderCreator:G,draftOrder:Y,draftOrderUuid:q}=(0,v.Z)(H),j=(0,D.v)((e=>{let{draftOrder:t,quickAdd:r}=e;return(t.draftOrder.isLoading||t.draftOrder.data?.draftOrder.storeUuid!==H)&&r.storeUUID===H&&Object.keys(r.quantities).length>0&&W<1})),K=(0,v.Z)(M),{startTiming:J}=(0,O.K3)(),ee=W&&Q&&N&&!G&&C.current,te=L&&Y||"PRIMARY"===Y?.bundleGroupInfo?.bundleGroupRole;return n.useEffect((()=>()=>{clearTimeout(w.current)}),[]),n.useEffect((()=>{P("eats:multicart_cart_pill",{...te?{storePreCheckoutBundling:{sourceType:"BUNDLED_STORE"}}:null})}),[P,te]),n.useEffect((()=>{C.current=!0}),[W]),n.useEffect((()=>{ee&&(l(!0),C.current=!1,w.current=setTimeout((()=>{l(!1)}),5e3))}),[ee]),W<1&&!j?null:(0,Z.BX)(r,{children:[(0,Z.tZ)(d.Z,{isOpen:i,placement:c.r4.top,showArrow:!0,overrides:{Inner:{style:e=>{let{$theme:t}=e;return{paddingLeft:t.sizing.scale600,paddingRight:t.sizing.scale600,paddingTop:t.sizing.scale600,paddingBottom:t.sizing.scale600,display:"flex"}}}},content:()=>(0,Z.BX)(U,{children:[(0,Z.tZ)(u.S$,{width:m.sizing.scale4800,marginRight:m.sizing.scale500,color:m.colors.primaryB,children:(0,Z.tZ)(a.v,{id:"go.bill.split.add.item.tooltip.text"})}),(0,Z.tZ)(h.default,{onClick:()=>l(!1),size:16})]}),children:(0,Z.tZ)("div",{})}),(0,Z.tZ)(R,{"aria-label":T(j?"shared.creating_cart":"shared.viewCart"),size:S.NO.large,onClick:()=>{J(B.B.CART_LOAD_COMPLETE,{shouldOverride:!0,metadata:{entryPoint:"view_cart_button"}}),J(B.B.CART_LOAD_COMPLETE_WITH_ITEMS,{shouldOverride:!0,metadata:{entryPoint:"view_cart_button"}}),P("eats:cart_cta_click",{isMulticart:"true",...te?{storePreCheckoutBundling:{sourceType:"BUNDLED_STORE"}}:null}),k.push(t,{clearLocation:z})},disabled:j,children:(0,Z.tZ)(E,{children:j?(0,Z.tZ)(a.v,{id:"components.cart_button.creating_cart_text"}):te?(0,Z.tZ)(_.zW,{draftOrderUUID:L?K.draftOrderUuid:q,children:(0,Z.tZ)(A,{})}):X&&!V?(0,Z.tZ)(f,{numCarts:F,numCartItems:W}):(0,Z.tZ)(a.v,{id:"components.cart_button.multicart_view_cart_text",data:{totalItems:W}})})})]})}},70471:(e,t,r)=>{r.d(t,{Z:()=>n});var i=r(54669);function n(){return"apple_maps_store_inherit"===(0,i.Z)()?.originType}},64420:(e,t,r)=>{r.d(t,{Z:()=>u});var i=r(74622),n=r(71576),o=r(53811),a=r(8690),s=r(54592),l=r(38172),d=r(21025),c=r(62459);const u=()=>{const e=(0,c.Z)("removeMemberFromDraftOrderV2"),t=(0,c.Z)("addMemberToDraftOrderV2"),r=(0,n.Z)("getDraftOrderByUuidV2"),u=(0,i.useQueryClient)(),{clearRepeatOrder:h}=(0,a.Z)(),p=(0,d.f)();return{removeMemberFromDraftOrder:(0,i.useMutation)((t=>e.request("removeMemberFromDraftOrderV2",t)),{onSuccess:(e,t)=>{"repeatOrderTemplateUUID"in t&&u.invalidateQueries([...s.H,t.repeatOrderTemplateUUID]),t.draftOrderUUID&&r({draftOrderUUID:t.draftOrderUUID})}}),leaveDraftOrder:(0,i.useMutation)((t=>e.request("removeMemberFromDraftOrderV2",t)),{onSuccess:(e,t)=>{u.invalidateQueries(o.x),"repeatOrderTemplateUUID"in t&&h(t.repeatOrderTemplateUUID),u.invalidateQueries(l.IG)}}),addMemberToDraftOrder:(0,i.useMutation)((e=>t.request("addMemberToDraftOrderV2",e)),{onSuccess:(e,t)=>{"repeatOrderTemplateUUID"in t?(u.invalidateQueries([...s.H,t.repeatOrderTemplateUUID]),p()):u.invalidateQueries(o.x),"draftOrderUUID"in t&&r({draftOrderUUID:t.draftOrderUUID})}})}}},79168:(e,t,r)=>{r.d(t,{Z:()=>n});var i=r(91931);function n(e){const[t,r]=(0,i.hQ)();switch(e){case"mini":return{height:r.sizing.scale950,fontSize:r.sizing.scale550};case"small":return{height:r.sizing.scale1000,fontSize:r.sizing.scale600};default:return{height:r.sizing.scale1200,fontSize:r.sizing.scale600}}}},929:(e,t,r)=>{r.d(t,{Z:()=>a});var i=r(20115),n=r(29230),o=r(74634);function a(){const e=(0,o.Z)(),t=(0,i.Z)("features_config");return{headerHeight:e?n.Kv.height:t.header.height,isHeaderSticky:Boolean(t?.header?.sticky),headerShadowEnabled:Boolean(t?.header?.shadow)}}},19206:(e,t,r)=>{r.d(t,{Z:()=>H});var i=r("__fusion__565"),n=r(85341),o=r(40836),a=r(52246),s=r(86547),l=r(31723),d=r(40606),c=r(91931),u=r(29194),h=r(76150),p=r(89217),g=r(31913),m=r(65717),Z=r(62149),f=r(23892),y=r(56349),v=r(1540),x=r(91066),b=r(10312),C=r(57900),S=r(33990);const $=(0,c.zo)(n.Z,(e=>{let{$isMobile:t,$isXlb:r}=e;return{maxHeight:t?r?"85vh":"75vh":"auto"}})),_=(0,c.zo)("div",(e=>{let{$theme:t}=e;return{display:"flex",alignItems:"center",position:"sticky",top:0,zIndex:1,background:t.colors.backgroundPrimary,borderBottom:`2px solid ${t.colors.borderOpaque}`,...t.typography.LabelLarge}})),w=(0,c.zo)("div",(e=>{let{$theme:t}=e;return{height:t.sizing.scale1600,width:t.sizing.scale1600,display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0}})),z=(0,c.zo)("div",(e=>{let{$theme:t}=e;return{display:"flex",flexGrow:1,alignItems:"center",paddingRight:t.sizing.scale800,minWidth:"0"}})),k=(0,c.zo)("div",(e=>{let{$theme:t}=e;return{...t.typography.LabelLarge,color:t.colors.contentPrimary,flexGrow:1,whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden",maxWidth:"100%"}})),I=(0,c.zo)("div",(e=>{let{$theme:t}=e;return{display:"flex",flexShrink:0,paddingLeft:t.sizing.scale800}})),O=(0,c.zo)("ul",{display:"flex",flexDirection:"column",listStyle:"none"}),B=(0,c.zo)("div",(e=>{let{$theme:t,$direction:r}=e;return{padding:`${t.sizing.scale600} ${t.sizing.scale600} ${t.sizing.scale300} ${t.sizing.scale600}`,textAlign:"rtl"===r?"right":"left"}})),T=(0,c.zo)("li",(e=>{let{$theme:t}=e;return{display:"flex",alignItems:"center",cursor:"pointer",":hover":{background:t.colors.menuFillHover}}})),P=(0,c.zo)("div",(e=>{let{$theme:t}=e;return{display:"flex",flexShrink:0,height:t.sizing.scale1600,width:t.sizing.scale1600,margin:t.sizing.scale600,borderRadius:"50%",overflow:"hidden",position:"relative"}})),L=(0,c.zo)("div",{position:"absolute",top:0,left:0,right:0,bottom:0}),D=(0,c.zo)("div",(e=>{let{$theme:t}=e;return{display:"flex",alignItems:"center",flexGrow:1,minWidth:"0",minHeight:t.sizing.scale2400,overflow:"hidden",borderBottom:`1px solid ${t.colors.borderOpaque}`}})),R=(0,c.zo)("div",(e=>{let{$direction:t}=e;return{minWidth:"0",display:"flex",flexDirection:"column",flexGrow:1,textAlign:"rtl"===t?"right":"left"}})),E=(0,c.zo)("div",{whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden"}),M=(0,c.zo)("div",(e=>{let{$theme:t}=e;return{display:"flex",flexShrink:0,alignItems:"center",flexDirection:"row",paddingRight:t.sizing.scale800,paddingLeft:t.sizing.scale600}})),U=(0,c.zo)(a.rU,(e=>{let{$theme:t}=e;return{color:t.colors.action,...t.typography.LabelMedium}})),H=e=>{let{onBackClick:t,onCartSelect:r,isMobile:a,mealPlanUUID:c}=e;const H=(0,Z.TH)(),{query:A}=(0,v.M)({mealPlanUUID:c,draftOrderPayloadType:{},screenId:s.DY.CARTS_VIEW}),{isCreator:X}=(0,x.Z)(c),F=(0,b.P1)(H,c),{closeSidebarCart:V,closeCartDropdown:Q}=(0,h.Lb)(),N=(0,u.gm)(),W=(0,m.Z)();return(0,S.tZ)(d.a,{source:A,loaded:e=>{let{draftOrderPayload:s}=e;const d=s?.view;return(0,S.BX)($,{$isMobile:a,$isXLB:W,children:[(0,S.BX)(_,{children:[(0,S.tZ)(w,{onClick:e=>{e.stopPropagation(),t?.()},children:(0,S.tZ)(i.default,{})}),(0,S.BX)(z,{children:[(0,S.tZ)(k,{$direction:N,children:d?.title}),(0,S.tZ)(I,{children:(0,S.tZ)(U,{to:F,onClick:()=>{Q(),V()},children:X?(0,S.tZ)(o.v,{id:"go.manage"}):(0,S.tZ)(o.v,{id:"carousel.see_all"})})})]})]}),(0,S.tZ)(n.Z,{children:d?.emptyState?(0,S.tZ)(C._,{emptyState:d?.emptyState}):d?.sections?.map(((e,t)=>(0,S.BX)(O,{children:[(0,S.tZ)(B,{$direction:N,children:(0,S.tZ)(g.ZP,{text:e.title})}),e.rows?.map(((e,t)=>(0,S.BX)(T,{onClick:()=>{const i=e.button?.action;"openCart"===i?.type&&i?.openCart?.draftOrderUUID&&r(i.openCart.draftOrderUUID,t)},children:[(0,S.BX)(P,{children:[(0,S.tZ)(p.SZ,{richIllustration:e.leadingIllustration}),(0,S.tZ)(L,{})]}),(0,S.BX)(D,{children:[(0,S.BX)(R,{$direction:N,children:[(0,S.tZ)(E,{children:(0,S.tZ)(g.ZP,{text:e.title,whiteSpace:"nowrap"})}),e.taglines?.map(((e,t)=>(0,S.tZ)(E,{children:(0,S.tZ)(g.ZP,{text:e,whiteSpace:"nowrap"})},t)))]}),(0,S.tZ)(M,{children:(0,S.tZ)(l.Z,{size:12,color:"primary400"})})]})]},t)))]},t)))})]})},loading:()=>(0,S.tZ)(y.ZP,{}),error:()=>(0,S.tZ)(f.Z,{})})}},57900:(e,t,r)=>{r.d(t,{_:()=>f});var i=r(85341),n=r(89217),o=r(31913),a=r(47073),s=r(91931),l=r(15070),d=r(64420),c=r(33535),u=r(62149),h=r(91631),p=r(51434),g=r(10312);var m=r(33990);const Z=(0,s.zo)("div",(e=>{let{$theme:t,$isMobile:r}=e;return{display:"flex",flex:1,alignItems:"center",justifyContent:"center",flexDirection:"column",textAlign:"center",gap:t.sizing.scale500,marginTop:r?t.sizing.scale600:t.sizing.scale1600,marginBottom:t.sizing.scale800}})),f=e=>{let{emptyState:t}=e;const{isMobile:r}=(0,l.v)((e=>{let{device:t}=e;return t})),{title:s,subtitle:f,button:y,illustration:v,action:x}=t,{handleMealPlanViewOrderClick:b}=(()=>{const{addMemberToDraftOrder:e}=(0,d.Z)(),t=(0,c.ZP)(),r=(0,u.TH)(),i=(0,h.k6)();return{handleMealPlanViewOrderClick:e=>{if(e&&e.type)switch(e.type){case p.MQ.seeAll:i.push((0,g.FO)(r,String(e.seeAll.mealPlanUUID)));break;case p.MQ.createOrder:t("eats:meal_plan_create_order_click",{source:"order_view"}),i.push((0,g.n)(r,String(e.createOrder.mealPlanUUID)))}},isLoading:e.isLoading}})();return(0,m.BX)(Z,{$isMobile:r,children:[(0,m.tZ)(n.SZ,{richIllustration:v}),(0,m.tZ)(i.Z,{display:"flex",flexDirection:"column",children:(0,m.tZ)(o.ZP,{text:s})}),(0,m.tZ)(i.Z,{maxWidth:"500px",children:(0,m.tZ)(o.ZP,{text:f})}),y&&x?(0,m.tZ)(i.Z,{width:"auto",marginTop:"scale500",children:(0,m.tZ)(a.Z,{viewModel:y,onClick:e=>{b(x)}})}):null]})}},51434:(e,t,r)=>{r.d(t,{Ap:()=>y,B3:()=>f,EJ:()=>Z,G8:()=>d,Gl:()=>i,MQ:()=>m,Nx:()=>s,Tj:()=>h,Uw:()=>c,W5:()=>a,WM:()=>g,dM:()=>l,fT:()=>n,ff:()=>u,jF:()=>o,q6:()=>v,xZ:()=>p});const i="https://tb-static.uber.com/prod/meal-plan/assets/Uber%20Eats%20meal%20plan%20template.csv",n=5,o={MC_HOUR_HALF:30,MC_HOUR_1:60,HOURS_2:120,MC_HOURS_3:180,HOURS_4:240,MC_HOURS_5:300,MC_HOURS_6:360,MC_HOURS_7:420,MC_HOURS_8:480,MC_HOURS_9:540,MC_HOURS_10:600,MC_HOURS_11:660,HOURS_12:720,MC_HOURS_13:780,MC_HOURS_14:840,MC_HOURS_15:900,MC_HOURS_16:960,MC_HOURS_17:1020,MC_HOURS_18:1080,MC_HOURS_19:1140,MC_HOURS_20:1200,MC_HOURS_21:1260,MC_HOURS_22:1320,MC_HOURS_23:1380,HOURS_24:1440,HOURS_48:2880},a=300,s=158,l="443px",d={PAST:"PAST",ACTIVE:"ACTIVE",UPCOMING:"UPCOMING"},c={skipEmptyLines:"greedy",delimiter:"\n"},u=25,h="395px",p="skippedEmails",g={joinOrder:"joinOrder",openCart:"openCart",openStoreFront:"openStoreFront",trackOrder:"trackOrder",viewOrder:"viewOrder",createOrder:"createOrder",unknown:"unknown"},m={seeAll:"seeAll",createOrder:"createOrder",unknown:"unknown"},Z="USD",f={Tail:{style:e=>{let{$theme:t}=e;return{backgroundColor:t.colors.mono400}}},Icon:{style:e=>{let{$theme:t,$isActive:r}=e;const i=r?t.sizing.scale700:t.sizing.scale400;return{width:i,height:i,lineHeight:i,borderTopLeftRadius:i,borderTopRightRadius:i,borderBottomRightRadius:i,borderBottomLeftRadius:i,backgroundColor:r?t.colors.progressStepsActiveFill:t.colors.mono400}}}},y=15,v=18},1540:(e,t,r)=>{r.d(t,{M:()=>d});var i=r(30011),n=r.n(i),o=r(74622),a=r(2237),s=r(62459);var l=r(10312);const d=e=>{const{uuid:t}=(0,l.fY)(),r=function(e,t){const r=(0,s.Z)("getMealPlanOrdersViewV1"),i=(0,a.H)("getMealPlanOrdersViewV1",e);return(0,o.useQuery)({queryKey:i,queryFn:e=>{let{queryKey:t}=e;return r.request("getMealPlanOrdersViewV1",t[1])},...t?.queryObserverOptions})}({mealPlanUUID:t,...e},{queryObserverOptions:{refetchOnMount:"always",refetchInterval:e=>{const t=e?.draftOrderPayload?.loadingState?.reloadInMs;if(t){return n().fromValue(t).toNumber()}return!1}}}),{data:i,isLoading:d}=r;return{query:r,data:i,isLoading:d}}},33879:(e,t,r)=>{r.d(t,{Z:()=>le});var i=r(36151),n=r(40836),o=r(91631),a=r(68095),s=r(91931),l=r(76150),d=r(83960),c=r(50192),u=r(60743),h=r(94579),p=r(21661),g=r(73518),m=r(33990);function Z(e,t){return(0,m.tZ)(g.Z,{viewBox:"0 0 8 6",ref:t,...e,children:(0,m.tZ)("path",{d:"M8 .333v2.534L4 5.933 0 2.867V.333L4 3.4 8 .333z"})})}const f=i.forwardRef(Z);var y=r(36278),v=r(63346);const x=(0,s.zo)("div",{position:"relative",zIndex:h.I_.surface}),b=(0,s.zo)("button",(e=>{let{$theme:t}=e;return{cursor:"pointer",border:"none",outline:"none",display:"flex",alignItems:"center",...t.typography.LabelMedium}})),C=(0,s.zo)("span",(e=>{let{$theme:t}=e;return{display:"block",borderBottom:"1px solid transparent",":hover":{borderBottom:`1px solid ${t.colors.contentSecondary}`}}})),S=()=>{const{cartViews:e}=(0,u.Z)(),{sidebarCartDropdownVisible:t,setSidebarCartDropdownVisible:r}=(0,l.Lb)(),{toggleIsDropdownOpen:i,dropdownRef:o,isDropdownOpen:a,onCartSelect:s,DropdownWrapperDesktop:d}=(0,p.Z)({isDropdownOpen:t,setIsDropdownOpen:r}),c=e.length;return(0,m.BX)(x,{ref:o,children:[(0,m.BX)(b,{"aria-haspopup":"true","aria-expanded":a,onClick:i,children:[(0,m.tZ)(C,{children:(0,m.tZ)(n.v,{id:"multicart.carts_with_num",data:{num:c}})}),(0,m.tZ)(y.Tr,{}),(0,m.tZ)(f,{rotate:a?180:0,size:9})]}),a?(0,m.tZ)(d,{children:(0,m.tZ)(v.Z,{onCartSelect:s,isMobile:!1})}):null]})};var $=r(31017),_=r(72179),w=r(98102);const z=(0,s.zo)("div",(e=>{let{$theme:t,$shouldStick:r}=e;return{...t.typography.LabelMedium,opacity:r?1:0,transition:`opacity ${t.animation.timing300} ease`}})),k=(0,s.zo)("div",(()=>({position:"sticky",top:0,zIndex:1}))),I=(0,s.zo)("div",(e=>{let{$theme:t,$isCartDrafting:r}=e;return{margin:`0 -${t.sizing.scale600}`,...r?{padding:`${t.sizing.scale700} ${t.sizing.scale800} 0 ${t.sizing.scale300}`,marginBottom:`-${t.sizing.scale600}`}:{padding:`0 ${t.sizing.scale800} 0 ${t.sizing.scale300}`,minHeight:t.sizing.scale1400},backgroundColor:t.colors.backgroundPrimary,display:"flex",justifyContent:"space-between",alignItems:"center"}})),O=e=>{const{isCartDrafting:t}=(0,_.Z)();return t?(0,m.tZ)(k,{children:e.children}):(0,m.tZ)("div",{children:e.children})},B=(0,s.zo)(c.Z,{position:"static"}),T=e=>{const{isCartDrafting:t}=(0,_.Z)(),{totalOrders:r,draftOrders:i}=(0,u.Z)(),{isEditOrder:n}=(0,d.Z)(),[,o]=(0,s.hQ)(),a=r>1;return(0,m.tZ)(O,{children:(0,m.BX)(I,{$isCartDrafting:t,children:[(0,m.tZ)(B,{onClick:e.onClose,$noBackground:t,iconSize:t?o.sizing.scale800:void 0}),0!==r||i.isLoading||n?null:(0,m.tZ)($.X,{}),t&&e.store.hasLoaded&&e.store.data?(0,m.tZ)(z,{$shouldStick:e.shouldStick,children:e.store.data.title}):null,t&&e.store.hasLoaded&&e.store.data?(0,m.tZ)(w.$C,{store:e.store.data,onClearCart:e.onClose}):null,!a||n||t?null:(0,m.tZ)(S,{})]})})},P=(0,s.zo)("div",(e=>{let{$theme:t}=e;return{borderBottom:`2px solid ${t.colors.borderOpaque}`,padding:"0 24px",display:"flex",justifyContent:"center"}})),L=(0,s.zo)("button",(e=>{let{$theme:t,$isActive:r}=e;return{color:r?t.colors.contentPrimary:t.colors.contentTertiary,width:"216px",height:"54px",position:"relative",background:"none",outline:"none",border:"none",cursor:"pointer",overflowX:"clip",overflowY:"visible",whiteSpace:"nowrap",textOverflow:"ellipsis",padding:"0 16px","::after":{display:r?"unset":"none",borderBottom:`2px solid ${t.colors.contentPrimary}`,content:'""',position:"absolute",bottom:"-2px",left:"0",width:"100%"}}})),D=()=>{const{cartViews:e,activeDraftOrderUUID:t,setActiveDraftOrder:r}=(0,u.Z)();if(e.length<2)return null;const i=e[0],n=e[1];return(0,m.BX)(P,{children:[(0,m.tZ)(L,{onClick:()=>{r(i?.draftOrderUUID)},$isActive:t===i?.draftOrderUUID,children:(0,m.tZ)("span",{children:i?.title})}),(0,m.tZ)(L,{onClick:()=>{r(n?.draftOrderUUID)},$isActive:t===n?.draftOrderUUID,children:(0,m.tZ)("span",{children:n?.title})})]})};var R=r(70247),E=r(17593),M=r(97679),U=r(74365),H=r(71279),A=r(82333),X=r(79851),F=r(6509),V=r(93633),Q=r(51741),N=r(70327),W=r(35972),G=r(86255),Y=r(90961),q=r(73845),j=r(33535),K=r(72147),J=r(34771),ee=r(94261),te=r(87444),re=r(9545),ie=r(72275),ne=r(57077),oe=r(85191);const ae=(0,s.zo)("div",(e=>{let{$theme:t,$isCartDrafting:r}=e;return{height:"100%",display:"flex",flexDirection:"column",alignItems:"stretch",rowGap:t.sizing.scale600,...r?{":first-child > :is(div)":{margin:`0 ${t.sizing.scale600}`},":first-child > :is(ul)":{marginTop:0,marginLeft:t.sizing.scale600,marginBottom:-t.sizing.scale600,marginRight:t.sizing.scale600}}:{":first-child > :is(div, ul)":{margin:`0 ${t.sizing.scale600}`}}}})),se=(0,s.zo)("span",(e=>{let{$theme:t}=e;return t.typography.ParagraphMedium})),le=e=>{let{startShoppingRedirect:t}=e;const r=(0,o.k6)(),s=(0,X.Z)(),c=(0,o.UO)(),p=(0,G.Z)({encodedStoreUuid:c?.encodedStoreUuid}),[g,Z]=(0,oe.Z)({root:null,rootMargin:"0px 0px 0px 0px",threshold:1}),{isGroupOrder:f,isBundledOrder:y}=(0,R.Dz)(),v=Boolean(Z&&!Z.isIntersecting),{sidebarCartVisible:x,sidebarCartIn:b,sidebarCartClosing:C,closeSidebarCart:S}=(0,l.Lb)({transitionMS:500}),{hasGroupOrder:$,isDraftOrderCreator:z,storeUuid:k,isDraftOrderCartLocked:I,creatorName:O,isEditOrder:B}=(0,d.Z)(),{store:P}=(0,ie.Z)({storeUuid:k}),{serverCart:L}=(0,R.iQ)(),{hasCartToLoad:le}=(0,re.Z)(),{isInCartTabTreatment:de,totalOrders:ce,setActiveDraftOrder:ue,activeDraftOrderUUID:he,currentStoreDraftOrderUUID:pe}=(0,u.Z)(),ge=(0,Y.Z)(),me=Boolean(ge),{isManagingGroupOrder:Ze}=(0,V.Z)(),fe=(0,j.ZP)(),ye=0===ce&&!B&&!le&&!L.isLoading,ve=!x&&!b,xe=(0,te.Z)("canonical_product_smart_cart"),{isCartDrafting:be}=(0,_.Z)();return(0,J.Z)(!ve),(0,F.Z)(),(0,E.Z)(x),(0,q.Z)({cartOpen:x&&b,store:P,draftOrder:L}),(0,i.useEffect)((()=>{C&&he&&pe&&ue(pe||"")}),[C,pe,ue,he,p]),ve?null:(0,m.tZ)(N.Z,{messageKey:"cart-drawer",children:(0,m.tZ)(ee.ZP,{zIndex:h.I_.cover,children:(0,m.tZ)(a.Z,{isOpen:x&&b,onClose:S,overrides:{Close:{style:{display:"none"}},DrawerContainer:{style:{width:"478px"}},DrawerBody:{style:{marginTop:0,marginBottom:0,marginLeft:0,marginRight:0}}},children:Ze?(0,m.tZ)(Q.Z,{}):(0,m.BX)(ae,{$isCartDrafting:be,"data-test":"cart",children:[(0,m.tZ)(T,{shouldStick:!f&&!y&&v,store:P,onClose:()=>{S(),fe("eats:close_cart_cta")}}),de?(0,m.tZ)(D,{}):null,ye?(0,m.tZ)(A.Z,{onClick:()=>{S(),t&&r.push(s),fe("eats:start_shopping_cta_click")}}):(0,m.tZ)(M.Z,{store:P,draftOrder:L,loaded:(e,t)=>(0,m.BX)(m.HY,{children:[(0,m.BX)("div",{children:[I?(0,m.tZ)(U.c,{children:(0,m.tZ)(se,{children:z?(0,m.tZ)(n.v,{id:"go.unlock_cart_warning_text_2"}):(0,m.tZ)(n.v,{id:"go.creator_order_locked_description",data:{creatorName:O}})})}):null,(0,m.tZ)("div",{ref:g}),(0,m.tZ)(w.ZP,{store:e,onCartClose:S,onClearCart:S,cartActionsType:"dropdown"})]}),xe?(0,m.tZ)(K.C,{defaultSelectedStoreUuid:e.uuid}):null,(0,m.BX)(m.HY,{children:[me?(0,m.tZ)(W.Q,{$spaceBefore:24}):null,(0,m.tZ)(H.Z,{})]}),(0,m.tZ)(ne.Z,{hasGroupOrder:$,store:e,isMobile:!1,quantitySelectType:be?"stepper":"picker"})]})})]})})})})}},31111:(e,t,r)=>{r.d(t,{A:()=>v,Z:()=>x});var i=r(91931),n=r(36278),o=r(52298),a=r(31723),s=r(29194),l=r(31913),d=r(89400),c=r(10015),u=r(33990);const h=(0,i.zo)("div",(e=>{let{$isMobile:t}=e;return{display:"flex",maxWidth:t?"calc(100vw - 84px)":"315px",alignItems:"center"}})),p=(0,i.zo)("div",(e=>{let{$direction:t}=e;return{justifyContent:"center",display:"flex",flexDirection:"column",minWidth:"0",textAlign:"rtl"===t?"right":"left"}})),g=(0,i.zo)("div",(e=>{let{$theme:t}=e;return{...t.typography.LabelMedium,color:t.colors.contentPrimary,whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden",maxWidth:"500px"}})),m=(0,i.zo)("div",{display:"flex",alignItems:"center"}),Z=(0,i.zo)("div",{display:"flex",alignItems:"center",flexDirection:"row"}),f=(0,i.zo)("div",{display:"flex",alignItems:"center",flexDirection:"row"}),y=(0,i.zo)("div",(e=>{let{$theme:t}=e;return{...t.typography.ParagraphSmall,backgroundColor:t.colors.backgroundInversePrimary,borderRadius:"50%",color:t.colors.contentInversePrimary,height:"24px",width:"24px",marginRight:"16px",display:"flex",justifyContent:"center",alignItems:"center"}})),v=e=>{let{cartView:t,isMobile:r=!1,isHovering:i=!1}=e;const{title:a,tagline1:m,tagline2:Z,tagline3:f,metadata:y}=t,v=(0,s.gm)();return(0,u.BX)(h,{$isMobile:r,children:[(0,u.tZ)(c.xB,{cartView:t,isHovering:i,showBorder:Boolean(y?.openCheckoutMetadata?.bundleGroupMetadata)}),(0,u.tZ)(n.ZP,{$width:"16px"}),(0,u.BX)(p,{$direction:v,children:[(0,u.tZ)(g,{children:a}),(0,u.tZ)(o.ZP,{$height:2}),(0,u.tZ)(d.Z,{badge:m,baseFont:"ParagraphSmall",truncateTextWithEllipsis:!0}),(0,u.tZ)(o.ZP,{$height:2}),(0,u.tZ)(d.Z,{badge:Z,baseFont:"ParagraphSmall",truncateTextWithEllipsis:!0}),f?(0,u.BX)(u.HY,{children:[(0,u.tZ)(o.ZP,{$height:4}),(0,u.tZ)(l.ZP,{text:f})]}):null]})]})},x=e=>{let{cartView:t,isMobile:r=!1,isHovering:i=!1}=e;const{itemCount:n}=t;return(0,u.BX)(u.HY,{children:[(0,u.tZ)(v,{cartView:t,isMobile:r,isHovering:i}),(0,u.BX)(m,{children:[void 0!==n?(0,u.tZ)(f,{children:(0,u.tZ)(y,{children:n})}):null,(0,u.tZ)(Z,{children:(0,u.tZ)(a.Z,{size:12,color:"primary400"})})]})]})}},63346:(e,t,r)=>{r.d(t,{Z:()=>$});var i=r(43193),n=r(36151),o=r(91631),a=r(62149),s=r(91931),l=r(31111),d=r(53811),c=r(35207),u=r(33990);const h=()=>{const e=(0,d.O)().data?.topBanner;return(0,u.tZ)(c.ZP,{badge:e,padding:"20px 16px"})};var p=r(63798),g=r(8690),m=r(73472),Z=r(47986),f=r(32562),y=r(19206),v=r(10312),x=r(65014);const b=(0,s.zo)("ul",{listStyle:"none",margin:0,padding:0}),C=(0,s.zo)("li",(e=>{let{$theme:t,$isMobile:r}=e;return{padding:"16px",whiteSpace:"nowrap",":hover":{background:r?t.colors.menuFillHover:t.colors.backgroundSecondary},display:"flex",justifyContent:"space-between",cursor:"pointer",borderBottom:`1px solid ${t.colors.borderOpaque}`,":last-of-type":{borderBottom:"none"}}})),S=e=>{let{isMobile:t,index:r,cartView:n,onCartSelect:s,setCurrentCartsView:d,setMealPlanUUID:c}=e;const h=(0,o.k6)(),p=(0,a.TH)(),y=i.useRef(null),b=(0,f.Z)(y),{setActiveCartViewForRepeatOrder:S}=(0,g.Z)(),{startTiming:$}=(0,m.K3)();return(0,u.tZ)(C,{ref:y,role:"menuitem",$isMobile:t,onClick:e=>{switch($(x.B.CART_SELECTED_FROM_POPOVER,{shouldOverride:!0}),n.action){case"OPEN_CHECKOUT":{const e=n.metadata?.openCheckoutMetadata?.draftOrderUUID||n.metadata?.openCheckoutMetadata?.bundleGroupMetadata?.primaryDraftOrderUUID;e&&s(e,r);break}case"OPEN_REPEAT_ORDER_VIEW":if(S(n),t)return void h.push((0,Z.ejR)(p));d("repeat_group_order"),e.stopPropagation();break;case"OPEN_MEAL_PLAN_VIEW":{const r=n.metadata?.openMealPlanViewMetadata?.mealPlanUUID;if(t)return void h.push((0,v.Q8)(p,r));c(r),d("meal_plan"),e.stopPropagation();break}default:s(n.draftOrderUUID,r)}},children:(0,u.tZ)(l.Z,{isMobile:t,isHovering:b,cartView:n})})},$=e=>{const t=(0,d.O)()?.data?.carts,[r,i]=(0,n.useState)(null),[o,a]=(0,n.useState)(""),s=(0,n.useCallback)((()=>(0,u.BX)(u.HY,{children:[(0,u.tZ)(h,{}),(0,u.tZ)(b,{role:"menu",children:t?.map(((t,r)=>(0,u.tZ)(S,{index:r,isMobile:e.isMobile,cartView:t,setCurrentCartsView:i,setMealPlanUUID:a,onCartSelect:e.onCartSelect},t.draftOrderUUID)))})]})),[t,e]);return e.isMobile?s():"repeat_group_order"===r?(0,u.tZ)(p.Z,{onBackClick:()=>{i(null)},onCartSelect:e.onCartSelect}):"meal_plan"===r?(0,u.tZ)(y.Z,{mealPlanUUID:o,onBackClick:()=>{i(null),a("")},onCartSelect:e.onCartSelect}):s()}},76686:(e,t,r)=>{r.d(t,{Z:()=>o});var i=r(43193),n=r(33535);const o=()=>{const e=(0,n.ZP)();return i.useCallback(((t,r)=>{e("eats:carts_list_cart_click",{multicart:{index:r,draftOrderUuid:t}})}),[e])}},21661:(e,t,r)=>{r.d(t,{Z:()=>g});var i=r(36151),n=r(91931),o=r(76686),a=r(60743),s=r(33535),l=r(53213),d=r(94579),c=r(58984),u=r(24484),h=r(87444);const p=(0,n.zo)("div",(e=>{let{$theme:t}=e;return{background:t.colors.menuFill,boxShadow:"0px 4px 16px rgba(0, 0, 0, 0.12)",marginTop:"8px",right:"8px",position:"absolute",width:"420px",borderRadius:"16px",maxHeight:"505px",overflow:"auto",zIndex:d.I_.foreground}})),g=e=>{let{isDropdownOpen:t,setIsDropdownOpen:r}=e;const{totalOrders:n,draftOrderUUIDs:d,setActiveDraftOrder:g}=(0,a.Z)(),m=(0,o.Z)(),Z=(0,s.ZP)(),f=i.useRef(null),y=(0,c.I0)(),v=(0,h.Z)("canonical_product_smart_cart");(0,l.Z)(f,(()=>{r(!1)}),t);const x=i.useCallback((()=>{const e=!t;r(e),e&&Z("eats:carts_list_view",{multicart:{numTotalCarts:n,draftOrderUuids:d}})}),[t,r,Z,n,d]),b=i.useCallback(((e,t)=>{g(e),m(e,t),r(!1),v&&y((0,u.kw)())}),[g,m,v,r,y]);return{toggleIsDropdownOpen:x,dropdownRef:f,isDropdownOpen:t,onCartSelect:b,DropdownWrapperDesktop:p}}},25862:(e,t,r)=>{r.d(t,{Z:()=>a});var i=r(36151),n=r(73472),o=r(33535);const a=(e,t)=>{const{stopTiming:r}=(0,n.K3)(),a=i.useRef(!1),s=(0,o.ZP)();i.useEffect((()=>{if(!a.current){a.current=!0;const i=r(e);i&&s("eats:timing",{label:t??e,timeElapsed:i})}}),[r,s,e,t])}},41929:(e,t,r)=>{r.d(t,{Z:()=>u});var i=r(8051),n=r(59210),o=r(88885),a=r(91931),s=r(62091),l=r(33990);const d=(0,a.zo)("div",(e=>{let{$theme:t}=e;return{display:"flex",flex:1,alignItems:"center",flexDirection:"column",justifyContent:"center",paddingTop:t.sizing.scale800,paddingBottom:t.sizing.scale800}})),c=(0,a.zo)(s.Z,{width:"175px",height:"175px"});function u(e){let{message:t}=e;const a=(0,o.T)();return(0,l.BX)(d,{children:[(0,l.tZ)(c,{src:(0,i.pZ)(r(7775))}),(0,l.tZ)(n.fH,{marginTop:"0",marginBottom:"12px",children:a("eats.rgo.get_carts_view_for_eater.no_open_carts")}),(0,l.tZ)(n.Yl,{children:t})]})}},23892:(e,t,r)=>{r.d(t,{Z:()=>d});var i=r(40836),n=r(91931),o=r(33990);const a=(0,n.zo)("div",{display:"flex",flexDirection:"column",alignItems:"center",maxWidth:"410px",padding:"24px",margin:"0 auto",whiteSpace:"normal"}),s=(0,n.zo)("div",(e=>{let{$theme:t}=e;return{...t.typography.HeadingSmall,marginBottom:"8px"}})),l=(0,n.zo)("div",(e=>{let{$theme:t}=e;return t.typography.ParagraphMedium})),d=()=>(0,o.BX)(a,{children:[(0,o.tZ)(s,{children:(0,o.tZ)(i.v,{id:"components.genericError.title"})}),(0,o.tZ)(l,{children:(0,o.tZ)(i.v,{id:"shared.genericServerError"})})]})},63798:(e,t,r)=>{r.d(t,{Z:()=>N});var i=r(36151),n=r(52246),o=r(62149),a=r(40836),s=r("__fusion__565"),l=r(31723),d=r(91931),c=r(40606),u=r(8690),h=r(52692),p=r(29194);const g=Object.freeze({UNKNOWN:"UNKNOWN",CARTS_DROPDOWN_WEB:"CARTS_DROPDOWN_WEB"});var m=r(31913),Z=r(89217),f=r(47073),y=r(56349),v=r(23892),x=r(69772),b=r(68907),C=r(54592),S=r(38172),$=r(47986),_=r(76150),w=r(41929),z=r(86830),k=r(33990);const I=(0,d.zo)("div",(e=>{let{$theme:t}=e;return{display:"flex",alignItems:"center",...t.typography.LabelLarge}})),O=(0,d.zo)("div",{height:"64px",width:"64px",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0}),B=(0,d.zo)("div",(e=>{let{$theme:t}=e;return{display:"flex",flexGrow:1,alignItems:"center",paddingRight:t.sizing.scale800,minWidth:"0"}})),T=(0,d.zo)("div",(e=>{let{$theme:t}=e;return{...t.typography.LabelLarge,color:t.colors.contentPrimary,flexGrow:1,whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden",maxWidth:"100%"}})),P=(0,d.zo)("div",(e=>{let{$theme:t}=e;return{display:"flex",flexShrink:0,paddingLeft:t.sizing.scale800}})),L=(0,d.zo)("div",(e=>{let{$isMobile:t}=e;return{overflow:"auto",maxHeight:t?"calc(75vh - 66px)":"288px"}})),D=(0,d.zo)("ul",{display:"flex",flexDirection:"column",listStyle:"none"}),R=(0,d.zo)("div",(e=>{let{$theme:t,$direction:r}=e;return{padding:`${t.sizing.scale600} ${t.sizing.scale600} ${t.sizing.scale300} ${t.sizing.scale600}`,textAlign:"rtl"===r?"right":"left"}})),E=(0,d.zo)("li",(e=>{let{$theme:t}=e;return{display:"flex",alignItems:"center",cursor:"pointer",":hover":{background:t.colors.menuFillHover}}})),M=(0,d.zo)("div",(e=>{let{$theme:t}=e;return{display:"flex",flexShrink:0,height:t.sizing.scale1600,width:t.sizing.scale1600,margin:t.sizing.scale600,borderRadius:"50%",overflow:"hidden",position:"relative"}})),U=(0,d.zo)("div",{position:"absolute",top:0,left:0,right:0,bottom:0}),H=(0,d.zo)("div",(e=>{let{$theme:t}=e;return{display:"flex",alignItems:"center",flexGrow:1,minWidth:"0",minHeight:"95px",overflow:"hidden",borderBottom:`1px solid ${t.colors.borderOpaque}`}})),A=(0,d.zo)("div",(e=>{let{$direction:t}=e;return{minWidth:"0",display:"flex",flexDirection:"column",flexGrow:1,textAlign:"rtl"===t?"right":"left"}})),X=(0,d.zo)("div",{whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden"}),F=(0,d.zo)("div",{display:"flex",flexShrink:0,alignItems:"center",flexDirection:"row",paddingRight:"24px",paddingLeft:"16px"}),V=(0,d.zo)("div",(e=>{let{$theme:t}=e;return{...t.typography.ParagraphSmall,color:t.colors.contentInversePrimary,borderRadius:"50%",backgroundColor:"black",height:"24px",width:"24px",marginRight:"16px",display:"flex",justifyContent:"center",alignItems:"center"}})),Q=(0,d.zo)(n.rU,(e=>{let{$theme:t}=e;return{color:t.colors.action,...t.typography.LabelMedium}})),N=e=>{let{onBackClick:t,onCartSelect:r,isMobile:n}=e;const d=(0,o.TH)(),N=(0,i.useRef)(!1),{repeatOrderTemplateUUIDs:W}=(0,u.Z)(),{isRepeatOrderParticipant:G,billSplitOption:Y}=(0,C.Z)(W[0]),q=1===W.length,j=(0,S.ci)({repeatOrderTemplateUUIDs:W,screenID:g.CARTS_DROPDOWN_WEB}),{handleRepeatOrderClick:K}=(0,b.G)(),{closeSidebarCart:J,closeCartDropdown:ee}=(0,_.Lb)(),{logSelectRepeatOrderCartView:te}=(0,z.E)();(0,i.useEffect)((()=>{j.isError&&j.remove()}),[j,j.isError]),(0,i.useEffect)((()=>{Y&&!N.current&&(te(W,G,Y),N.current=!0)}),[Y,G,te,W]);const re=e=>{const t=(0,$.saK)(d,1===W.length?W[0]:void 0);return G?(0,k.tZ)(Q,{to:t,onClick:()=>{ee(),J()},children:(0,k.tZ)(a.v,{id:"carousel.see_all"})}):q?[...e??[]].reverse().map(((e,t)=>{let{button:r,action:i}=e;return r?(0,k.tZ)(f.Z,{viewModel:r,onClick:()=>K(i)},t):null})):(0,k.tZ)(Q,{to:t,onClick:()=>{ee(),J()},children:(0,k.tZ)(a.v,{id:"go.manage"})})},ie=(0,p.gm)();return(0,k.tZ)(c.a,{source:j,loaded:e=>(0,k.BX)(k.HY,{children:[(0,k.BX)(I,{children:[(0,k.tZ)(O,{onClick:e=>{e.stopPropagation(),t?.()},children:(0,k.tZ)(s.default,{})}),(0,k.BX)(B,{children:[(0,k.tZ)(T,{$direction:ie,children:e.title}),(0,k.tZ)(P,{children:re(e.navigationBarButtons)})]})]}),(0,k.tZ)(h.Z,{$height:"2px",$margin:"0"}),(0,k.tZ)(L,{$isMobile:n,children:e.emptyCartMessage?(0,k.tZ)(w.Z,{message:e.emptyCartMessage}):e.sections?.map(((e,t)=>(0,k.BX)(D,{children:[q?null:(0,k.tZ)(R,{$direction:ie,children:(0,k.tZ)(m.ZP,{text:e.title})}),e.rows?.map(((e,t)=>(0,k.BX)(E,{onClick:()=>{"openCheckout"===e.tapAction?.type&&e.tapAction.openCheckout?.draftOrderUUID&&r(e.tapAction.openCheckout.draftOrderUUID,t)},children:[(0,k.BX)(M,{children:[(0,k.tZ)(Z.SZ,{richIllustration:e.leadingIllustration}),(0,k.tZ)(U,{children:(0,k.tZ)(x.XO,{})})]}),(0,k.BX)(H,{children:[(0,k.tZ)(A,{$direction:ie,children:[e.title,e.tagLine1,e.tagLine2].map(((e,t)=>e?(0,k.tZ)(X,{children:(0,k.tZ)(m.ZP,{text:e,whiteSpace:"nowrap"})},t):null))}),(0,k.BX)(F,{children:[void 0!==e.itemCount?(0,k.tZ)(V,{children:e.itemCount}):null,(0,k.tZ)(l.Z,{size:12,color:"primary400"})]})]})]},t)))]},t)))})]}),loading:()=>(0,k.tZ)(y.ZP,{}),error:()=>(0,k.tZ)(v.Z,{})})}},21025:(e,t,r)=>{r.d(t,{f:()=>a});var i=r(74622),n=r(53811),o=r(99233);const a=()=>{const e=(0,i.useQueryClient)();return()=>{setTimeout((()=>{e.invalidateQueries(n.x)}),o.Ts)}}},1604:(e,t,r)=>{r.d(t,{Z:()=>o});var i=r(60849),n=r(29396);const o=()=>(0,i.ip)({...n.J.eatsfeed_citrus_top_category_icon_web_enabled,defaultValue:!1})},81702:(e,t,r)=>{r.d(t,{Z:()=>p});var i=r(36151),n=r(5639),o=r(79857),a=r(1604),s=r(15070),l=r(55758),d=r(62149),c=r(47986),u=r(92060),h=r(33535);const p=()=>{const e=(0,n.hU)(),t=(0,o.Z)(),r=(0,a.Z)(),p=r||e.isMobile||t,g=(0,s.v)((e=>{let{multiVertical:t}=e;return t.verticalList})),m=(0,l.d)(),Z=(0,d.TH)(),{vertical:f,userQuery:y}=(0,c.RAN)(Z,["vertical","userQuery"]),v=r?Boolean(p)&&!y:Boolean(p)&&"PICKUP"!==m&&!y,[x,b]=i.useState(v),[C,S]=i.useState(!0),$=(0,h.ZP)(),_=i.useCallback((e=>{p&&$("eats:search_end",{userQuery:e,mvsMeta:{verticalList:g.map((e=>e.verticalType)).join(","),selectedVertical:f||u.g}})}),[$,p,g,f]),w=i.useCallback((e=>{$("eats:search_home_item_click",e)}),[$]),z=i.useCallback((e=>{$("eats:search_home_item_view",e)}),[$]);return{trackSearchCategoryClick:_,showSearchHome:x,showPastOrdersSuggestions:C,setShowPastOrdersSuggestions:S,searchShortcutsEnabled:p,setShowSearchHome:e=>{p&&b(e)},trackSearchHomeItemClick:w,trackSearchHomeItemView:z}}},41878:(e,t,r)=>{r.d(t,{ZP:()=>z,aJ:()=>w});var i=r(36151),n=r(60849),o=r(15070),a=r(91631),s=r(88885),l=r(20568),d=r(41497),c=r(33535),u=r(47986),h=r(54669),p=r(16046),g=r(87891),m=r(29396),Z=r(16372),f=r(65717),y=r(92060),v=r(87444),x=r(7819),b=r(62149),C=r(1604),S=r(79857),$=r(2139),_=r(35212);const w=(e,t,r,i,n)=>["text","textV2","searchHistory","searchHistoryV2","popularCategory","topCategory","searchFor","searchText","searchTextV2"].includes(e.type)?{type:"link",to:(0,u.Xqq)(t,{vertical:n||y.g,userQuery:e.searchTerm?e.searchTerm:e.title,searchSource:Z.xH.SEARCH_SUGGESTION,searchType:Z.Sc.GLOBAL_SEARCH,...r?{deliveryLocation:r}:{}})}:"store"===e.type&&e.store?(0,x.C)(e.store,i,t):"croStore"===e.type&&e.store?{type:"link",to:(0,u.gfM)(t,{storeSlug:e.store.slug,storeUuid:e.store.uuid})}:{type:"unknown"},z=e=>{let{initialQuery:t,onSuggestionSelected:r,initialIsClosed:x,searchTypeaheadPlaceholder:z,vertical:k,isMultiVerticalDesktop:I}=e;const O=(0,b.TH)(),B=(0,a.k6)(),T=(0,s.T)(),P=(0,h.Z)(),L=(0,c.ZP)(),D=(0,l.Z)("getSearchSuggestionsV1"),R=(0,v.Z)("clear_search_results_cache_on_location_change"),E=(0,_.Z)(P,!0),M=(0,n.qp)({...m.J.eats_web_eater_home_search_home_style,defaultValue:""}),U=(0,g.t)({dropPastOrders:I||""!==M},I?{}:{queryObserverOptions:{enabled:!1}}),H=(0,f.Z)(),A=(0,n.ip)({...m.J.cs_other_entrypoint_xlb,defaultValue:!1}),X=(0,v.Z)("can_enable_cs_other_entrypoint_xlb"),F=(0,o.v)((e=>{let{multiVertical:t}=e;return t.verticalList})),{setLastClickedPartialStore:V}=i.useContext(p.C),{userQuery:Q}=(0,u.RAN)(O,["userQuery"]),N=(0,C.Z)(),W=(0,S.Z)(),G=(0,$.Z)(),Y=i.useCallback((function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"push";"replace"===t?B.replace(e):B.push(e)}),[B]),q=i.useCallback((async e=>{if(L("eats:search_end",{userQuery:e.title,page:O.pathname,hasDeliveryLocation:Boolean(P),mvsMeta:{verticalList:F.map((e=>e.verticalType)).join(","),selectedVertical:k||y.g},searchType:"searchFor"!==e.type&&"text"!==e.type||!e.title?"suggestion":"manual"}),r&&r(),e.store&&("store"===e.type&&!e.store.actionUrl||"croStore"===e.type)&&V({heroImageUrl:e.store.heroImageUrl,title:e.store.title,storeUuid:e.store.uuid}),"store"===e.type&&e.store){if(e.store.actionUrl)return;Y((0,u.gfM)(O,{storeSlug:e.store.slug,storeUuid:e.store.uuid}),W&&!G?"replace":"push")}else"croStore"===e.type&&e.store?L("eats:search_bar_past_order_store_click",{storeUuid:e.store?.uuid}):"searchFor"!==e.type&&"text"!==e.type||!e.title||Y((0,u.Xqq)(O,{userQuery:e.title,searchSource:Z.xH.SEARCH_BAR,searchType:Z.Sc.GLOBAL_SEARCH}),W||G?"replace":"push")}),[L,O,P,F,k,r,V,Y,W,G]),j=i.useCallback(((e,t)=>{q({title:e,type:"searchFor"})}),[q]),K=i.useCallback((async e=>{if(!e){if(""!==M)return[];let e;if(U.isFetched){if(I)return(U.data?.verticalSearchHomeResults||{})[k||y.g];e=U.data?.searchHistory}else{const t=await U.refetch().then((e=>e.data)),r=t?.verticalSearchHomeResults;if(I)return(r||{})[k||y.g];e=t?.searchHistory}return e||[]}const{date:t,startTime:r,endTime:i}=(0,u.RAN)(O,["date","startTime","endTime"]),n=await D({userQuery:e,date:t,startTime:Number(r),endTime:Number(i),vertical:k});return 0===n.length?L("eats:global_search_suggestions_zero_results",{mvsMeta:{verticalList:F.map((e=>e.verticalType)).join(","),selectedVertical:k||y.g}}):L("eats:global_search_suggestions_viewed",{mvsMeta:{verticalList:F.map((e=>e.verticalType)).join(","),selectedVertical:k||y.g}}),!H||A&&X?n:n.filter((e=>!e.store?.actionUrl))}),[O,D,k,L,F,H,A,X,M,U,I]),J=i.useCallback((async e=>{if(!e)return[];const{date:t,startTime:r,endTime:i}=(0,u.RAN)(O,["date","startTime","endTime"]),n=await D({userQuery:e,date:t,startTime:Number(r),endTime:Number(i),vertical:k});return 0===n.length?L("eats:global_search_suggestions_zero_results",{mvsMeta:{verticalList:F.map((e=>e.verticalType)).join(","),selectedVertical:k||y.g}}):L("eats:global_search_suggestions_viewed",{mvsMeta:{verticalList:F.map((e=>e.verticalType)).join(","),selectedVertical:k||y.g}}),!H||A&&X?n:n.filter((e=>!e.store?.actionUrl))}),[O,D,k,L,F,H,A,X]),ee=i.useCallback((e=>{let{results:t,query:r}=e;return 0===t.length?r?T("shared.noSuggestionsForTerm",{searchTerm:r}):"":r?T("components.MarketplaceSearch.resultsDescription",{numResults:t.length,searchTerm:r}):T("shared.searchResultsCount",{resultsCount:t.length})}),[]),{query:te,results:re,getLabelProps:ie,getInputProps:ne,getMenuProps:oe,getItemProps:ae,reset:se,openMenu:le,isOpen:de,highlightedIndex:ce,clearCacheAndRefetchResults:ue,selectItem:he}=(0,d.Z)({id:"search-suggestions-typeahead",initialQuery:t||Q,fetchResults:N?J:K,initialIsClosed:x,onResultSelected:q,getQueryFromResult:e=>e?.title||"",onEnterKeyWithNoSelectedResult:j,getA11yStatusMessage:ee,fetchResultsTrigger:k}),pe=z||T("shared.searchPlaceholder");return i.useEffect((()=>{!G&&R&&ue&&ue()}),[P]),i.useEffect((()=>{G&&R&&ue&&E!==P&&ue()}),[G,P,E,R,ue]),{query:te,results:re,isOpen:de,getLabelProps:ie,getInputProps:ne,getMenuProps:oe,getItemProps:ae,openMenu:le,reset:se,highlightedIndex:ce,placeholder:pe,getSuggestionAction:e=>w(e,O,P,H,k||y.g),handleSuggestionSelected:q,selectItem:he}}},57955:(e,t,r)=>{r.d(t,{Z:()=>L});var i=r(36151),n=r(40836),o=r("__fusion__1507"),a=r("__fusion__678"),s=r(91931),l=r(75161),d=r(32857),c=r(68065),u=r(11841),h=r(88885),p=r(44133),g=r("__fusion__912"),m=r("__fusion__701"),Z=r(72238),f=r(21322),y=r("__fusion__1017"),v=r(32583),x=r(54669),b=r(33535),C=r(33990);const S={StartEnhancer:{style:e=>{let{$theme:t}=e;return{paddingRight:t.sizing.scale300,paddingLeft:t.sizing.scale300}}},EndEnhancer:{style:e=>{let{$theme:t}=e;return{paddingLeft:t.sizing.scale300,paddingRight:t.sizing.scale300}}},Input:{style:e=>{let{$theme:t}=e;return{paddingLeft:t.sizing.scale300}}},Root:{style:e=>{let{$theme:t}=e;return{paddingLeft:t.sizing.scale200,paddingRight:t.sizing.scale200,borderRadius:t.sizing.scale1200}}}},$={Root:{style:()=>({cursor:"pointer"})},LabelContent:{style:e=>{let{$theme:t}=e;return{color:t.colors.contentPrimary,...t.typography.LabelMedium}}},LabelDescription:{style:e=>{let{$theme:t}=e;return{color:t.colors.contentSecondary,...t.typography.ParagraphSmall}}}},_=(0,s.zo)("div",(e=>{let{$expanded:t}=e;return{display:"flex",flexDirection:"column",justifyContent:"flex-start",minHeight:t?"577px":"216px"}})),w=(0,s.zo)("div",(e=>{let{$theme:t}=e;return{...t.typography.HeadingSmall,display:"flex",justifyContent:"space-between",alignItems:"center",margin:`${t.sizing.scale800} ${t.sizing.scale550} ${t.sizing.scale300} ${t.sizing.scale800}`}})),z=(0,s.zo)("div",(e=>{let{$theme:t}=e;return{display:"flex",justifyContent:"flex-end",alignItems:"flex-end",margin:`${t.sizing.scale600} ${t.sizing.scale800}`,flexGrow:1}})),k=(0,s.zo)("div",(e=>{let{$theme:t}=e;return{marginLeft:t.sizing.scale800,marginRight:t.sizing.scale800}})),I=(0,s.zo)("ul",(e=>{let{$theme:t}=e;return{marginLeft:t.sizing.scale300,marginRight:t.sizing.scale300}})),O=e=>{let{open:t,onClose:r}=e;const[a,O]=(0,i.useState)(""),[,B]=(0,s.hQ)(),T=(0,x.Z)(),{locationSuggestions:P,handleLocationSelected:L,isLoading:D,hasLoaded:R}=(0,p.Z)({query:a}),E=(0,h.T)(),M=(0,b.ZP)(),U=a.length>0,H=P?.length>0;(0,i.useEffect)((()=>{t&&(M("eats:enter_delivery_address_start",{address:T?.address?.address1,latitude:T?.latitude,longitude:T?.longitude}),M("eats:store_ephemeral_address_input_modal_impression"))}),[t,M,T]),(0,i.useEffect)((()=>{D&&M("eats:store_ephemeral_address_input_modal_search")}),[D,M]);const A=()=>{O("")};return(0,C.tZ)(l.u_,{isOpen:t,onClose:r,children:(0,C.BX)(_,{$expanded:H,children:[(0,C.BX)(w,{children:[(0,C.tZ)(n.v,{id:"shared.enterDeliveryAddress"}),(0,C.tZ)(d.Z,{kind:c.TO.tertiary,shape:c.X3.circle,onClick:r,children:(0,C.tZ)(y.default,{size:20})})]}),(0,C.tZ)(k,{children:(0,C.tZ)(u.Z,{startEnhancer:e=>(0,C.tZ)(g.default,{...e,size:16,onClick:e=>e.stopPropagation()}),placeholder:E("location_manager.search_placeholder"),overrides:S,value:a,onChange:e=>O(e.target.value),endEnhancer:e=>D?(0,C.tZ)(v.$,{$size:20}):U?(0,C.tZ)(m.default,{...e,size:20,...e,onClick:A}):null})}),(0,C.BX)(I,{children:[P?.map((e=>(0,C.tZ)(Z.Z,{artwork:e=>(0,C.tZ)(o.default,{...e,size:20,color:B.colors.gray600}),overrides:$,onClick:()=>{M("eats:store_ephemeral_address_input_modal_select_location"),L(e)},children:(0,C.tZ)(f.Z,{description:e.addressLine2,children:e.addressLine1})},e.id))),R&&0===P?.length?(0,C.tZ)(Z.Z,{children:(0,C.tZ)(f.Z,{children:(0,C.tZ)(n.v,{id:"components.store_address_input.no_results"})})},"no-results"):null]}),H?(0,C.tZ)(z,{children:(0,C.tZ)(d.Z,{kind:c.TO.secondary,onClick:r,children:(0,C.tZ)(n.v,{id:"back"})})}):null]})})};var B=r(51170),T=r(94579);const P=(0,s.zo)("div",(e=>{let{$theme:t,$isHighlighted:r}=e;return{...t.typography.LabelSmall,height:t.sizing.scale950,paddingLeft:t.sizing.scale600,paddingRight:t.sizing.scale600,display:"flex",alignItems:"center",alignSelf:"center",gap:t.sizing.scale100,borderRadius:t.sizing.scale950,cursor:"pointer",":hover":{opacity:.8},whiteSpace:"nowrap",transition:T.pB.default,...r?{backgroundColor:t.colors.backgroundInversePrimary,color:t.colors.contentInversePrimary}:{backgroundColor:"transparent",color:t.colors.contentPrimary}}})),L=()=>{const[e,t]=(0,i.useState)(!1),{state:r}=(0,B.D)();return(0,C.BX)(C.HY,{children:[(0,C.BX)(P,{onClick:()=>t(!0),$isHighlighted:r.isAddressInputHighlighted,children:[(0,C.tZ)(o.default,{size:20}),(0,C.tZ)(n.v,{id:"shared.enterDeliveryAddress"}),(0,C.tZ)(a.default,{size:16})]}),(0,C.tZ)(O,{open:e,onClose:()=>t(!1)})]})}},12011:(e,t,r)=>{r.d(t,{Z:()=>ce});var i=r(36151),n=r(88885),o=r(91631),a=r(69404),s=r(47986),l=r(16372),d=r(58984),c=r(54669),u=r(87891),h=r(33535),p=r(78034),g=r(53213),m=r(19889),Z=r(52298),f=r(97450),y=r(93866),v=r(54176),x=r(30768),b=r(62149),C=r(64388),S=r(41878),$=r(53685),_=r(92060),w=r(26715),z=r(91931),k=r(87873),I=r(14770),O=r(36278),B=r(37555),T=r(79168),P=r("__fusion__701"),L=r(87444),D=r(33990);const R=(0,z.zo)("div",(e=>{let{$theme:t,$isFocused:r,$maxWidth:i}=e;return{...t.typography.LabelMedium,backgroundColor:t.colors.inputFill,color:t.colors.inputText,width:"100%",display:"flex",position:"absolute",height:"48px",borderRadius:t.borders.pillButtonBorderRadius,alignItems:"center",left:"50%",transform:"translate(-50%, -50%)",...r?{maxWidth:"1494px",minWidth:"600px"}:{maxWidth:"1036px",minWidth:"180px"},...i?{maxWidth:i}:void 0,transition:"min-width 400ms ease, max-width 400ms ease"}})),E=(0,z.zo)("div",(e=>{let{$theme:t,$isFocused:r,$maxWidth:i}=e;return{...t.typography.LabelMedium,backgroundColor:t.colors.inputFill,color:t.colors.inputText,width:"100%",display:"flex",height:t.sizing.scale1200,borderRadius:t.borders.pillButtonBorderRadius,alignItems:"center",...r?{maxWidth:"1494px"}:{maxWidth:`${i??1036}px`},transition:`min-width ${t.animation.timing400} ease, max-width ${t.animation.timing400} ease`}})),M=(0,z.zo)("div",(e=>({display:"flex",flexShrink:0,alignSelf:"center",marginLeft:e.$theme.sizing.scale600,marginRight:e.$theme.sizing.scale500}))),U=(0,z.zo)("input",(e=>({flex:1,backgroundColor:e.$theme.colors.inputFill,...e.$width?{width:`${e.$width}px`}:{},appearance:"none",outline:"none","::placeholder":{..."mini"===e.$size?e.$theme.typography.LabelSmall:e.$theme.typography.LabelMedium,color:e.$theme.colors.contentSecondary},textOverflow:"ellipsis",overflow:"hidden",caretColor:e.$theme.colors.eatsBusiness}))),H=(0,z.zo)("button",(e=>{let{$theme:t}=e;return{...t.typography.LabelMedium,color:t.colors.contentTertiary,cursor:"pointer",display:"flex",alignItems:"center"}})),A=(0,z.zo)("div",(e=>{let{$theme:t}=e;return{width:"1px",margin:"0 16px",backgroundColor:t.colors.borderOpaque}})),X=(0,z.zo)(I.Z,{cursor:"pointer"}),F=e=>{const[t,r]=i.useState(!1),[n,o]=i.useState(!0),a=i.useRef(null),s=(0,h.ZP)(),l=(0,L.Z)("drafting_search_repolish_fancy_search_bar"),{value:d,...c}=e.getInputProps({onFocus:()=>{e.onFocus&&e.onFocus(),e.setExpandedState&&e.setExpandedState(),r(!0),0===d?.length&&o(!0)},onChange:t=>{n&&(s("eats:search_type_started",{numberRecentSearchSuggestions:e.numberRecentSearchSuggestions}),o(!1))},onBlur:()=>{r(!1)},onInput:t=>{e.onInput&&e.onInput(t)},ref:a});i.useEffect((()=>{e.expandedState&&a.current&&a.current.focus()}),[e.expandedState]);const u=e.expandedState&&e.query.length>0,p=(0,T.Z)(e.size),g=l?E:R;return(0,D.tZ)(D.HY,{children:(0,D.BX)(g,{$isFocused:e.expandedState||t,$style:p,$maxWidth:e.size?"100%":void 0,children:[(0,D.tZ)(M,{children:(0,D.tZ)(k.Z,{size:16})}),(0,D.tZ)(U,{...c,value:d||"",type:"text",autoComplete:"off",name:"searchTerm",placeholder:e.placeholder,$width:e.queryWidth,onKeyDown:t=>{t.keyCode===B.q7&&e.handleEnterClick&&e.query.length>0&&e.handleEnterClick()},$size:e.size}),(0,D.tZ)(O.ZP,{$width:"8px"}),u?(0,D.BX)(D.HY,{children:[(0,D.tZ)(H,{type:"button",onClick:()=>{e.reset(),a.current&&(a.current.focus(),e.setExpandedState&&e.setExpandedState())},children:(0,D.tZ)(P.default,{size:16})}),(0,D.tZ)(O.IQ,{})]}):null,e.onClose&&e.query.length>0?(0,D.tZ)(A,{}):null,e.onClose?(0,D.tZ)(X,{onClick:e.onClose}):null]})})};var V=r(46280),Q=r(69086),N=r(44692),W=r(22849);const G=(0,z.zo)("ul",(e=>{let{$theme:t}=e;return{width:"100%"}})),Y=(0,z.zo)("li",(e=>({backgroundColor:"transparent",height:"64px",cursor:"pointer",display:"flex",alignItems:"center",outline:"none",...e.$showBackground?{":hover":{background:e.$theme.colors.menuFillHover}}:{},transition:"opacity .45s .5s,visibility .45s .5s,transform .45s ease .3s",transform:"translateY(0)",whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden"})));const q=function(e){if(!e.suggestions?.length)return null;const t=e.vertical===W.Cf.ALCOHOL?12:6;let r;return e.query?r=e.suggestions.slice(0,7):(r=e.suggestions.slice(0,t),r.length>1&&"sectionTitle"===r[r.length-1].type&&r.pop()),(0,D.tZ)(G,{...e.getMenuProps(),children:r.map(((t,i)=>{const n=i<r.length-1,o=e.getSuggestionAction(t);return(0,D.tZ)(Y,{...e.getItemProps({index:i,disabled:"sectionTitle"===t.type}),onClick:()=>{e.onItemClick(t,i)},$showBackground:"sectionTitle"!==t.type,children:"sectionTitle"===t.type?(0,D.tZ)(N.L1,{title:t.title},i):"text"===t.type||"searchText"===t.type?(0,D.tZ)(N.rG,{item:{title:t.title,iconType:"search",url:o},hasBorder:n}):"searchHistory"===t.type?(0,D.tZ)(N.rG,{item:{title:t.title||"",iconType:"clock",eventData:void 0,url:o},hasBorder:n},i):"store"===t.type||"croStore"===t.type?(0,D.tZ)(Q.Z,{store:t.store,hasBorder:n,url:o}):"popularCategory"===t.type?(0,D.tZ)(N.rG,{item:{title:t.title||"",url:o,iconType:"search"},hasBorder:n},i):null},i)}))})};var j=r(19566),K=r(80803),J=r(40606),ee=r(66740),te=r(93801),re=r(55758),ie=r(43675),ne=r(32762),oe=r(28700),ae=r(1604),se=r(81702),le=r(86695),de=r(40964);const ce=e=>{let{storeUuid:t,isSearchFeed:r,wrapperRef:k,expandedState:I,setExpandedState:O,size:B}=e;const[T,P]=(0,z.hQ)(),R=(0,d.I0)(),E=(0,o.k6)(),M=(0,n.T)(),U=(0,b.TH)(),H=(0,c.Z)(),{showSearchHome:A,setShowSearchHome:X}=(0,se.Z)(),Q=(0,ae.Z)(),N=(0,u.t)({dropPastOrders:!0}),W=(0,re.d)(),G=Boolean("DELIVERY"===W),Y=N.data?.verticalSuggestionLists,ce=(0,o.UO)(),{store:ue}=(0,C.ZP)(t),he=ue?.data?.title||"",pe=ue.data&&(0,de.A)(ue.data),{desktopFeatures:ge}=(0,ne.Z)(),me=(0,L.Z)("drafting_search_repolish_fancy_search_bar");(0,i.useEffect)((()=>{Y&&R((0,p.Vw)(Y))}),[R,Y]);const Ze=(0,h.ZP)();(0,i.useEffect)((()=>{Ze("eats:search_bar_impression")}),[Ze]);const{userQuery:fe,vertical:ye,storeSearchQuery:ve,entryPoint:xe}=(0,s.RAN)(U,["userQuery","vertical","storeSearchQuery","entryPoint"]),[be,Ce]=(0,i.useState)(ye||_.g);(0,i.useEffect)((()=>{Ce(ye||_.g)}),[ye]);const Se=(0,x.Z)(),$e=Boolean(t)?l.OT.STORE_SEARCH:r?l.OT.GLOBAL_SEARCH:""!==Se?l.OT.VERTICAL_FEED:l.OT.HOME_FEED,{feed:_e}=(0,v.Z)(),we=()=>{Ze("eats:search_multi_vertical_bar_click"),Ze("eats:search_bar_clicked"),O(!0)},ze=()=>{Ze("eats:search_bar_closed"),O(!1)},{query:ke,results:Ie,getInputProps:Oe,reset:Be,placeholder:Te,getLabelProps:Pe,getItemProps:Le,getMenuProps:De,getSuggestionAction:Re}=(0,S.ZP)({..."shoppingList"===xe?{initialQuery:fe}:{initialQuery:fe||ve},initialIsClosed:!0,searchTypeaheadPlaceholder:M("shared.searchBarHintText"),vertical:be||_.g,onSuggestionSelected:ze,isMultiVerticalDesktop:!0}),Ee=Ie.data||[],Me=()=>{""===ke&&"HOME_FEED"===$e&&Ze("eats:search_start",{page:U.pathname,hasDeliveryLocation:Boolean(H),mvsMeta:{verticalList:Y?.map((e=>e.verticalType)).join(",")||"",selectedVertical:be||_.g},searchSource:$e,numberRecentSearchSuggestions:(0,$.C)(Ee)})},Ue=()=>{Ce(ye||_.g),r||(X(!0),Be()),ze()},He=()=>{Ze("eats:search_end",{userQuery:ke,page:U.pathname,hasDeliveryLocation:Boolean(H),searchType:"manual"}),E.push((0,s.Xqq)(U,{vertical:be||_.g,userQuery:ke,searchSource:l.xH.SEARCH_BAR,searchType:l.Sc.GLOBAL_SEARCH})),ze()};(0,g.Z)(k,(()=>{Ue()}),I),(0,m.Z)((()=>{ze(),document.activeElement instanceof HTMLInputElement&&document.activeElement.blur()}));const Ae=Boolean(he)&&!ge.hasNewInStoreSearch,Xe=Ae?M("shared.searchInQuery",{query:he}):Te,Fe=(0,K.dI)(),Ve=e=>{ze(),Ze("eats:search_end",{userQuery:e?.title,page:U.pathname,hasDeliveryLocation:Boolean(H),mvsMeta:{verticalList:(Y||[]).map((e=>e.verticalType)).join(","),selectedVertical:be||_.g},searchType:"suggestion"})},Qe=(0,D.BX)(D.HY,{children:[(0,D.tZ)(V.cI,{children:(0,D.tZ)(V.im,{role:"search","aria-label":M("shared.searchBarHintText"),children:(0,D.BX)(a.Z,{"data-testid":"multi-vertical-desktop-global-search-bar-wrapper",children:[(0,D.tZ)(V.E7,{...Pe(),children:Xe}),Ae?(0,D.tZ)(w.Z,{query:ke,getInputProps:Oe,reset:()=>{Be(),Ze("eats:store_search_clear",{storeUuid:ue?.data?.uuid||""})},placeholder:Xe,setExpandedState:we,expandedState:I,handleEnterClick:()=>(()=>{const e=(0,s.WxO)(ce),t=(0,s.CiO)(U,["entryPoint"]),r=(0,s.AC5)({location:t,args:e,storeSearchQuery:ke,isOfd:!pe&&ge.hasNewInStoreSearch});E.push(r),ze(),Ze("eats:store_search_fetch_results_enter_press",{storeUuid:ue?.data?.uuid||"",storeSearchQuery:ke})})(),onFocus:()=>{Ze("eats:store_search_grocery_entrypoint_click",{storeUuid:ue?.data?.uuid||""}),ke&&""!==ke||Fe({searchSource:$e,searchDataInfoLayer:"L1",searchDataInfoTab:"SHOP"})},size:B}):(0,D.tZ)(F,{query:ke,getInputProps:Oe,reset:()=>{Be(),X(!0)},placeholder:Te,setExpandedState:we,expandedState:I,verticalLists:Y,handleEnterClick:()=>He(),isSearchFeed:r,isCategoryPage:"CATEGORY_PAGE"===_e.data?.searchDisplayConfig,onFocus:Me,onInput:e=>{e.target.value?X(!1):X(!0)},size:B,numberRecentSearchSuggestions:(0,$.C)(Ee)})]})})}),I?(0,D.BX)(V.F$,{$style:{marginLeft:"mini"===B?P.sizing.scale700:P.sizing.scale950},children:[(0,D.tZ)(le.zx,{kind:"tertiary",shape:"circle",title:M("close"),onClick:Ue,children:(0,D.tZ)(f.Z,{size:18})}),(0,D.tZ)(y.Z,{})]}):null,Ae?null:(0,D.tZ)(V.eh,{$showPopover:I,children:(0,D.BX)(V.YD,{$showPopover:I,$needsPadding:!0,children:[G?(0,D.tZ)(j.Z,{onSelect:e=>{Ce(e)},selectedVertical:be||_.g,expandedState:I,surface:"ZERO_STATE"}):null,Q?(0,D.BX)(V.Cz,{$needsLeftMargin:!0,children:[A?null:Ee.length>0?(0,D.tZ)(oe.Z,{suggestions:Ee,getMenuProps:De,getItemProps:Le,onItemClick:Ve,getSuggestionAction:Re}):(0,D.tZ)(V.p5,{}),A?(0,D.tZ)(J.Z,{source:{isLoading:N.isLoading,hasLoaded:N.isFetched,data:N.data,error:N.error},error:()=>(0,D.tZ)(te.nQ,{code:500}),loaded:e=>(0,D.tZ)(ie.Z,{selectedVertical:be||_.g,searchHomeResults:(e.verticalSearchHomeResults||{})[be||_.g]??[],verticalList:e.verticalSuggestionLists||[],onItemClick:Ve}),loading:()=>(0,D.tZ)(ee.Z,{itemNumbers:[5,3]})}):null,(0,D.tZ)(Z.ZP,{$height:69})]}):(0,D.BX)(V.Cz,{children:[(0,D.tZ)(Z.ZP,{$height:20}),Ee.length>0?(0,D.tZ)(q,{vertical:be,suggestions:Ee,getMenuProps:De,getItemProps:Le,query:ke,onItemClick:Ve,getSuggestionAction:Re}):(0,D.tZ)(V.p5,{}),(0,D.tZ)(Z.ZP,{$height:69})]})]})})]});if(me){const e=(0,D.BX)(V.vr,{$expanded:I,children:[(0,D.BX)(V.kN,{$expanded:I,children:[(0,D.tZ)(V.E7,{...Pe(),children:Xe}),(0,D.tZ)(F,{query:ke,getInputProps:Oe,reset:()=>{Be(),X(!0)},placeholder:Te,setExpandedState:we,expandedState:I,verticalLists:Y,handleEnterClick:()=>He(),isSearchFeed:r,isCategoryPage:"CATEGORY_PAGE"===_e.data?.searchDisplayConfig,onFocus:Me,onInput:e=>{e.target.value?X(!1):X(!0)},size:B,numberRecentSearchSuggestions:(0,$.C)(Ee)})]}),(0,D.tZ)(V.bf,{$showPopover:I,children:(0,D.BX)(V.YD,{$showPopover:I,$needsPadding:!1,children:[G?(0,D.tZ)(j.Z,{onSelect:e=>{Ce(e)},selectedVertical:be||_.g,expandedState:I,surface:"ZERO_STATE"}):null,(0,D.BX)(V.Cz,{$needsLeftMargin:!0,children:[A?null:Ee.length>0?(0,D.tZ)(oe.Z,{suggestions:Ee,getMenuProps:De,getItemProps:Le,onItemClick:Ve,getSuggestionAction:Re}):(0,D.tZ)(V.p5,{}),A?(0,D.tZ)(J.Z,{source:{isLoading:N.isLoading,hasLoaded:N.isFetched,data:N.data,error:N.error},error:()=>(0,D.tZ)(te.nQ,{code:500}),loaded:e=>(0,D.tZ)(ie.Z,{selectedVertical:be||_.g,searchHomeResults:(e.verticalSearchHomeResults||{})[be||_.g]??[],verticalList:e.verticalSuggestionLists||[],onItemClick:Ve}),loading:()=>(0,D.tZ)(ee.Z,{itemNumbers:[5,3]})}):null,(0,D.tZ)(Z.ZP,{$height:69})]})]})})]});return(0,D.BX)(D.HY,{children:[(0,D.tZ)(V.ag,{$showOverlay:I,onClick:Ue}),e]})}return Qe}},23401:(e,t,r)=>{r.d(t,{Z:()=>re});var i=r(36151),n=r(88885),o=r(91631),a=r(86695),s=r(91931),l=r(69404),d=r(47986),c=r(16372),u=r(58984),h=r(87891),p=r(33535),g=r(78034),m=r(53213),Z=r(19889),f=r(36278),y=r(97450),v=r(93866),x=r(55811),b=r(30768),C=r(62149),S=r(43193),$=r(38604),_=r(14869),w=r(42751),z=r(45631),k=r(24236),I=r(33990);const O=()=>null,B=(0,s.zo)("div",{display:"flex"}),T=(0,s.zo)("div",{display:"flex",width:"100%"}),P=(0,s.zo)("div",{display:"flex",width:"inherit",flexDirection:"column"}),L=(0,s.zo)("div",(e=>{let{$numOfColumns:t}=e;return{display:"grid",gridTemplateColumns:`repeat(${t}, 1fr)`,width:"inherit"}})),D=(0,s.zo)("div",{display:"flex",width:"100%"}),R=e=>{let{item:t,index:r,compositionMap:n,virtualListScrollEl:o,isGrocery:a,fallbackErrorComponent:s,emitEvent:l,handleSuggestionSelected:d}=e;const c=s||O,{elementRef:u,isElementHidden:h}=(0,k.Z)({initialHidden:!0,waitTime:0,shouldListen:!0}),p=t.type;if(i.useEffect((()=>{!h&&l&&"content"===p&&t?.content?.template.serverDrivenUI&&l(t?.content?.template.serverDrivenUI)}),[l,h,t?.content?.template.serverDrivenUI,p]),"container"===p){const e=t.container;return(0,I.tZ)(E,{bloxContainer:e,compositionMapGlobal:n,virtualListScrollEl:o,isGrocery:a,emitEvent:l})}if("content"===p){const e=t?.content?.template.serverDrivenUI;if(!e)return(0,I.BX)(I.HY,{children:[(0,I.tZ)(c,{}),";",(0,I.tZ)(_.Z,{children:(0,I.tZ)(i.Fragment,{children:(0,I.tZ)(B,{children:"Container serverDrivenUIItem did not load"})},r)})]});const o=e?.compositionKey,a=o&&n?n[o]:{};if(!a?.root?.escapedJsonData||a?.root?.jsonData){const e=JSON.stringify(a?.root);return(0,I.BX)(_.Z,{children:[(0,I.tZ)(B,{children:"Web client needs escapedJsonData not jsonData"}),e]})}return(0,I.tZ)(D,{ref:u,onClick:()=>{d(e,r)},"data-testid":"blox-parser-suggestion-item",children:(0,I.tZ)($.Z,{index:r,encodedViewModel:a?.root,data:e?.elements||null,clientViews:e?.clientViews,analytics:e?.analytics})},r)}return(0,I.BX)(I.HY,{children:[(0,I.tZ)(c,{}),";",(0,I.BX)(i.Fragment,{children:[(0,I.tZ)(_.Z,{children:"Container Item did not load"}),";"]},r)]})},E=e=>{let{bloxContainer:t,compositionMapGlobal:r,virtualListScrollEl:n,isGrocery:o,fallbackErrorComponent:a,emitEvent:s,handleSuggestionSelected:l}=e;const d=a||O,c=t.items,u=t.compositionMap||r,h=t.type,p="vertical"===h?.type?Number(h.vertical.columnCount):1,g=i.useMemo((()=>(0,z.Z)(c,p)),[p,c]),m=i.useMemo((()=>c.length<=1&&"content"===c[0]?.type||c.length>1?g:g[0]),[c,g]);return t&&t.type?(0,I.tZ)(T,{children:(0,I.tZ)(P,{children:o&&p>=2?(0,I.tZ)(w.ZP,{calculateHeight:()=>224,scrollEl:n,children:m&&m.map(((e,t)=>(0,I.tZ)(L,{$numOfColumns:p,children:e.map(((e,t)=>(0,I.tZ)(R,{item:e,index:t,compositionMap:u,virtualListScrollEl:n,isGrocery:o,fallbackErrorComponent:a,emitEvent:s,handleSuggestionSelected:l},`${t}-ivl`)))},`${t}-gc`)))}):(0,I.tZ)(I.HY,{children:c.map(((e,t)=>(0,I.tZ)(R,{item:e,index:t,compositionMap:u,virtualListScrollEl:n,isGrocery:o,fallbackErrorComponent:a,emitEvent:s,handleSuggestionSelected:l},`${t}-non-ivl`)))})})}):(0,I.BX)(I.HY,{children:[(0,I.tZ)(d,{}),";",(0,I.tZ)(_.Z,{children:(0,I.tZ)(B,{children:"Error in Container Component"})})]})},M=i.memo(E);var U=r(99990),H=r(49160),A=r(80803);const X=(0,s.zo)("div",{margin:0,padding:0,width:"100%",height:"100%"}),F=e=>{let{searchSuggestBloxResponse:t,handleSuggestionSelected:r}=e;const i=(0,p.ZP)(),n=S.useRef(!1),{store:o}=(0,U.QT)(),a=(0,H.Z)(o.data),s=o.data?(0,A.tl)(o.data,a):void 0;return S.useEffect((()=>{if(t?.bloxContainer?.items&&!n.current){n.current=!0;t.bloxContainer.items.forEach(((e,t)=>{if("content"===e.type&&"serverDrivenUI"===e.content.template?.type){const r=e.content.template.serverDrivenUI.analytics?.data?.maps?.stringMap;i("eats:store_search_suggestion_impression",{displaySurface:r?.displaySurface&&String(r?.displaySurface),searchSuggestion:r?.searchSuggestion&&String(r?.searchSuggestion),searchTerm:r?.searchTerm&&String(r?.searchTerm),storeUuid:r?.storeUuid&&String(r?.storeUuid),suggestionType:r?.suggestionType&&String(r?.suggestionType),itemPosition:t,storeLayout:s})}}))}}),[i,t?.bloxContainer?.items,s]),t&&t?.bloxContainer?null===t?.bloxContainer.items?null:(0,I.tZ)(X,{"data-testid":"desktop-in-store-suggestions",children:(0,I.tZ)(M,{bloxContainer:t.bloxContainer,compositionMapGlobal:t.bloxContainer?.compositionMap,handleSuggestionSelected:r})}):null};var V=r(64388),Q=r(15070),N=r(41497),W=r(54669),G=r(20568),Y=r(87444);const q=e=>{let{initialQuery:t,onSuggestionSelected:r,initialIsClosed:o,searchTypeaheadPlaceholder:a,vertical:s,store:l}=e;const c=(0,C.TH)(),u=(0,n.T)(),h=(0,W.Z)(),p=(0,G.Z)("searchSuggestV2"),g=(0,Y.Z)("clear_search_results_cache_on_location_change"),{embeddedFeatures:{xlbHeaderBridge:m}}=(0,Q.v)((e=>{let{embeddedFeatures:t}=e;return{embeddedFeatures:t}})),{userQuery:Z}=(0,d.RAN)(c,["userQuery"]),f=i.useCallback((async e=>{r&&r()}),[r]),y=i.useCallback((async e=>{if(!e)return[];return[await p({userQuery:e,storeUuid:l?.data?.uuid||"",storeLocation:l?.data?.location,locationType:l?.data?.location?.locationType,parentChainUuid:l?.data?.parentChain?.uuid||"",webClientType:"DESKTOP"})]}),[p,l?.data?.uuid,l?.data?.location,l?.data?.parentChain?.uuid]),v=i.useCallback((e=>{let{results:t,query:r}=e;return 0===t.length?r?u("shared.noSuggestionsForTerm",{searchTerm:r}):"":r?u("components.MarketplaceSearch.resultsDescription",{numResults:t.length,searchTerm:r}):u("shared.searchResultsCount",{resultsCount:t.length})}),[]),{query:x,results:b,getLabelProps:S,getInputProps:$,getMenuProps:_,getItemProps:w,reset:z,openMenu:k,isOpen:I,highlightedIndex:O,clearCacheAndRefetchResults:B,selectItem:T}=(0,N.Z)({id:"search-suggestions-typeahead",initialQuery:t||Z,fetchResults:y,initialIsClosed:o,onResultSelected:f,getQueryFromResult:e=>"",getA11yStatusMessage:v,fetchResultsTrigger:s,updateInputOnSelectedItemChange:!0}),P=a||u("shared.searchPlaceholder");return i.useEffect((()=>{g&&B&&B()}),[h]),{query:x,results:b,isOpen:I,getLabelProps:S,getInputProps:$,getMenuProps:_,getItemProps:w,openMenu:k,reset:z,highlightedIndex:O,placeholder:m?"":P,getSuggestionAction:e=>({type:"unknown"}),handleSuggestionSelected:f,selectItem:T}};var j=r(92060),K=r(26715),J=r(46280),ee=r(32762),te=r(40964);const re=e=>{let{storeUuid:t,isSearchFeed:r,wrapperRef:S,expandedState:$,setExpandedState:_,size:w}=e;const[z,k]=(0,s.hQ)(),O=(0,u.I0)(),B=(0,o.k6)(),T=(0,n.T)(),P=(0,C.TH)(),L=(0,h.t)({dropPastOrders:!0}).data?.verticalSuggestionLists,D=(0,o.UO)(),{store:R}=(0,V.ZP)(t),E=R.data&&(0,te.A)(R.data),M=R?.data?.title||"",U=(0,A.dI)(),{desktopFeatures:H}=(0,ee.Z)();(0,i.useEffect)((()=>{L&&O((0,g.Vw)(L))}),[O,L]);const X=(0,p.ZP)();(0,i.useEffect)((()=>{X("eats:search_bar_impression")}),[X]);const{userQuery:Q,vertical:N,storeSearchQuery:W,entryPoint:G}=(0,d.RAN)(P,["userQuery","vertical","storeSearchQuery","entryPoint"]),[Y,re]=(0,i.useState)(N||j.g);(0,i.useEffect)((()=>{N&&re(N)}),[N]);const ie=(0,b.Z)(),ne=Boolean(t)?c.OT.STORE_SEARCH:r?c.OT.GLOBAL_SEARCH:""!==ie?c.OT.VERTICAL_FEED:c.OT.HOME_FEED,oe=()=>{X("eats:search_bar_closed"),_(!1)},{query:ae,results:se,getInputProps:le,reset:de,placeholder:ce,getLabelProps:ue,selectItem:he}=q({..."shoppingList"===G?{initialQuery:Q}:{initialQuery:Q||W},initialIsClosed:!0,searchTypeaheadPlaceholder:T("shared.searchBarHintText"),vertical:Y,onSuggestionSelected:oe,isMultiVerticalDesktop:!0,store:R}),pe=se.data||[],ge=()=>{re(N),oe()},me=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";const t=(0,d.WxO)(D),r=(0,d.CiO)(P,["entryPoint","sortAndFilters"]),i=(0,d.AC5)({location:r,args:t,storeSearchQuery:e||ae,isOfd:!E&&H.hasNewInStoreSearch});B.push(i),oe(),X("eats:store_search_fetch_results_enter_press",{storeUuid:R?.data?.uuid||"",storeSearchQuery:e||ae})};(0,m.Z)(S,(()=>{ge()}),$),(0,Z.Z)((()=>{oe(),document.activeElement instanceof HTMLInputElement&&document.activeElement.blur()}));const Ze="postmates"===(0,x.Z)(),fe=Boolean(M)&&!H.hasNewInStoreSearch?T("shared.searchInQuery",{query:M}):ce;return(0,I.BX)(I.HY,{children:[(0,I.tZ)(J.cI,{children:(0,I.tZ)(J.im,{role:"search","aria-label":T("shared.searchBarHintText"),children:(0,I.BX)(l.Z,{"data-testid":"multi-vertical-desktop-in-store-search-bar-wrapper",children:[(0,I.tZ)(J.E7,{...ue(),children:fe}),(0,I.tZ)(K.Z,{query:ae,getInputProps:le,reset:()=>{de(),X("eats:store_search_clear",{storeUuid:R?.data?.uuid||""})},placeholder:fe,setExpandedState:()=>{X("eats:search_multi_vertical_bar_click"),X("eats:search_bar_clicked"),_(!0)},expandedState:$,handleEnterClick:()=>me(),onFocus:()=>{X("eats:store_search_grocery_entrypoint_click",{storeUuid:R?.data?.uuid||""}),ae&&""!==ae||U({searchSource:ne,searchDataInfoLayer:"L1",searchDataInfoTab:"SHOP"})},size:w})]})})}),$?(0,I.tZ)(I.HY,{children:(0,I.BX)(J.F$,{$style:{marginLeft:"mini"===w?k.sizing.scale700:k.sizing.scale950},children:[(0,I.tZ)(a.zx,{kind:"tertiary",shape:"circle",title:T("close"),onClick:ge,children:(0,I.tZ)(y.Z,{size:18})}),(0,I.tZ)(v.Z,{})]})}):null,(e=>!!(e&&e.length&&e.length>0)&&Boolean(e[0]?.bloxContainer?.items))(pe)?(0,I.BX)(J.eh,{$showPopover:$,children:[(0,I.tZ)(f.KG,{$width:Ze?J.aG:J.Bq}),(0,I.tZ)(J.YD,{$showPopover:$,children:(0,I.tZ)(J.Cz,{children:(0,I.tZ)(F,{searchSuggestBloxResponse:pe[0],handleSuggestionSelected:(e,t)=>{if(e){const r=e?.analytics?.data?.maps?.stringMap,i=r?.searchSuggestion;r&&i&&(X("eats:store_search_suggestion_click",{displaySurface:r?.displaySurface&&String(r?.displaySurface),searchSuggestion:r?.searchSuggestion&&String(r?.searchSuggestion),searchTerm:r?.searchTerm&&String(r?.searchTerm),storeUuid:r?.storeUuid&&String(r?.storeUuid),suggestionType:r?.suggestionType&&String(r?.suggestionType),itemPosition:t}),he(i),me(i))}}})})}),(0,I.tZ)(f.KG,{$width:J.Od})]}):null]})}},46280:(e,t,r)=>{r.d(t,{E7:()=>ae,YD:()=>ce,sA:()=>re,ag:()=>q,p5:()=>K,qX:()=>te,aV:()=>Y,aG:()=>W,Od:()=>G,Bq:()=>N,FE:()=>j,bf:()=>le,vr:()=>ne,F$:()=>ie,eh:()=>de,cI:()=>oe,kN:()=>se,Cz:()=>J,im:()=>ee,ZP:()=>ue});var i=r(91931),n=r(15208),o=r(94579),a=r(1795),s=r(64388),l=r(94072),d=r(70940),c=r(36151),u=r(43193),h=r(92839),p=r(54403),g=r(9071),m=r(52419),Z=r(96965),f=r(93866),y=r(83563),v=r(60582),x=r(639),b=r(58984),C=r(36278),S=r(54176),$=r(87891),_=r(54669),w=r(34626),z=r(4525),k=r(28222),I=r(80165),O=r(78034),B=r(33879),T=r(69630),P=r(46857),L=r(929),D=r(33535),R=r(19889),E=r(57955),M=r(32762),U=r(23401),H=r(33990);const A=e=>{let{shouldNotRedirectToHomeFeed:t,showDiningMode:r,showCart:i,isSearchFeed:n,showSigninSignup:o,customizedDiningModeToggle:a,logSignInSignUpClick:s,campaign:l,storeUuid:d,isSchedulable:A}=e;const{user:X}=(0,w.Z)(),F=(0,b.I0)(),V=(0,k.Z)(),Q=(0,_.Z)(),N=(0,$.t)({dropPastOrders:!0}).data?.verticalSuggestionLists,W=(0,D.ZP)();(0,c.useEffect)((()=>{N&&F((0,O.Vw)(N))}),[F,N]),(0,c.useEffect)((()=>{W("eats:search_bar_impression")}),[W]);const G=(0,I.WI)("header-location-typeahead"),{closeAndUpdate:q}=(0,z.Z)(),K=(0,T.Z)(),[J,ne]=(0,c.useState)(!1),oe=Boolean(d),{feed:ae}=(0,S.Z)(),{isStoreOfdRedesignPhase2XpEnabled:se}=(0,M.Z)();let le;le=K?(0,H.tZ)(B.Z,{startShoppingRedirect:!n&&!oe}):(0,H.tZ)(p.Z,{});const de=u.useRef(null);(0,R.Z)((()=>{ne(!1)}));const{headerHeight:ce}=(0,L.Z)(),ue=Q?.address.address1||"";let he;return he=se?(0,H.BX)(H.HY,{children:[(0,H.tZ)(E.Z,{}),(0,H.tZ)(re,{})]}):(0,H.BX)(H.HY,{children:[(0,H.tZ)(C.ZP,{$width:"64px"}),(0,H.tZ)(te,{children:(0,H.tZ)(x.Z,{registerRef:G,onLocationSelected:e=>{q(e,void 0,t)},initialQuery:ue,id:"header"})}),(0,H.tZ)(re,{})]}),(0,H.tZ)(Y,{$showOverlay:J,children:(0,H.tZ)(ee,{ref:de,children:(0,H.BX)(j,{$headerHeight:ce,children:[V?null:(0,H.BX)(H.HY,{children:[(0,H.tZ)(m.Z,{}),(0,H.tZ)(C.ZP,{$width:"32px"}),(0,H.tZ)(y.Z,{}),(0,H.tZ)(C.ZP,{$width:se&&!Q?"8px":"40px"})]}),Q?(0,H.BX)(H.HY,{children:[J?null:(0,H.BX)(H.HY,{children:[r?(0,H.BX)(H.HY,{children:[a||(0,H.tZ)(g.Z,{isDisabled:ae.isLoading}),(0,H.tZ)(C.ZP,{$width:"16px"})]}):null,(0,H.tZ)(Z.Z,{size:"large",storeUuid:d,isSchedulable:A}),(0,H.tZ)(C.ZP,{$width:"48px"})]}),V?null:(0,H.tZ)(U.Z,{wrapperRef:de,expandedState:J,setExpandedState:ne,isSearchFeed:n,storeUuid:d})]}):he,(0,H.tZ)(ie,{children:J?null:(0,H.BX)(H.HY,{children:[Q||i?(0,H.tZ)(h.Z,{}):null,(0,H.tZ)(H.HY,{children:le}),(0,H.tZ)(f.Z,{}),X.data?.isLoggedIn?null:(0,H.BX)(H.HY,{children:[(0,H.tZ)(C.ZP,{$width:"24px"}),o?(0,H.tZ)(v.m,{campaign:l}):(0,H.tZ)(P.Z,{campaign:l,beforeClick:()=>{s&&s("signin","header")}})]})]})})]})})})};var X=r(12011);const F=(0,i.zo)("div",{flex:"1 0 0"}),V=e=>{let{shouldNotRedirectToHomeFeed:t,showDiningMode:r,showCart:i,isSearchFeed:n,showSigninSignup:o,customizedDiningModeToggle:a,logSignInSignUpClick:s,campaign:l,storeUuid:d,isSchedulable:b}=e;const{user:$}=(0,w.Z)(),O=(0,k.Z)(),D=(0,_.Z)(),R=(0,I.WI)("header-location-typeahead"),{closeAndUpdate:U}=(0,z.Z)(),A=(0,T.Z)(),[V,Q]=(0,c.useState)(!1),N=Boolean(d),{feed:W}=(0,S.Z)(),{isStoreOfdRedesignPhase2XpEnabled:G}=(0,M.Z)();let q;q=A?(0,H.tZ)(B.Z,{startShoppingRedirect:!n&&!N}):(0,H.tZ)(p.Z,{});const K=u.useRef(null),{headerHeight:J}=(0,L.Z)(),ne=D?.address?.address1||"";let oe;return oe=G?(0,H.BX)(H.HY,{children:[(0,H.tZ)(E.Z,{}),(0,H.tZ)(re,{})]}):(0,H.BX)(H.HY,{children:[(0,H.tZ)(C.ZP,{$width:"64px"}),(0,H.tZ)(te,{children:(0,H.tZ)(x.Z,{registerRef:R,onLocationSelected:e=>{U(e,void 0,t)},initialQuery:ne,id:"header"})}),(0,H.tZ)(re,{})]}),(0,H.tZ)(Y,{$showOverlay:V,children:(0,H.tZ)(ee,{ref:K,children:(0,H.BX)(j,{$headerHeight:J,children:[O?null:(0,H.BX)(H.HY,{children:[(0,H.tZ)(m.Z,{}),(0,H.tZ)(C.ZP,{$width:"32px"}),(0,H.tZ)(y.Z,{}),(0,H.tZ)(C.ZP,{$width:G&&!D?"8px":"24px"})]}),D?(0,H.BX)(H.HY,{children:[V?null:(0,H.BX)(H.HY,{children:[r?(0,H.BX)(H.HY,{children:[a||(0,H.tZ)(g.Z,{isDisabled:W.isLoading}),(0,H.tZ)(C.ZP,{$width:"16px"})]}):null,(0,H.tZ)(Z.Z,{size:"large",storeUuid:d,isSchedulable:b}),O?(0,H.tZ)(F,{}):(0,H.tZ)(C.ZP,{$width:"16px"})]}),O?null:(0,H.tZ)(X.Z,{wrapperRef:K,expandedState:V,setExpandedState:Q,isSearchFeed:n,storeUuid:d})]}):oe,V?null:(0,H.BX)(ie,{children:[D||i?(0,H.tZ)(h.Z,{}):null,(0,H.tZ)(H.HY,{children:q}),(0,H.tZ)(f.Z,{}),$.data?.isLoggedIn?null:(0,H.BX)(H.HY,{children:[(0,H.tZ)(C.ZP,{$width:"24px"}),o?(0,H.tZ)(v.m,{campaign:l}):(0,H.tZ)(P.Z,{campaign:l,beforeClick:()=>{s&&s("signin","header")}})]})]})]})})})};var Q=r(29230);const N="282px",W="260px",G="148px",Y=(0,i.zo)("div",(e=>{let{$theme:t,$showOverlay:r}=e;return{...r?{...t.overlays.full,position:"fixed",top:0,left:0,right:0,height:"100vh",zIndex:o.I_.modal,overflow:"auto",transition:"all 0.5s ease"}:{}}})),q=(0,i.zo)("div",(e=>{let{$theme:t,$showOverlay:r}=e;return{...r?{...t.overlays.full,backgroundColor:"rgba(0, 0, 0, 0.08)",position:"fixed",top:0,left:0,right:0,height:"100vh",zIndex:o.I_.modal,overflow:"auto",transition:`all 0.5s ${t.animation.easeOutQuinticCurve}`}:{transition:`all 0.5s ${t.animation.easeOutQuinticCurve}`}}})),j=(0,i.w1)(n.Z,(e=>{let{$theme:t,$headerHeight:r}=e;return{color:t.colors.onHeader,position:"relative",display:"flex",flexDirection:"row",alignItems:"center",height:`${r}px`}})),K=(0,i.w1)(a.Z,{margin:"40px auto"}),J=(0,i.zo)("div",(e=>{let{$needsLeftMargin:t}=e;return{minHeight:"472px",marginLeft:t?"16px":"-16px",maxHeight:"calc(100vh - 280px)",overflowY:"auto"}})),ee=((0,i.zo)("div",{position:"relative"}),(0,i.zo)("button",{display:"flex",flexDirection:"row",cursor:"pointer",whiteSpace:"nowrap"}),(0,i.zo)("div",(e=>{let{$theme:t,$isTransparent:r,$hasBorderBottom:i}=e;return{width:"100%",background:r?"transparent":t.colors.backgroundPrimary,borderBottom:"1px solid",borderBottomColor:i?t.colors.borderOpaque:"transparent",margin:"0 auto",transition:o.pB.default}}))),te=(0,i.zo)("div",{width:"100%",maxWidth:"722px"}),re=(0,i.zo)("div",{flex:1}),ie=(0,i.zo)("div",{justifyContent:"flex-end",display:"flex",flexGrow:0,alignItems:"center"}),ne=(0,i.zo)("div",(e=>{let{$theme:t,$expanded:r}=e;const i={display:"flex",minWidth:r?"600px":`${Q.Kv.searchMinWidth}px`,transition:`all ${t.animation.timing300} ${t.animation.easeOutQuinticCurve}`,flex:"1"};return r?{...i,alignSelf:"flex-start",flexDirection:"column"}:i})),oe=(0,i.zo)("div",{flex:"1 0",display:"flex",width:"100%",minWidth:`${Q.Kv.searchMinWidth}px`}),ae=((0,i.zo)("button",{display:"flex",flexDirection:"row",cursor:"pointer",whiteSpace:"nowrap"}),(0,i.zo)("label",o.E2)),se=(0,i.zo)("div",(e=>{let{$theme:t,$expanded:r}=e;const i={flex:"1",paddingLeft:t.sizing.scale500,paddingRight:t.sizing.scale500,backgroundColor:t.colors.backgroundPrimary,borderTopRightRadius:t.borders.radius500,borderTopLeftRadius:t.borders.radius500};return r?{...i,paddingTop:t.sizing.scale500,zIndex:o.I_.modal,marginTop:t.sizing.scale0}:i})),le=(0,i.zo)("div",(e=>{let{$theme:t,$showPopover:r}=e;return{display:"flex",zIndex:o.I_.modal,background:t.colors.backgroundPrimary,maxWidth:"1920px",borderBottomRightRadius:t.borders.radius500,borderBottomLeftRadius:t.borders.radius500,borderBottomColor:t.colors.borderOpaque,borderBottomStyle:"solid",borderBottomWidth:"1px",transform:"translateY(0)",overflow:"hidden",...r?{opacity:"1",width:"100%",maxHeight:"calc(100vh - 180px)"}:{maxHeight:"0",visibility:"hidden",opacity:"0",width:"0px"},transition:`opacity 0.5s ${t.animation.easeOutQuinticCurve}, visibility 0.5s ${t.animation.easeOutQuinticCurve}`}})),de=(0,i.zo)("div",(e=>{let{$theme:t,$showPopover:r}=e;return{display:"flex",flexDirection:"row",zIndex:o.I_.modal,position:"absolute",background:t.colors.backgroundPrimary,width:"100%",maxWidth:"1920px",top:"100%",right:"0",left:"0",margin:"0 auto",boxShadow:"0 6px 4px -4px rgba(0, 0, 0, 0.1)",borderBottomColor:t.colors.borderOpaque,borderBottomStyle:"solid",borderBottomWidth:"1px",transform:"translateY(0)",overflow:"hidden",...r?{opacity:"1"}:{height:"0",visibility:"hidden",opacity:"0"},transition:"all 0.5s ease"}})),ce=(0,i.zo)("div",(e=>{let{$theme:t,$showPopover:r,$needsPadding:i}=e;return{display:"flex",width:"100%",flexDirection:"column",paddingLeft:i?t.sizing.scale1000:"0",paddingRight:i?t.sizing.scale1000:"0",...r?{visibility:"visible"}:{visibility:"hidden"}}})),ue=e=>{const{store:t}=(0,s.ZP)(e.storeUuid),r=t?.data?.title||"",i=(0,d.Z)(t?.data?.uuid||""),{isInStoreSearchSuggestionsXpEnabled:n}=(0,l.Z)(),o=Boolean(r);return(0,H.tZ)(H.HY,{children:o&&i&&n?(0,H.tZ)(A,{...e}):(0,H.tZ)(V,{...e})})}},26715:(e,t,r)=>{r.d(t,{Z:()=>y});var i=r(36151),n=r(40836),o=r(91931),a=r(87873),s=r(14770),l=r(36278),d=r(37555),c=r(79168),u=r(33990);const h=(0,o.zo)("div",(e=>{let{$theme:t,$isFocused:r,$height:i,$maxWidth:n}=e;return{...t.typography.LabelMedium,backgroundColor:t.colors.inputFill,color:t.colors.inputText,width:"100%",display:"flex",position:"absolute",height:i,borderRadius:t.borders.pillButtonBorderRadius,alignItems:"center",right:"0",transform:"translateY(-50%)",...r?{maxWidth:"1494px",minWidth:"600px"}:{maxWidth:"1036px",minWidth:"180px"},...n?{maxWidth:n}:void 0,transition:"min-width 400ms ease, max-width 400ms ease"}})),p=(0,o.zo)("div",{display:"flex",flexShrink:0,alignSelf:"center"}),g=(0,o.zo)("input",(e=>{let{$theme:t,$width:r}=e;return{flex:1,backgroundColor:t.colors.inputFill,...r?{width:`${r}px`}:{},appearance:"none",outline:"none","::placeholder":{...t.typography.LabelMedium,color:t.colors.contentSecondary},textOverflow:"ellipsis",overflow:"hidden"}})),m=(0,o.zo)("button",(e=>{let{$theme:t}=e;return{...t.typography.LabelMedium,color:t.colors.contentTertiary,cursor:"pointer"}})),Z=(0,o.zo)("div",(e=>{let{$theme:t}=e;return{width:"1px",margin:"0 16px",backgroundColor:t.colors.borderOpaque}})),f=(0,o.zo)(s.Z,{cursor:"pointer"}),y=e=>{const[t,r]=i.useState(!1),o=i.useRef(null),{value:s,...y}=e.getInputProps({onFocus:()=>{e.onFocus&&e.onFocus(),e.setExpandedState&&e.setExpandedState(),r(!0)},onBlur:()=>r(!1),ref:o});i.useEffect((()=>{e.expandedState&&o.current&&o?.current?.focus()}),[e.expandedState]);const v=e.expandedState&&e.query.length>0,{height:x}=(0,c.Z)(e.size);return(0,u.tZ)(u.HY,{children:(0,u.BX)(h,{$isFocused:e.expandedState||t,$height:x,$maxWidth:"mini"===e.size?"100%":void 0,children:[(0,u.tZ)(l.IQ,{}),(0,u.tZ)(p,{children:(0,u.tZ)(a.Z,{size:14})}),(0,u.tZ)(l.ZP,{$width:"16px"}),(0,u.tZ)(g,{...y,value:s||"",type:"text",autoComplete:"off",name:"searchTerm",placeholder:e.placeholder,$width:e.queryWidth,onKeyDown:t=>{t.keyCode===d.q7&&e.handleEnterClick&&e.query.length>0&&(e.handleEnterClick(),r(!1))}}),(0,u.tZ)(l.ZP,{$width:"8px"}),v?(0,u.BX)(u.HY,{children:[(0,u.tZ)(m,{type:"button",onClick:()=>{e.reset(),o.current&&(o?.current?.focus(),e.setExpandedState&&e.setExpandedState())},children:(0,u.tZ)(n.v,{id:"shared.clear"})}),(0,u.tZ)(l.IQ,{})]}):null,e.onClose&&e.query.length>0?(0,u.tZ)(Z,{}):null,e.onClose?(0,u.tZ)(f,{onClick:e.onClose}):null]})})}},19566:(e,t,r)=>{r.d(t,{Z:()=>y});var i=r(36151),n=r(62149),o=r(15070),a=r(71454),s=r.n(a),l=r(91931),d=r(47986),c=r(92060),u=r(87891),h=r(33535),p=r(94579),g=r(33990);const m=(0,l.zo)("ul",(e=>{let{$theme:t,$width:r}=e;return{display:"flex",textAlign:"center",marginBottom:"8px",width:r?`${r}px`:"100%",height:`${p.mc}px`,background:t.colors.backgroundPrimary}})),Z=(0,l.zo)("li",(e=>{let{$theme:t,$isSelected:r}=e;return{...t.typography.LabelSmall,borderBottom:`5px solid ${r?t.colors.black:t.colors.borderOpaque}`,alignSelf:"center",padding:t.sizing.scale600,color:r?t.colors.contentPrimary:t.colors.contentTertiary,cursor:"pointer",":hover":{background:t.colors.menuFillHover}}})),f=(0,l.zo)("li",(e=>{let{$theme:t}=e;return{borderBottom:`5px solid ${t.colors.borderOpaque}`,flexGrow:1,padding:"24px",alignSelf:"center"}})),y=e=>{const t=(0,n.TH)(),r=(0,h.ZP)(),a=(0,o.v)((e=>{let{multiVertical:t}=e;return t.verticalList})),{userQuery:l}=(0,d.RAN)(t,["userQuery"]),[p,y]=(0,i.useState)(!1),v=(0,u.t)({dropPastOrders:!0}),x=(0,i.useCallback)((e=>v?.data?.verticalSearchHomeResults[e]?.length||0),[v]),b=(0,i.useMemo)((()=>({verticalList:a.map((e=>e.verticalType)).join(","),type:"TAB",surface:e.surface,searchTermText:l,previousSelectedVertical:e.selectedVertical||c.g,selectedVertical:e.selectedVertical||c.g})),[a,e.selectedVertical,e.surface,l]),C=(0,i.useCallback)((i=>()=>{e.onSelect&&e.onSelect(i),r("eats:search_vertical_tab_tapped",{mvsMeta:{...b,selectedVertical:i,page:t.pathname}}),e.expandedState&&r("eats:global_search_zero_state_viewed",{numberOfSuggestions:x(i),mvsMeta:{verticalList:b.verticalList,selectedVertical:i}})}),[e,r,b,x,t.pathname]),S=s()((()=>{r("eats:search_vertical_tab_scrolled",{mvsMeta:b})}),1e3);return(0,i.useEffect)((()=>{v.data&&!p&&e.expandedState&&(y(!0),r("eats:global_search_zero_state_viewed",{numberOfSuggestions:x(b.selectedVertical),mvsMeta:{verticalList:b.verticalList,selectedVertical:b.selectedVertical}}))}),[v,r,x,b.verticalList,b.selectedVertical,p,e.expandedState]),(0,i.useEffect)((()=>{r("eats:search_vertical_tab_view",{mvsMeta:b})}),[]),a.length>1?(0,g.BX)(m,{$width:e.tableWidth,onScroll:S,children:[a.map(((t,r)=>(0,g.tZ)(Z,{onClick:C(t.verticalType),$isSelected:t.verticalType===(e.selectedVertical||c.g),children:t.title},r))),(0,g.tZ)(f,{})]}):null}},53685:(e,t,r)=>{r.d(t,{C:()=>i});const i=e=>{let t=0;for(const r of e)"store"!==r.type&&"searchHistory"!==r.type||t++;return t}},7819:(e,t,r)=>{r.d(t,{C:()=>a});var i=r(40841),n=r(47986),o=r(16372);function a(e,t,r){return e.actionUrl?t?{type:"anchor",href:(0,i.W)(e.actionUrl)}:{type:"anchor",href:e.actionUrl}:{type:"link",to:(0,n.gfM)(r,{storeSlug:e.slug,storeUuid:e.uuid,newQueryParams:{searchSource:o.xH.SEARCH_SUGGESTION}})}}},44133:(e,t,r)=>{r.d(t,{Z:()=>u});var i=r(36151),n=r(91631),o=r(62149),a=r(32711),s=r(70496),l=r(68093),d=r(47986),c=r(78284);const u=e=>{let{query:t,delay:r=500}=e;const u=(0,n.k6)(),h=(0,o.TH)(),p=(0,s.Z)(),g=(0,l.Z)(t,r),[m,Z]=(0,i.useState)(!1),[f,y]=(0,i.useState)({}),[v,x]=(0,i.useState)([]),{fetchLocations:b,handleLocationSelected:C,areLocationDetailsLoading:S}=(0,a.Z)({onLocationSelected:e=>{x([]),p(e),u.replace((0,d.DZj)({location:h,newQueryParams:{place:(0,c.aj)((0,c.VN)(e))}}))}}),$=(0,i.useRef)(b);$.current=b;const _=(0,i.useRef)(f);return _.current=f,(0,i.useEffect)((()=>{if(g.length>3){const e=_.current[g];e?x(e):(Z(!0),$.current(g).then((e=>{y((t=>({...t,[g]:e}))),x(e)})).finally((()=>{Z(!1)})))}else 0===g.length&&x([])}),[g]),{searchResults:f,locationSuggestions:v,handleLocationSelected:C,isLoading:m,hasLoaded:!m&&_.current[g]&&g.length>3,areLocationDetailsLoading:S}}},87891:(e,t,r)=>{r.d(t,{t:()=>a});var i=r(74622),n=r(2237),o=r(62459);function a(e,t){const r=(0,o.Z)("getSearchHomeV2"),a=(0,n.H)("getSearchHomeV2",e);return(0,i.useQuery)({queryKey:a,queryFn:e=>{let{queryKey:t}=e;return r.request("getSearchHomeV2",t[1])},...t?.queryObserverOptions})}},24187:(e,t,r)=>{r.d(t,{Z:()=>n});var i=r(36151);function n(){const[e,t]=(0,i.useState)(null),r=(0,i.useCallback)((r=>{if(r){const i=r.getBoundingClientRect();e&&e?.height===i.height&&e?.width===i.width||t(i)}}),[e]);return[e,r]}},4525:(e,t,r)=>{r.d(t,{Z:()=>h});var i=r(43193),n=r(91631),o=r(62149),a=r(47986),s=r(33535),l=r(54669),d=r(70496),c=r(34626);const u={location:"eats:enter_delivery_address_start",time:"",search:"eats:search_start",user:"eats:user_menu_open",diningMode:"eats:dining_mode_menu_open"};function h(){const[e,t]=i.useState(null),r=(0,o.TH)(),h=(0,n.k6)(),p=(0,s.ZP)(),g=(0,l.Z)(),m=(0,d.Z)(),{user:Z}=(0,c.Z)(),f=()=>t(null);return{activeMenu:e,openMenu:e=>{const r=e&&u[e];r&&p(r),t(e)},closeMenu:f,closeAndUpdate:(e,t,i)=>{if(f(),m(e,t),!e||i)return;if(e.address.title!==g?.address.title)return h.push((0,a.dat)(r,{deliveryLocation:e}));const n=(0,a.RAN)(r,["place","startTime"]);(n.place||n.startTime)&&h.push((0,a.m0g)(r,e,t||{asap:!0}))},user:Z}}},68568:(e,t,r)=>{r.d(t,{Z:()=>c});var i=r(36151),n=r(88885),o=r(32711),a=r(41497),s=r(20568),l=r(34626),d=r(4865);const c=e=>{const t=(0,n.T)(),{fetchLocations:r,handleLocationSelected:c,areLocationDetailsLoading:u,placeholder:h}=(0,o.Z)({onLocationSelected:e.onLocationSelected}),{user:p}=(0,l.Z)(),g=(0,s.Z)("getDeliveryLocationsV2"),m=i.useCallback((async()=>{const e=await g({locationTypes:["SUGGESTED"]});return(0,d.BU)(e?.deliveryLocations?.SUGGESTED||[])}),[g]),Z=t=>t.isTaggedLocation?(e.onLocationSelected(t.address),Promise.resolve()):c(t),f=(e,t)=>{const r=t?.[0];r&&Z(r)},y=i.useCallback((e=>{let{results:r,query:i}=e;return 0===r.length?i?t("components.DeliveryLocationSearch.noResults"):"":i?t("components.MarketplaceSearch.resultsDescription",{numResults:r.length,searchTerm:i}):t("shared.searchResultsCount",{resultsCount:r.length})}),[]),{query:v,results:x,getLabelProps:b,getInputProps:C,getMenuProps:S,getItemProps:$,reset:_,highlightedIndex:w,isOpen:z,openMenu:k}=(0,a.Z)({id:`location-typeahead-${e.id}`,initialQuery:e.initialQuery,fetchResults:e=>p.data?.isLoggedIn&&0===e.length?m():r(e),onResultSelected:Z,getQueryFromResult:e=>e?e.isTaggedLocation?e.address.address.address1:e?.addressLine1||"":"",initialIsClosed:e.initialIsClosed,onEnterKeyWithNoSelectedResult:f,getA11yStatusMessage:y});return{query:v,locations:x,getLabelProps:b,getInputProps:C,getMenuProps:S,getItemProps:$,reset:_,highlightedIndex:w,placeholder:h,isLoading:u||x.isLoading,showTryAgainMessage:Boolean(v&&x.hasLoaded&&x.data&&0===x.data.length),isOpen:z,openMenu:k,onSubmitWithNoSelectedResult:f}}},32711:(e,t,r)=>{r.d(t,{Z:()=>h});var i=r(36151),n=r(88885),o=r(20568),a=r(71076),s=r(55758),l=r(55546),d=r(33535),c=r(62149),u=r(97130);const h=e=>{let{onLocationSelected:t,overrideDiningMode:r,onLocationSelectedV2:h}=e;const{isAddressPickerRevampEnabled:p}=(0,u.X)(),[g,m]=(0,i.useState)(!1),Z=(0,n.T)(),f=(0,s.d)(),y=r??f;let v;const x=(0,d.ZP)(),b=(0,c.TH)().pathname;v=y===l.k5.DINE_IN?Z("shared.enterDineInAddress"):y===l.k5.PICKUP?Z("shared.enterPickupAddress"):y===l.k5.DELIVERY_API?Z("shared.enterFullDeliveryAddress"):Z("shared.enterDeliveryAddress");const C=(0,o.Z)("getLocationAutocompleteV1"),S=(0,o.Z)("getDeliveryLocationV1"),$=(0,o.Z)("getDeliveryLocationV2");return{fetchLocations:e=>e?C({query:e}):Promise.resolve([]),handleLocationSelected:(0,i.useCallback)((e=>(m(!0),h&&p?$({placeId:e.id,provider:e.provider,source:"manual_auto_complete"}).then((e=>{let{deliveryLocation:t}=e;t&&(m(!1),x("eats:location_manager_typeahead_result_click",{originType:"user_autocomplete",page:b,userState:t?.deliveryConfig?.analytics?.user_state}),h(t))})).catch((e=>{e instanceof a.F||m(!1)})):S({placeId:e.id,provider:e.provider,source:"manual_auto_complete"}).then((e=>{m(!1),x("eats:location_manager_typeahead_result_click",{originType:e.originType,page:b,userState:e.userState}),t?.(e)})).catch((e=>{e instanceof a.F||m(!1)})))),[x,S,$,p,t,h,b]),areLocationDetailsLoading:g,placeholder:v}}},91377:(e,t,r)=>{function i(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return e=>{t.forEach((t=>{"function"==typeof t?t(e):"object"==typeof t&&null!==t&&(t.current=e)}))}}r.d(t,{Z:()=>i})}}]);