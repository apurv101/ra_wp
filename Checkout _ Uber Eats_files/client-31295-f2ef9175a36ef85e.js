"use strict";(self.webpackChunkFusion=self.webpackChunkFusion||[]).push([[31295],{__fusion__49:(e,t,i)=>{i.r(t),i.d(t,{default:()=>at});var n=i(43193),o=i(62149),r=i(88885),a=i(40836),l=i(53683),d=i(91931),s=i(33990);const c=(0,d.zo)("li",(e=>{let{$theme:t}=e;return{...t.typography.ParagraphMedium,padding:"24px"}})),h=e=>{let{getItemProps:t}=e;return(0,s.tZ)(c,{...t({index:0}),children:(0,s.tZ)(a.v,{id:"shared.hmmCantFindThisAddress"})})};var g=i(94579),p=i(78422);const u=(0,d.zo)("li",(e=>({backgroundColor:e.$isHighlighted?e.$theme.colors.backgroundSecondary:"transparent",padding:e.$isTagged?"16px 24px":"0",display:"flex",cursor:"pointer",transition:g.pB.itemBackground,outline:"none",":hover":{background:e.$theme.colors.backgroundSecondary}}))),m=(0,d.zo)("div",(e=>{let{$theme:t}=e;return{alignSelf:"center",padding:`0 ${t.sizing.scale700}`}})),y=(0,d.zo)("div",(e=>{let{$theme:t}=e;return{minWidth:0,display:"flex",flexDirection:"column",flexGrow:1,borderBottom:`1px solid ${t.colors.borderOpaque}`,padding:`${t.sizing.scale600} 0 `}})),v=(0,d.zo)("div",(e=>{let{$theme:t}=e;return{...t.typography.LabelLarge,textOverflow:"ellipsis",overflow:"hidden"}})),Z=(0,d.zo)("div",(e=>{let{$theme:t}=e;return{...t.typography.ParagraphSmall,color:t.colors.contentSecondary,textOverflow:"ellipsis",overflow:"hidden"}})),_=e=>{const[,t]=(0,d.hQ)();return(0,s.BX)(u,{$isHighlighted:e.highlightedIndex===e.index,...e.getItemProps({index:e.index}),children:[(0,s.tZ)(m,{children:(0,s.tZ)(p.Z,{name:"LocationMarkerOutlined",size:"24",color:t.colors.contentTertiary})}),(0,s.BX)(y,{children:[(0,s.tZ)(v,{children:e.location.addressLine1}),(0,s.tZ)(Z,{children:e.location.addressLine2})]})]})},f=(0,d.zo)("ul",(e=>{let{$theme:t}=e;return{background:t.colors.backgroundPrimary,margin:"0 -24px"}})),L=e=>{let t=null;return e.isOpen&&(t=e.showTryAgainMessage?(0,s.tZ)(h,{getItemProps:e.getItemProps}):e.locations.map(((t,i)=>(0,s.tZ)(_,{index:i,location:t,getItemProps:e.getItemProps,highlightedIndex:e.highlightedIndex},i)))),(0,s.tZ)(f,{...e.getMenuProps(),children:t})};var D=i(48402),I=i(69404),T=i(36151),S=i(40606),b=i(62851),C=i(47850),z=i(43406),k=i(63649),B=i(43779),P=i(45142),x=i(37573),E=i(40832),$=i(7708),O=i(90200),V=i(81282),w=i(33535),X=i(92703),A=i(93685),M=i(8001);const N=(0,d.zo)("h1",(e=>{let{$theme:t}=e;return{...t.typography.HeadingLarge,marginBottom:"16px"}})),H=(0,d.zo)("span",g.E2),R=(0,d.zo)("div",{marginBottom:"12px"}),U=(0,d.w1)(b.U,{marginBottom:"24px"}),Y=(0,d.w1)(C.Z,{paddingTop:0}),F=(0,d.w1)(b.U,{height:"48px",marginBottom:"12px"}),q=(0,d.zo)("div",(e=>{let{$theme:t}=e;return{...t.typography.LabelMedium,marginBottom:"8px"}})),j=(0,d.zo)("div",(e=>{let{$theme:t}=e;return{...t.typography.LabelMedium,marginBottom:"8px",marginTop:"24px"}})),W=(0,d.zo)("div",{display:"flex",justifyContent:"center"});function G(e){const{instructionsDraft:t,updateInstructionsDraft:i,updateLocationDraft:n}=(0,E.a8)(),o=(0,r.T)(),l=(0,w.ZP)(),{guestCheckoutEnabled:d}=(0,x.Z)(),c=e.overrideDiningMode,h=e.selectedDeliveryLocation?.address?.label||"",[g,p]=(0,T.useState)(h);(0,T.useEffect)((()=>{p(h)}),[h]);const[u,m]=(0,T.useState)(!1),y=(0,P.Z)();(0,T.useEffect)((()=>{n(e.ephemeralLocation)}),[e.ephemeralLocation,n]);const v=()=>m(!1);if(u)return(0,s.tZ)(A.Z,{onRemoveAddress:e.onRemoveAddress,onKeepAddress:v});return(0,s.BX)(s.HY,{children:[(0,s.tZ)(N,{children:(0,s.tZ)(X.Z,{diningMode:c,pickup:(0,s.tZ)(a.v,{id:"components.checkout.pickup_details"}),delivery:(0,s.tZ)(a.v,{id:"components.checkout.delivery_details"}),dineIn:(0,s.tZ)(a.v,{id:"components.checkout.dine_in_details"})})}),(0,s.BX)(U,{children:[(0,s.tZ)(Y,{iconType:"Pin",children:e.ephemeralLocation?.address?.eaterFormattedAddress||e.ephemeralLocation?.address?.address1||""}),(0,s.tZ)(H,{children:o("shared.changeAddress")})]}),"DELIVERY"===c||"SHIPMENT"===c?(0,s.BX)(s.HY,{children:[(0,s.tZ)(q,{children:(0,s.tZ)(a.v,{id:"components.delivery.delivery_options"})}),(0,s.tZ)(S.Z,{source:e.ephemeralLocationInstruction,loaded:e=>{let{availableInteractionTypes:n}=e;return(0,s.tZ)(R,{children:1===n.length?(0,s.tZ)(F,{children:y(n[0])}):(0,s.tZ)(B.Z,{customIcon:(0,s.tZ)(M.Z,{interactionType:t.interactionType}),onChange:e=>{i("interactionType",e.target.value),l("eats:delivery_preference_switch",{option:e.target.value}),e.currentTarget&&e.currentTarget.focus()},value:t.interactionType,ariaLabel:o("shared.selectdeliverymethod"),children:n.map((e=>(0,s.tZ)(B.W,{value:e,children:y(e)},e)))})})},loading:()=>(0,s.tZ)(F,{}),error:()=>(0,s.tZ)(F,{})}),(0,s.tZ)(S.Z,{source:e.ephemeralLocationInstruction,loaded:()=>"door_to_door"===t.interactionType||"leave_at_door"===t.interactionType?(0,s.BX)(s.HY,{children:[(0,s.tZ)(R,{children:(0,s.tZ)(z.Z,{placeholder:o("shared.aptOrSuiteLabel"),onChange:e=>i("aptOrSuite",e.target.value),value:t.aptOrSuite})}),(0,s.tZ)(R,{children:(0,s.tZ)(z.Z,{placeholder:o("shared.businessNameLabel"),onChange:e=>i("businessName",e.target.value),value:t.businessName})})]}):null,loading:()=>(0,s.BX)(s.HY,{children:[(0,s.tZ)(F,{}),(0,s.tZ)(F,{})]}),error:()=>(0,s.tZ)(F,{})}),(0,s.tZ)(k.Z,{placeholder:o("shared.deliveryNotesLabel"),onChange:e=>{i("notes",e.target.value),e.target.style.height="inherit";const t=e.target.scrollHeight;e.target.style.height=`${t}px`},value:t.notes,ariaLabel:o("shared.deliveryNotesLabel"),rows:"2"})]}):null,d?null:(0,s.BX)(s.HY,{children:[(0,s.tZ)(j,{children:(0,s.tZ)(a.v,{id:"components.delivery.save_this_address"})}),(0,s.tZ)(V.Z,{address:g,setAddress:p})]}),e.showRemoveAddress?(0,s.tZ)(W,{children:(0,s.tZ)(O.Z,{selectedDeliveryLocation:e.selectedDeliveryLocation,onRemoveAddress:()=>{m(!0)}})}):null,(0,s.tZ)($.Z,{addressLabel:g,selectedDeliveryLocation:e.selectedDeliveryLocation,onAddressSaved:()=>{e.onAddressSaved(e.selectedDeliveryLocation)}})]})}var J=i(75241),Q=i(52298),K=i(83949),ee=i(34626),te=i(47986),ie=i(43978),ne=i(95747),oe=i(79609),re=i(74057),ae=i(37649),le=i(31809),de=i(84089),se=i(56899),ce=i(66041),he=i(59210),ge=i(55758),pe=i(46700),ue=i(1765),me=i(32857),ye=i(68065);const ve=(0,d.zo)("div",(e=>{let{$theme:t}=e;return{marginBottom:t.sizing.scale300}})),Ze=(0,d.zo)("div",(e=>{let{$theme:t}=e;return{borderRadius:t.borders.radius300,overflow:"hidden"}})),_e=(0,d.zo)("div",(e=>{let{$theme:t}=e;return{margin:`${t.sizing.scale600} ${t.sizing.scale800}`,display:"flex",justifyContent:"flex-end",alignItems:"center",gap:t.sizing.scale600}})),fe=e=>{let{onBack:t,onConfirm:i,coordinates:o,pinConstraints:a}=e;const l=(0,w.ZP)(),[d,c]=n.useState(!0),[h,g]=n.useState(o),p=(0,r.T)(),u=p("location_manager.drop_off_pin_marker_title");return n.useEffect((()=>{l("eats:location_manager_pin_drop_impression")}),[l]),(0,s.BX)(s.HY,{children:[(0,s.tZ)(ve,{children:(0,s.tZ)(he.Jf,{margin:"0",children:p("location_manager.edit_mode_pin_title")})}),(0,s.tZ)(Ze,{children:(0,s.tZ)(ue.Z,{pinConstraints:a,coordinates:o,zoom:18,height:"480px",showZoomButtons:!0,markerLabel:u,draggable:!0,onChange:g,noZoomOnMouseWheelScroll:!0,setCanSubmit:c})}),(0,s.tZ)(he.aM,{marginTop:"scale600",marginBottom:"scale600",children:p("location_manager.edit_pin_description")}),(0,s.BX)(_e,{children:[(0,s.tZ)(me.Z,{onClick:t,kind:ye.TO.tertiary,children:p("back")}),(0,s.tZ)(me.Z,{disabled:!d,onClick:()=>{d&&i(h)},children:p("shared.confirm")})]})]})};var Le=i(52754),De=i(77947),Ie=i(36154),Te=i(66473),Se=i(85301),be=i(69955),Ce=i(92717),ze=i(1795),ke=i(11841),Be=i(85427),Pe=i(97130),xe=i("__fusion__1671"),Ee=i(19990),$e=i(3899);const Oe=(0,d.zo)("div",(e=>{let{$theme:t}=e;return{color:t.colors.negative,display:"flex",alignItems:"center",justifyContent:"center"}})),Ve=e=>{let{placeId:t,provider:i}=e;const[o,r]=n.useState(!1),l=(0,Ee.F)(),d=()=>l.mutate({placeId:t,provider:i});return o?(0,s.tZ)(de.Z,{isOpen:!0,closeable:!1,size:se.NO.auto,children:(0,s.tZ)(ce.fe,{children:(0,s.tZ)($e.Z,{onKeepAddress:()=>r(!1),onRemoveAddress:d})})}):(0,s.tZ)(me.Z,{startEnhancer:()=>(0,s.tZ)(Oe,{children:(0,s.tZ)(xe.default,{size:"16"})}),onClick:()=>r(!0),kind:ye.TO.secondary,size:ye.NO.compact,shape:ye.X3.pill,children:(0,s.tZ)(a.v,{id:"components.address_entry.remove_address"})})};var we=i(22023),Xe=i(11362),Ae=i(91631);const Me=(0,d.w1)(ce.mz,(e=>{let{$theme:t}=e;return{gap:t.sizing.scale600,display:"flex",justifyContent:"flex-end"}})),Ne=(0,d.zo)("div",(e=>{let{$theme:t}=e;return{marginBottom:t.sizing.scale300}})),He=(0,d.zo)("div",{height:"600px"}),Re=(0,d.zo)("div",(e=>{let{$theme:t}=e;return{marginBottom:t.sizing.scale600}})),Ue=(0,d.zo)("div",(e=>{let{$theme:t}=e;return{margin:`${t.sizing.scale600} ${t.sizing.scale800}`,display:"flex",justifyContent:"flex-end",alignItems:"center",gap:t.sizing.scale600}})),Ye=(0,d.zo)("div",(e=>{let{$theme:t}=e;return{margin:`0 ${t.sizing.scale600} 0 ${t.sizing.scale600}`}})),Fe=(0,d.zo)("div",(e=>{let{$theme:t}=e;return{margin:`${t.sizing.scale600} 0`}}));function qe(e){const t=(0,Ae.k6)(),i=()=>t.goBack(),o=(0,w.ZP)(),a=e.selectedDeliveryLocationV2?.location?.id||"",l=e.selectedDeliveryLocationV2?.location?.provider||"",[d,c]=n.useState(!1),h=(0,Ce.z)({referenceInfo:{placeID:a,provider:l}},{queryObserverOptions:{staleTime:0}}),g=(0,r.T)(),p=g("location_manager.address_label_title"),u=g("components.delivery.add_a_label"),[m,y]=n.useState(!0),[v,Z]=(0,T.useState)(e.selectedDeliveryLocationV2?.personalPayload?.label||""),{deliveryInstructionV2:_,setDeliveryInstructionV2:f,setAddressInfo:L}=(0,E.a8)(),D=_?.interactionType||e.selectedDeliveryLocationV2?.deliveryPayload?.selectedInteractionType||Se.lq,I="unknown"===D?Se.lq:D,S=e.selectedDeliveryLocationV2?.deliveryPayload?.deliveryInstructions?.[I]?.pinDropInfo?.coordinate||e.selectedDeliveryLocationV2?.location?.coordinate||{},b=e.selectedDeliveryLocationV2?.deliveryConfig?.constraint,{ephemeralInstruction:C,setEphemeralInstruction:z,ephemeralInteractionType:k,setEphemeralInteractionType:B,goToPinDrop:P,goToDropOff:x,isCurrentLocation:$}=(0,Pe.X)({instruction:_?.deliveryNotes,interactionType:I}),[O,V]=n.useState(S),[X,A]=n.useState(!1);n.useEffect((()=>{if(m){const{deliveryPayload:t}=e.selectedDeliveryLocationV2||{},{deliveryInstructions:i,type:n}=t||{},o=i?.[I];"USER_INPUT_MISSING"===n&&c(!0),f((e=>e?{...e,interactionType:I,...o}:{interactionType:I,...o})),y(!1)}}),[m,e.selectedDeliveryLocationV2,I,f]);const M=e=>{V(e),U({pinDropInfo:{coordinate:e}}),i()},N=e.selectedDeliveryLocationV2?.deliveryConfig?.deliveryInteractionDetailsViewConfig||{},H=e.selectedDeliveryLocationV2?.deliveryConfig?.deliveryInstructionInputViewModels?.[I],R=()=>{U({interactionType:k,deliveryNotes:C}),i()},U=e=>{let{interactionType:t,deliveryNotes:i,pinDropInfo:n}=e;f((e=>e?{...e,...t?{interactionType:t}:{},...n?{pinDropInfo:n}:{},deliveryNotes:i}:{...t?{interactionType:t}:{},...n?{pinDropInfo:n}:{},deliveryNotes:i}))};return n.useEffect((()=>{o("eats:location_manager_delivery_details_v2_impression")}),[o]),n.useEffect((()=>()=>{L(Be.jq),f(null)}),[L,f]),h?.isLoading||h?.isFetching?(0,s.tZ)(He,{children:(0,s.tZ)(ze.Z,{})}):"pindrop"===e.stepType?(0,s.tZ)(Ye,{children:(0,s.tZ)(fe,{coordinates:O,onConfirm:M,onBack:i,pinConstraints:b})}):"dropoff"===e.stepType?(0,s.BX)(Ye,{children:[(0,s.tZ)(Te.Z,{ephemeralInstruction:C,setEphemeralInstruction:z,setEphemeralInteractionType:B,ephemeralInteractionType:k,deliveryInteractionDetailsViewConfig:N}),(0,s.BX)(Me,{children:[(0,s.tZ)(me.Z,{onClick:i,kind:ye.TO.tertiary,children:g("back")}),(0,s.tZ)(me.Z,{onClick:R,children:g("components.ConfirmMobile.update")})]})]}):(0,s.BX)(s.HY,{children:[(0,s.BX)(Ye,{children:[(0,s.tZ)(Ne,{children:(0,s.tZ)(he.Jf,{margin:"0",children:g("location_manager.edit_mode_title")})}),(0,s.tZ)(pe.Z,{coordinates:O,onClick:P})]}),(0,s.tZ)(Ye,{children:(0,s.tZ)(Ie.Z,{getAddressEntryFormPayload:h?.data,shouldHighlightRequired:X,setShouldHighlightRequired:A})}),(0,s.tZ)(Fe,{children:(0,s.tZ)(we.I,{$size:Xe.N.module})}),(0,s.BX)(Ye,{children:[(0,s.tZ)(De.Z,{selectedInteraction:I,deliveryInteractionViewConfig:e.selectedDeliveryLocationV2?.deliveryConfig?.deliveryInteractionViewConfig,onClick:x}),(0,s.tZ)(be.Z,{ephemeralInstruction:_?.deliveryNotes,onChange:e=>U({deliveryNotes:e}),deliveryInstructionInputViewModel:H})]}),(0,s.tZ)(Fe,{children:(0,s.tZ)(we.I,{$size:Xe.N.module})}),(0,s.tZ)(Ye,{children:(0,s.BX)(Re,{children:[(0,s.tZ)(he.D9,{marginBottom:"scale300",marginTop:"scale600",children:p}),(0,s.tZ)(ke.Z,{value:v,onChange:e=>Z(e.target.value),placeholder:u,clearOnEscape:!0})]})}),d||$(e.selectedDeliveryLocationV2)?null:(0,s.tZ)(Ye,{children:(0,s.tZ)(Ve,{placeId:a,provider:l})}),(0,s.BX)(Ue,{children:[(0,s.tZ)(me.Z,{onClick:e.onBack,kind:ye.TO.tertiary,children:g("back")}),(0,s.tZ)(Le.Z,{selectedDeliveryLocationV2:e.selectedDeliveryLocationV2,getAddressEntryFormPayload:h?.data,onAddressSaved:e.onAddressSaved,label:v,setShouldHighlightRequired:A})]})]})}var je=i(31704),We=i(13218),Ge=i(73057),Je=i(45106);const Qe=(0,d.w1)(we.I,{marginTop:"0"}),Ke=(0,d.zo)("div",(e=>{let{$theme:t}=e;return{margin:`${t.sizing.scale600} ${t.sizing.scale800}`,minHeight:"385px"}})),et=(0,d.zo)("div",(e=>{let{$theme:t}=e;return{margin:`${t.sizing.scale600} ${t.sizing.scale800}`}})),tt=e=>{let{onAddressSaved:t,targetDiningMode:i,isSchedulable:o,deliveryDetails:a,guestCheckoutEnabled:l,isLoggedIn:d,deliveryTime:c,storeUuid:h}=e;const g=(0,Je.Z)(),p=(0,r.T)(),u=(0,w.ZP)(),{goToEditDeliveryDetails:m}=(0,Pe.X)(),{query:y,locations:v,isLoading:Z,highlightedIndex:_,showTryAgainMessage:f,reset:T,getItemProps:S,getMenuProps:b,getInputProps:C}=(0,ie.Z)({onLocationSelectedV2:e=>{const t=(0,We._W)(e?.location,e?.personalPayload);a.setSelectedDeliveryLocationV2(e),l||d?(m(),a.onTypeaheadLocationSelected(t)):a.saveDeliveryDetailsLoggedOut(t)},initialQuery:"",id:"location-manager",initialIsClosed:!0,overrideDiningMode:i}),z=()=>g?null:(0,s.BX)(s.HY,{children:[(0,s.tZ)(Qe,{$size:Xe.N.module}),(0,s.tZ)(et,{children:(0,s.tZ)(he.fH,{margin:0,children:p("location_manager.schedule_title")})}),(0,s.tZ)(Ge.Z,{deliveryTime:c,storeUuid:h,isSchedulable:o})]});return n.useEffect((()=>{u("eats:location_manager_address_entry_impression")}),[u]),(0,s.tZ)(s.HY,{children:(0,s.BX)(I.Z,{children:[(0,s.tZ)(et,{children:(0,s.tZ)(D.Z,{query:y,getInputProps:C,reset:()=>{a.setShowDeliveryDetails(!1),T()},placeholder:p("location_manager.search_placeholder"),isLoading:Z,iconType:"Search",backgroundColor:"inputFill",borderStyle:"rounded",highlightFocus:!1})}),(l||d)&&""===y?(0,s.BX)(s.HY,{children:[(0,s.tZ)(et,{children:(0,s.tZ)(he.fH,{margin:0,children:p("location_manager.suggestions_section_title")})}),(0,s.tZ)(je.Z,{deliveryLocations:a.deliveryLocationsV2,onAddressSaved:t,onEditClick:e=>{m(),a.setSelectedDeliveryLocationV2(e),a.onTypeaheadLocationSelected((0,We._W)(e.location,e.personalPayload))}}),(0,s.tZ)(z,{})]}):(0,s.tZ)(Ke,{children:(0,s.tZ)(L,{locations:v.data||[],getMenuProps:b,getItemProps:S,highlightedIndex:_,showTryAgainMessage:f,isOpen:!0})})]})})},it=(0,d.zo)("label",g.E2),nt=(0,d.zo)("h1",(e=>{let{$theme:t}=e;return{...t.typography.HeadingLarge,marginBottom:"16px"}})),ot=(0,d.zo)("div",{margin:"0 -24px"}),rt=(0,d.zo)("div",(e=>{let{$theme:t}=e;return{margin:`${t.sizing.scale600} 0 ${t.sizing.scale800}`}})),at=e=>{const t=(0,o.TH)(),i=(0,Ae.k6)(),d=(0,r.T)(),{guestCheckoutEnabled:c}=(0,x.Z)(),{deliveryLocation:h,deliveryTime:g}=(0,re.Z)(),{storeUuid:p="",isSchedulable:u=!0,stepType:m="",locationManagerOrigin:y=""}=(0,te.kPj)(e.modalContext||"")||{},{isAddressPickerRevampEnabled:v,redirectUrl:Z}=(0,Pe.X)(),_=(0,te.nyP)(t),f=(0,ge.d)(),T="edit"===m||"edit"===e.modalContext,S="feed"===y||"feed"===e.modalContext,b="store"===y||"store"===e.modalContext,C=t.state?.deliveryLocation,z="DELIVERY_LOCATION_MANAGER"===e.modalContext?"DELIVERY":f,k=C||h,B=(0,oe.Z)({deliveryLocation:k,disableRedirectToFeed:b,isEditMode:T}),{user:P}=(0,ee.Z)(),E="edit"===m||"pindrop"===m||"dropoff"===m,$=(0,ne.Z)(),O=P.data?.isLoggedIn||!1,V=e?.XP_OVERRIDES_DO_NOT_USE?.Title||nt,w=n.useCallback((()=>i.push(Z({storeUuid:p,isSchedulable:Boolean(u)}))),[i,u,Z,p]),A=()=>{if("dropoff"!==m&&"pindrop"!==m)if("edit"!==m){if(!v)return $((0,te.C45)(t));i.push((0,te.C45)(t))}else i.replace(Z({storeUuid:p,isSchedulable:Boolean(u)}));else i.goBack()},M=i=>{if(!i)return;const n=e?.XP_OVERRIDES_DO_NOT_USE?.onLocationSelected;T||_||S?B.onDone(i):n?n?.(i):$((0,te.C45)((0,te.gOP)(t,i)))},{query:N,placeholder:H,locations:R,isLoading:U,highlightedIndex:Y,isOpen:F,showTryAgainMessage:q,openMenu:j,reset:W,getItemProps:pe,getMenuProps:ue,getInputProps:me,getLabelProps:ye}=(0,ie.Z)({onLocationSelected:t=>{const i=e?.XP_OVERRIDES_DO_NOT_USE?.onLocationSelected;!c&&!O||b?B.saveDeliveryDetailsLoggedOut(t):(B.setShowDeliveryDetails(!0),B.onTypeaheadLocationSelected(t)),i?.(t)},initialQuery:"",id:"location-manager",initialIsClosed:!0,overrideDiningMode:z});return n.useEffect((()=>{E&&!B.selectedDeliveryLocationV2&&w()}),[B.selectedDeliveryLocationV2,w,i,E,u,Z,p]),v?(0,s.BX)(de.Z,{onClose:A,closeable:!0,isOpen:!0,animate:!0,autoFocus:!0,size:se.NO.default,role:se.HB.dialog,overrides:{Dialog:{style:e=>{let{$theme:t}=e;return{marginTop:t.sizing.scale1000}}},DialogContainer:{style:{alignItems:"flex-start"}}},children:[E?null:(0,s.tZ)(ce.xB,{children:(0,s.tZ)(he.Jf,{margin:"0",children:d("location_manager.modal_title")})}),(0,s.BX)(rt,{children:[(0,s.tZ)(ae.Z,{eventName:"eats:enter_delivery_address_start",eventPayload:{address:k?.address?.address1,latitude:k?.latitude,longitude:k?.longitude}}),E&&!b&&B.selectedDeliveryLocationV2?(0,s.tZ)(qe,{onBack:()=>i.replace(Z({storeUuid:p,isSchedulable:Boolean(u)})),selectedDeliveryLocationV2:B.selectedDeliveryLocationV2,onAddressSaved:M,stepType:m}):(0,s.tZ)(tt,{deliveryDetails:B,deliveryTime:g,guestCheckoutEnabled:c,isLoggedIn:O,isSchedulable:Boolean(u),onAddressSaved:M,storeUuid:p,targetDiningMode:z})]})]}):(0,s.tZ)(l.ZP,{...B.showDeliveryDetails&&!T?{hasBackButton:!0,onClose:()=>{B.setShowDeliveryDetails(!1)}}:{backLocation:(0,te.C45)(t)},...e.XP_OVERRIDES_DO_NOT_USE?.dialogProps||{},children:(0,s.BX)(l.HF,{children:[(0,s.tZ)(ae.Z,{eventName:"eats:enter_delivery_address_start",eventPayload:{address:k?.address?.address1,latitude:k?.latitude,longitude:k?.longitude}}),B.showDeliveryDetails&&!b?(0,s.tZ)(G,{overrideDiningMode:z,selectedDeliveryLocation:B.selectedDeliveryLocation,ephemeralLocation:B.ephemeralLocation,ephemeralLocationInstruction:B.ephemeralLocationInstruction,onAddressSaved:M,onRemoveAddress:B.removeTaggedLocation,showRemoveAddress:(0,le.e)(B?.selectedDeliveryLocation,B?.taggedLocations?.data,h)}):(0,s.BX)(s.HY,{children:[(0,s.tZ)(V,{...e?.XP_OVERRIDES_DO_NOT_USE?.titleProps,children:(0,s.tZ)(X.Z,{diningMode:z,pickup:(0,s.tZ)(a.v,{id:"component.location_typeahead_mobile.pickup_near"}),delivery:(0,s.tZ)(a.v,{id:"component.location_typeahead_mobile.deliver_to"}),dineIn:(0,s.tZ)(a.v,{id:"component.location_typeahead_mobile.dine_in_near"})})}),(0,s.BX)(I.Z,{children:[(0,s.tZ)(it,{...ye(),children:d("shared.combobox.a11y_instructions")}),(0,s.tZ)(D.Z,{query:N,getInputProps:me,reset:()=>{B.setShowDeliveryDetails(!1),W()},placeholder:H,isLoading:U,iconType:"Pin",backgroundColor:"inputFill",onFocus:()=>{j()}}),(c||O)&&""===N?(0,s.BX)(s.HY,{children:[(0,s.tZ)(Q.ZP,{$height:8}),(0,s.tZ)(ot,{children:(0,s.tZ)(J.Z,{taggedLocations:B.taggedLocations,onAddressSaved:M,onEditClick:e=>{B.setShowDeliveryDetails(!0),B.onTypeaheadLocationSelected(e)}})}),(0,s.tZ)(K.Z,{onDone:()=>$((0,te.C45)(t))})]}):(0,s.BX)(s.HY,{children:[(0,s.tZ)(Q.ZP,{$height:8}),(0,s.tZ)(L,{locations:R.data||[],getMenuProps:ue,getItemProps:pe,highlightedIndex:Y,showTryAgainMessage:q,isOpen:F})]})]})]})]})})}}}]);