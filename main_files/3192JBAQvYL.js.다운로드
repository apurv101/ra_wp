(function(k){var m=window.AmazonUIPageJS||window.P,n=m._namespace||m.attributeErrors,c=n?n("ConsumerQuantityDiscountAssets",""):m;c.guardFatal?c.guardFatal(k)(c,window):c.execute(function(){k(c,window)})})(function(k,m,n){k.when("A","jQuery","a-carousel-framework").execute("cqd-asset",function(c,a,p){function z(){a(".cqd-qp-filter-action").live("click",function(b){e.logCounter("QPQuantityTierFilterClickCount");a(".cqd-qp-filter-action").removeClass("selected");a(this).addClass("selected");if(a(this).hasClass("cqd-qp-filter-block-all"))a(".cqd-qp-price-tiers").show(),
a(".cqd-qp-price-tiers .cqd-qp-content-item").show(),a(".cqd-qp-content-item:visible:gt(9)").hide(),a(".cqd-qp-buy-more").length&&a(".cqd-qp-buy-more").show(),e.logCounter("QPQuantityTierFilterClickCount:all");else{b=a(this).attr("id");a(".cqd-qp-price-tiers").hide();a("."+b).show();a("."+b+" .cqd-qp-content-item").show();var d=a("."+b+" .cqd-qp-content-item").length;a(".cqd-qp-content-item:visible:gt(9)").hide();a(".cqd-qp-buy-more").length&&(a(this).hasClass("cqd-qp-filter-block-last")||10<d?a(".cqd-qp-buy-more").show():
a(".cqd-qp-buy-more").hide());e.logCounter("QPQuantityTierFilterClickCount:"+b)}})}function A(){a("#cqd-qp-select-section-icon").live("click",function(b){a(this).hasClass("cqd-qty-icon-chevron-down")?(a(this).removeClass("cqd-qty-icon-chevron-down"),a(this).addClass("cqd-qty-icon-chevron-up"),a("#cqd-qp-selector").hasClass("cqd-qp-selector-without-header")&&(a("#cqd-qp-selector").removeClass("cqd-qp-selector-without-header"),a("#cqd-qp-selector").addClass("cqd-qp-selector-with-header")),a("#cqd-qp-selector").hasClass("cqd-qp-mb-selector-without-header")&&
(a("#cqd-qp-selector").removeClass("cqd-qp-mb-selector-without-header"),a("#cqd-qp-selector").addClass("cqd-qp-mb-selector-with-header"))):(a(this).removeClass("cqd-qty-icon-chevron-up"),a(this).addClass("cqd-qty-icon-chevron-down"),a("#cqd-qp-selector").hasClass("cqd-qp-selector-with-header")&&(a("#cqd-qp-selector").removeClass("cqd-qp-selector-with-header"),a("#cqd-qp-selector").addClass("cqd-qp-selector-without-header")),a("#cqd-qp-selector").hasClass("cqd-qp-mb-selector-with-header")&&(a("#cqd-qp-selector").removeClass("cqd-qp-mb-selector-with-header"),
a("#cqd-qp-selector").addClass("cqd-qp-mb-selector-without-header")));a("#cqd-qty-header-content").toggle(function(){c.animate(a("#cqd-qty-header-content"),{right:"0px"},300,"ease-out",function(){h.updateQPSheetHeight()})})})}function B(){a("#cqd-qty-header-content:not(.cqd-qty-mb-header-content)").live("mouseenter",function(b){!a(this).hasClass("cqd-qty-mb-header-content")&&4<=a(".cqd-qp-filter-action").size()&&a("#cqd-qty-header-content .a-carousel-left, #cqd-qty-header-content .a-carousel-right").show()});
a("#cqd-qty-header-content:not(.cqd-qty-mb-header-content)").live("mouseleave",function(b){!a(this).hasClass("cqd-qty-mb-header-content")&&4<=a(".cqd-qp-filter-action").size()&&a("#cqd-qty-header-content .a-carousel-left, #cqd-qty-header-content .a-carousel-right").hide()})}function C(){a("#cqd-qp-buy-more-submit").live("click",function(b){if(!b.updateDeliveryBlockOnQuantityChange){e.logCounter("QPBuyMoreQuantitySelectedCount");b.updateDeliveryBlockOnQuantityChange=1;a("input[type\x3d'radio'][name\x3d'quantity']:checked").prop("checked",
!1);b=a("#buy-more-quantity").val();var d=a(".cqd-qty-buy-more-radio").find("input[type\x3d'radio'][name\x3d'quantity']");d.attr("value",b);d.prop("checked",!0);var l=a("#buy-more-quantity").attr("min"),f=a("#buy-more-quantity").attr("max"),g=parseInt(b)||0,l=parseInt(l)||1,f=parseInt(f)||-1;e.logCounter("QPBuyMoreQuantitySelectedCount:"+g);g<l||0<f&&g>f?(a("#buy-more-quantity").hasClass("a-form-error")||(a("#buy-more-quantity").addClass("a-form-error"),a("#cqd-qp-max-quantity-note").addClass("a-color-error"),
a("#cqd-qp-max-quantity-note").addClass("a-text-bold")),d.prop("checked",!1),a("input[type\x3d'radio'][name\x3d'quantity']:first").prop("checked",!0),b=a("input[type\x3d'radio'][name\x3d'quantity']:checked").val(),a("span#selectedQuantity").text(b),a("#cqd-qp-ingress-next-tier-qty").show(),a("#cqd-qp-offer-save-message-section").hide(),e.logCounter("QPBuyMoreQuantityErrorCount")):(a("#buy-more-quantity").hasClass("a-form-error")&&(a("#buy-more-quantity").removeClass("a-form-error"),a("#cqd-qp-max-quantity-note").removeClass("a-color-error"),
a("#cqd-qp-max-quantity-note").removeClass("a-text-bold")),1<b?(a("#cqd-qp-ingress-next-tier-qty").hide(),a("#twisterPlusPriceSubtotalWW_feature_div").length&&a("#twisterPlusPriceSubtotalWW_feature_div").hide(),a("#cqd-qp-offer-save-message-section").show()):(a("#cqd-qp-ingress-next-tier-qty").show(),a("#cqd-qp-offer-save-message-section").hide()),h.updateBottomSheet(g),v(b),w(b),q.animateCloseCQDQuantityPicker(),h.hideSheet(),c.hide(a("#cqd-background")))}});a("#buy-more-quantity").live("keydown",
function(b){switch(b.which){case 13:a("#cqd-qp-buy-more-submit").trigger("click"),b.preventDefault()}})}function D(){a("input[type\x3d'radio'][name\x3d'quantity']").live("change",function(b){e.logCounter("pricing:cqd:QPQuantitySelectedCount");a(".cqd-qty-buy-more-radio").find("input[type\x3d'radio'][name\x3d'quantity']").prop("checked",!1);a("#buy-more-quantity").val("");a("#buy-more-quantity").hasClass("a-form-error")&&(a("#buy-more-quantity").removeClass("a-form-error"),a("#cqd-qp-max-quantity-note").removeClass("a-color-error"),
a("#cqd-qp-max-quantity-note").removeClass("a-text-bold"));b.updateDeliveryBlockOnQuantityChange||(b.updateDeliveryBlockOnQuantityChange=1,b=parseInt(a(this).val())||1,e.logCounter("pricing:cqd:QPQuantitySelectedCount:"+b),1<b?(a("#cqd-qp-ingress-next-tier-qty").hide(),a("#twisterPlusPriceSubtotalWW_feature_div").length&&a("#twisterPlusPriceSubtotalWW_feature_div").hide(),a("#cqd-qp-offer-save-message-section").show()):(a("#cqd-qp-ingress-next-tier-qty").show(),a("#cqd-qp-offer-save-message-section").hide()),
h.updateBottomSheet(b),v(b),w(b),q.animateCloseCQDQuantityPicker(),h.hideSheet(),c.hide(a("#cqd-background")))})}function v(b){a("form#addToCart input#quantity").val(b);a("span#selectedQuantity").text(b);c.trigger("a:dropdown:mobileQuantityDropDown:select",{value:b})}function w(b){var d=a("#buybox"),l=d.find("#deliveryBlockSelectAsin").val(),c=d.find("#deliveryBlockSelectMerchant").val();if(l&&c){var e=[];e.push("asin\x3d"+l);e.push("qt\x3d"+b);e.push("quantity\x3d"+b);e.push("merchantId\x3d"+c);
E.sendAJAX(d,e)}}function F(){a(function(){if(a("#cqd-qp-ingress").length&&a("#cqd-qp-ingress").is(":visible")){e.logCounter("QPDisplayedCount");a("#twisterPlusPriceSubtotalWW_feature_div").length&&a("#twisterPlusPriceSubtotalWW_feature_div").hide();a("#cqd-qp-offer-save-message-section").hide();a("input[type\x3d'radio'][name\x3d'quantity']:first").prop("checked",!0);var b=a("input[type\x3d'radio'][name\x3d'quantity']:checked").val();a("span#selectedQuantity").text(b);h.updateFilterBlockDimensions()}})}
function x(){F();z();A();B();C();D()}var r=m.ue,y=!1,t=500,u=167,e={isNonEmptyString:function(a){return a!==n&&""!==a},logCounter:function(a,d){if(e.isNonEmptyString(a))a="pricing:cqd:"+a,r&&r.count&&(d===n&&(d=(r.count(a)||0)+1),r.count(a,d));else throw Error("counterKey must be non empty string");},Timer:function(a){if(e.isNonEmptyString(a))this._timerName=a,this._startTime=0;else throw Error("timerName must be non empty string");}};e.Timer.prototype={start:function(){this._startTime=Date.now()},
stop:function(){this._startTime&&e.logCounter(this._timerName,Date.now()-this._startTime)}};var q={animateOpenCQDQuantityPicker:function(){a("#cqd-web-qp-content").show(function(){c.animate(a("#cqd-web-qp-content"),{right:"0px"},300,"ease-out",function(){p.createAll();p.initializeAll();a("#cqd-qty-header-content .a-carousel-left, #cqd-qty-header-content .a-carousel-right").hide();a("#cqd-qty-header-content li.a-carousel-card").css("visibility","");a(".cqd-qp-content-item:visible:gt(9)").hide();a("#cqd-web-qp-content .a-icon-close").show()})});
a("body").css("overflow","hidden")},animateCloseCQDQuantityPicker:function(){var b="-"+(a("#cqd-web-qp-content").width()+50)+"px";c.animate(a("#cqd-web-qp-content"),{right:b},300,"ease-out",function(){a("#cqd-web-qp-content").css({right:"-800px"});a("#cqd-web-qp-content .a-icon-close").hide()});a("body").css("overflow","auto")}},h={showSheet:function(){k.when("a-sheet").execute("a-sheet-example2",function(a){var d=a.get("cqd-qp-bottom-sheet");d&&a.showSheet(d)})},hideSheet:function(){k.when("a-sheet").execute("a-sheet-example2",
function(a){var d=a.get("cqd-qp-bottom-sheet");d&&a.hideSheet(d)})},updateQPSheetHeight:function(){var b=t-55,d=t-u;a(".cqd-qp-mb-selector-with-header").css("height",d);a(".cqd-qp-mb-selector-without-header").css("height",b)},updateFilterBlockDimensions:function(){var b=a("#cqd-qp-filter-block-1").height(),b=b+2;a(".cqd-qp-filter-block-all").css("height",b);b/=2.5;a(".cqd-qp-filter-block-all-content").css("padding",b+"px 0px");u=a("#cqd-qty-header").height();u+=6},hideDetailsSheet:function(){k.when("a-sheet").execute("a-sheet-example2",
function(a){var d=a.get("cqd-qp-details-sheet");d&&a.hideSheet(d)})},showDetailsSheet:function(){k.when("a-sheet").execute("a-sheet-example2",function(a){var d=a.get("cqd-qp-details-sheet");d&&a.showSheet(d)})},updateBottomSheet:function(b){a(".cqd-qp-filter-block").each(function(d,c){c=a(c).find(".cqd-tier-details");var f=c.find(".cqd-min-qty").text(),g=c.find(".cqd-max-qty").text(),f=parseInt(f)||0,g=parseInt(g)||0;if(b>=f){if(0>=g||b<=g)if(e.logCounter("QPOfferQuantitySelectedCount"),f=c.find(".cqd-savings").text(),
g=c.find(".cqd-price").text(),d=c.find(".cqd-savings-perc").text(),c=c.find(".cqd-currency").text(),f=parseFloat(f)||-1,-1===f)a("#cqd-qp-ingress-next-tier-qty").show(),a("#cqd-qp-offer-save-message-section").hide();else return g=parseFloat(g)||0,a("#cqd-qp-savings-details-table").find("#cqd-qp-quantity").text(b),a("#cqd-qp-savings-details-table").find("#cqd-qp-price-total").text(c+Number(b*(g+f)).toFixed(2)),a("#cqd-qp-savings-details-table").find("#cqd-qp-discount-value").text(d),a("#cqd-qp-savings-details-table").find("#cqd-qp-discount-price").text(c+
Number(b*f).toFixed(2)),a("#cqd-qp-savings-details-table").find("#cqd-qp-subtotal").text(c+Number(b*g).toFixed(2)),a("#cqd-qp-offer-price").text(c+Number(b*g).toFixed(2)),a("#cqd-qp-offer-save").text(c+Number(b*f).toFixed(2)),!1}else 0===d&&(e.logCounter("QPNonOfferQuantitySelectedCount"),a("#cqd-qp-ingress-next-tier-qty").show(),a("#cqd-qp-offer-save-message-section").hide())})}},E={sendAJAX:function(b,c){var h=new e.Timer("QuantityUpdateAjaxTimer");h.start();a.ajax({type:"POST",url:"/gp/product/features/dp-fast-track/udp-ajax-handler/get-quantity-update-message.html?ie\x3dUTF8",
contentType:"application/x-www-form-urlencoded;charset\x3dutf-8",data:c.join("\x26"),accordionRow:b,dataType:"html",success:function(a){h.stop();null!==a&&""!==a&&b.find("#deliveryBlockMessage").replaceWith(a);e.logCounter("QuantityUpdateAjaxSuccess")},error:function(a,b,c){h.stop();e.logCounter("QuantityUpdateAjaxError")}})}};c.declarative("a-sheet","click",function(a){h.showSheet()});c.declarative("cqd-side-sheet","click",function(b){e.logCounter("QPIngressButtonClickCount");c.show(a("#cqd-background"));
q.animateOpenCQDQuantityPicker()});c.declarative("close-cqd-side-sheet","click",function(b){e.logCounter("QPCloseClickCount");q.animateCloseCQDQuantityPicker();c.hide(a("#cqd-background"));a("#buy-more-quantity").hasClass("a-form-error")&&(a("#buy-more-quantity").val(""),a("#buy-more-quantity").removeClass("a-form-error"),a("#cqd-qp-max-quantity-note").removeClass("a-color-error"),a("#cqd-qp-max-quantity-note").removeClass("a-text-bold"))});c.on("a:sheet:changeHeight:cqd-qp-bottom-sheet",function(a){t=
a.sheet.$container.height();h.updateQPSheetHeight()});c.on("a:sheet:afterShow:cqd-qp-details-sheet",function(a){e.logCounter("QPSavingDetailsClickCount")});c.on("a:sheet:afterShow:cqd-qp-bottom-sheet",function(b){e.logCounter("QPIngressButtonClickCount");a(".cqd-qp-content-item:visible:gt(9)").hide();t=b.sheet.$container.height();y||(h.updateFilterBlockDimensions(),p.createAll(),p.initializeAll(),y=!0);h.updateQPSheetHeight()});c.on("a:popover:afterShow:cqd-qp-details-modal",function(a){e.logCounter("QPSavingDetailsClickCount")});
c.on("load",function(){x()});c.on("a:pageUpdate",function(){x()})})});