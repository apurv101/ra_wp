"use strict";(self.webpackChunkFusion=self.webpackChunkFusion||[]).push([[10681],{5137:(e,t,r)=>{r.d(t,{Z:()=>o});var i=r(91931),n=r(33497),a=r(57444);const o=(0,i.zo)("button",(e=>({...(0,n.Z)({$theme:e.$theme,radius:e.radius}),textAlign:"center",color:e.$theme.colors.negative,...e.disabled?(0,a.Z)(e.$theme):{}})))},94229:(e,t,r)=>{r.d(t,{Z:()=>q});var i=r(36151),n=r(91631),a=r(52246),o=r(47986),l=r(91931),s=r(76150),d=r(40836),c=r(83960),u=r(22787),h=r(55186),m=r(34626),g=r(82532),Z=r(72275),p=r(70247),b=r(24934),f=r(4864),y=r(37573),C=r(74622),v=r(2237),$=r(62459);var O=r(69694),I=r(72179),z=r(3015),B=r(28222),_=r(88885),k=r(73472),D=r(34567),T=r(33535),S=r(62149),P=r(78989),x=r(65014),M=r(33990);const U=e=>{const t=(0,T.ZP)(),r=(0,T.XL)(),{checkoutType:i}=(0,I.Z)(),{startTiming:n}=(0,k.K3)(),l=(0,_.T)(),{restaurantLink:s,onGoToStore:u}=(0,Z.Z)(),{serverCart:h}=(0,p.iQ)(),m=(0,f.ZP)(void 0,!h.data?.isOwner),{isDraftOrderCreator:g,hasGroupOrder:b,isBillSplitOrder:y,isEditOrder:C,mealPlanUUID:v}=(0,c.Z)(),{isOnPremiseDeliveryOrder:$}=(0,P.Z)(),O=(0,S.TH)(),z="eats:checkout_button",B={checkoutType:i,isBillSplitOrder:y,isDraftOrderParticipant:!g,isGuestOrder:e.isGuestMode,isGroupOrder:b,isEditScheduledOrder:C,...v?{mealPlanUUID:v}:null};return 0===m?(0,M.tZ)(D.Z,{$as:a.rU,to:s,onClick:u,children:(0,M.tZ)(d.v,{id:"shared.addItems"})}):$?(0,M.tZ)(D.Z,{$as:a.rU,rel:"nofollow",to:e.authHref?{}:(0,o.vN_)(O,"premiseDeliveryInfo"),href:e.authHref,onClick:async t=>{e.disabled?t.preventDefault():e.onClick(t)},disabled:e.disabled,children:l("shared.go_to_checkout")}):(0,M.tZ)(D.Z,{$as:a.rU,rel:"nofollow",to:e.authHref?{}:e.checkoutUrl,href:e.authHref,"data-testid":"go-to-checkout-button",onClick:async i=>{e.disabled?i.preventDefault():(e.authHref?await r(z,B):(n(x.B.CHECKOUT_LOAD_COMPLETE_EVENT_NAME),n(x.B.CHECKOUT_LOAD_COMPLETE_WITH_CMP_EVENT_NAME),n(x.B.CHECKOUT_PAGE_RENDER_EVENT_NAME),t(z,B)),e.onClick(i))},disabled:e.disabled,children:l("shared.go_to_checkout")})};var w=r(26786),E=r(86695),G=r(1058),L=r(78365),H=r(23314);const X=(0,l.w1)(u.Z,(e=>{let{$theme:t}=e;return{marginTop:t.sizing.scale300}})),A=(0,l.w1)(w.Z,(e=>{let{$theme:t}=e;return{marginTop:t.sizing.scale300}}));function R(e,t,r){if("secondary_btn"!==e&&"tertiary_btn"!==e)return null;const i="secondary_btn"===e?X:A;return(0,M.tZ)(i,{$as:a.rU,to:t,disabled:r,children:(0,M.tZ)(d.v,{id:"checkout_as_guest"})})}const q=e=>{const t=(0,S.TH)(),r=(0,n.k6)(),{hideSidebarCart:l}=(0,s.Lb)(),{isDraftOrderCreator:u,isDraftOrderCartLocked:_,storeUuid:k,isDraftOrderParticipant:D,isBillSplitParticipant:T,currentUserGroupedItems:P}=(0,c.Z)(),{user:x}=(0,m.Z)(),w=(0,L.Z)(k),A=t=>{e.onNavigateToCheckout&&e.onNavigateToCheckout(t)},{isCartUnderMBS:q}=(0,g.f)(),{isCartDrafting:F}=(0,I.Z)(),{isEnabled:N,treatment:V}=(0,G.Z)(),{guestCheckoutEnabled:Y,emitGuestCheckoutEvent:K,guestCheckoutInGuestModeXP:W}=(0,y.Z)(),{selectedInstruction:j}=(0,i.useContext)(b.X3),{data:Q,isFetching:J,isLoading:ee}=function(e,t){const r=(0,$.Z)("getGuestCheckoutEligibilityV1"),i=(0,v.H)("getGuestCheckoutEligibilityV1",e);return(0,C.useQuery)({queryKey:i,queryFn:e=>{let{queryKey:t}=e;return r.request("getGuestCheckoutEligibilityV1",t[1])},...t?.queryObserverOptions})}({interactionType:j?.interactionType},{queryObserverOptions:{enabled:Boolean(Y)}}),te=Y&&(J||ee),re=Q?.isEligible,ie=(0,z.Z)(),ne=(0,B.Z)(),{isBundledOrder:ae}=(0,p.Dz)();(0,i.useEffect)((()=>{te||K(re)}),[K,te,re]);const oe=e.$disabled||q||te,{restaurantLink:le,onGoToStore:se}=(0,Z.Z)({storeUuid:k}),{serverCart:de}=(0,p.iQ)(),ce=(0,f.ZP)(void 0,!de.data?.isOwner),{isGroupOrder:ue,isScheduledOrder:he}=(0,O.Z)(k),me=Boolean(re&&Y&&!ue&&!he),ge=ie&&ne,Ze=(0,H.Z)();return x.data?.isLoggedIn||ge?T&&P?.confirmed||D&&!T?(0,M.tZ)(E.zx,{isFullWidth:!0,onClick:()=>{r.push(le),se()},disabled:_,children:(0,M.tZ)(d.v,{id:"shared.addItems"})}):(0,M.BX)(M.HY,{children:[!D||T?(0,M.tZ)(U,{isGuestMode:me,disabled:oe,onClick:async e=>{l(),A(e)},checkoutUrl:Ze}):null,u&&_?(0,M.tZ)(X,{$as:a.rU,to:(0,o.vN_)(t,"unlockGroupCart"),children:(0,M.tZ)(d.v,{id:"go.unlock_cart"})}):ce>0&&!ae&&(!F||ue)?(0,M.tZ)(X,{$as:a.rU,to:le,onClick:e=>{if(N&&"cart_animation"===V&&w)return e.preventDefault(),e.stopPropagation(),void l();se()},disabled:_,children:(0,M.tZ)(d.v,{id:"shared.addItems"})}):null]}):(0,M.BX)(M.HY,{children:[(0,M.tZ)(h.Z,{type:"login",redirectTo:(0,o.Zs0)(t),isGuestMode:me,children:e=>{let{href:t,onClick:r}=e;return(0,M.tZ)(U,{isGuestMode:me,disabled:oe,onClick:async e=>{A(e),r(e)},authHref:t,checkoutUrl:Ze})}}),me?R(W,Ze,oe):null]})}},60147:(e,t,r)=>{r.d(t,{ZP:()=>h});var i=r("__fusion__1019"),n=r(38237),a=r(28397),o=r(20631),l=r(91931),s=r(8639);var d=r(33990);const c=(0,l.zo)("div",(e=>{let{$height:t,$width:r}=e;return{position:"relative",width:r||0,height:t||0}})),u=(0,l.zo)("div",(e=>{let{$theme:t,$backgroundColor:r,$color:i,$top:n,$bottom:a,$left:o,$right:l}=e;return{position:"absolute",display:"flex",alignItems:"center",justifyContent:"center",top:n,right:l,left:o,bottom:a,width:t.sizing.scale700,borderRadius:t.borders.radiusFull,height:t.sizing.scale700,...r?{backgroundColor:t.colors[r]}:{},...i?{color:t.colors[i]}:{}}})),h=e=>{let{width:t,height:r,children:h,badge:m,position:g}=e;const[,Z]=(0,l.hQ)();return(0,d.BX)(c,{$width:t,$height:r,children:[h,(()=>{if("icon"!==m?.content?.type)return;const e=m?.content?.icon,{backgroundColor:t,color:r}=(e=>{let t="contentOnColor",r=null;return"standard"===e?.type?r=(0,s.Lq)(e?.standard):"custom"===e?.type&&(t=(0,s.Lq)(e?.custom?.contentColor),r="JOY_PRIMARY"===e?.custom?.backgroundColor?(0,s.Lq)("WARNING"):(0,s.Lq)(e?.custom?.backgroundColor)),{color:t,backgroundColor:r}})(m?.color),l=(e=>{const t={$bottom:"auto",$top:"auto",$left:"auto",$right:"auto"};switch(e){case"BOTTOM_LEFT":return{...t,$bottom:"0",$left:"0"};case"BOTTOM_RIGHT":return{...t,$bottom:"0",$right:"0"};case"TOP_LEFT":return{...t,$top:"0",$left:"0"};case"TOP_RIGHT":return{...t,$top:"0",$right:"0"};default:return{...t}}})(g);switch(e){case"CHECKMARK":return(0,d.tZ)(u,{$color:r,$backgroundColor:t,...l,"data-test":"badge-icon",children:(0,d.tZ)(n.Z,{height:Z.sizing.scale500,width:Z.sizing.scale500,children:(0,d.tZ)(o.Z,{})})});case"ARROW_CIRCULAR":return(0,d.tZ)(u,{$color:r,$backgroundColor:t,...l,"data-test":"badge-icon",children:(0,d.tZ)(n.Z,{height:Z.sizing.scale500,width:Z.sizing.scale500,children:(0,d.tZ)(a.Z,{})})});case"X":return(0,d.tZ)(u,{$color:r,$backgroundColor:t,...l,"data-test":"badge-icon",children:(0,d.tZ)(n.Z,{height:Z.sizing.scale500,width:Z.sizing.scale500,children:(0,d.tZ)(i.default,{size:"24"})})});default:return null}})()]})}},96306:(e,t,r)=>{r.d(t,{Z:()=>y});var i=r(43193),n=r(91931),a=r(31913),o=r(47073),l=r(60147),s=r(59210),d=r(88885),c=r(33990);const u=(0,n.zo)("div",(e=>{let{$theme:t}=e;return{display:"flex",flexDirection:"column",padding:`${t.sizing.scale650} 0`}})),h=(0,n.zo)("div",{display:"flex",justifyContent:"space-between",alignItems:"flex-start",cursor:"pointer"}),m=(0,n.zo)("div",(e=>{let{$theme:t}=e;return{display:"flex",justifyContent:"flex-start",alignItems:"center",padding:`${t.sizing.scale600} 0`,gap:t.sizing.scale300}})),g=(0,n.zo)("div",{display:"flex",alignItems:"center"}),Z=(0,n.zo)("div",(e=>{let{$theme:t}=e;return{display:"grid",gridTemplateColumns:`${t.sizing.scale550} auto 1fr`,alignItems:"center"}})),p=(0,n.zo)("div",(e=>{let{$theme:t}=e;return{display:"flex",width:"80%",justifyContent:"flex-start",flexDirection:"column",gap:t.sizing.scale100}})),b=(0,n.zo)("img",(e=>{let{$theme:t,$opacity:r}=e;return{height:t.sizing.scale1200,width:t.sizing.scale1200,objectFit:"cover",flexShrink:0,opacity:r}})),f=e=>{let{item:t,sharedData:r,handleActionButtons:f,setSelectedShoppingCartItemUuid:y,isLoading:C}=e;const[,v]=(0,n.hQ)(),$=(0,d.T)(),O=t?.cursory?.descriptor?.displayableName?.text?.text??"",I=i.useMemo((()=>t?.cursory?.descriptor?.salientNotes||null),[t]),z=i.useMemo((()=>t?.cursory?.thumbnailImage?.imageUrl?.dayImageUrl||null),[t]),B=t?.cursory?.thumbnailImage?.imageAlpha??1,_=t?.cursory?.actionButtons;return(0,c.BX)(u,{children:[(0,c.BX)(h,{onClick:()=>{if(C)return null;const e=t.cursory?.descriptor?.itemId?.shoppingCartItemUuid;e&&y(e)},children:[(0,c.BX)(p,{children:[O?(0,c.tZ)(s.Uc,{children:O}):null,I?.map(((e,t)=>{const r="icon"===e?.text?.richTextElements?.[0]?.type,i=r?`0 ${v.sizing.scale0} 0`:"0";return r?(0,c.tZ)(Z,{children:(0,c.tZ)(a.ZP,{text:e.text,padding:i})},t):(0,c.tZ)(g,{children:(0,c.tZ)(a.ZP,{text:e.text})},t)}))]}),r?(0,c.tZ)(l.ZP,{badge:r?.itemThumbnailBadge,width:v.sizing.scale1200,height:v.sizing.scale1200,position:"TOP_RIGHT",children:z?(0,c.tZ)(b,{src:z,$opacity:B,alt:$("activeOrder.summaryDetails.productThumbnail"),"data-testid":"summary-details-product-thumbnail"}):null}):null]}),_?(0,c.tZ)(m,{children:_?.map(((e,r)=>e?.button?(0,c.tZ)("div",{children:(0,c.tZ)(o.Z,{viewModel:e.button,onClick:()=>e.action?f(e.action,t):null,isDisabled:C})},`button-${r}`):null))}):null]})},y=i.memo(f)},34267:(e,t,r)=>{r.d(t,{Z:()=>Z});var i=r(40836),n=r(86695),a=r("__fusion__886"),o=r(91631),l=r(72275),s=r(91931),d=r(73472),c=r(65014),u=r(95461),h=r(33990);const m=(0,s.zo)("div",(()=>({display:"flex",justifyContent:"right"}))),g=(0,s.zo)(n.zx,(e=>{let{$theme:t}=e;return{display:"flex",gap:t.sizing.scale300}})),Z=()=>{const{restaurantLink:e,onGoToStore:t}=(0,l.Z)(),r=(0,o.k6)(),{startTiming:n}=(0,d.K3)(),s=(0,u.Z)();return(0,h.tZ)(m,{children:(0,h.BX)(g,{onClick:()=>{n(c.B.CART_ADD_ITEM_CLICK,{shouldOverride:!0}),t(),r.push(e)},kind:"secondary",size:"compact",shape:"pill",...s?{overrides:{Root:{style:e=>{let{$theme:t}=e;return t.typography.LabelSmall}}}}:null,children:[(0,h.tZ)(a.default,{size:16}),(0,h.tZ)(i.v,{id:"shared.addItems"})]})})}},95345:(e,t,r)=>{r.d(t,{Z:()=>be});var i=r(43193),n=r(40836),a=r(60849),o=r(91931),l=r(16397),s=r(27871),d=r(40606),c=r(40017),u=r(99863),h=r(4864),m=r(70247),g=r(33990);const Z=()=>{const{serverCart:e}=(0,m.iQ)(),t=(0,s.B0)("fareBreakdown"),r=(0,h.ZP)(void 0,!e.data?.isOwner),[,i]=(0,o.hQ)();return r?(0,g.tZ)(d.Z,{source:t,loaded:e=>{const t=e.charges?.find((e=>"Promotion"===e.title?.text));return t?(0,g.tZ)(u.jH,{charges:[t]}):null},error:()=>null,loading:()=>(0,g.tZ)(c.sM,{$width:i.sizing.scale1000})}):null};var p=r(47667),b=r(88885),f=r(31913);const y=()=>{const e=(0,p.Z)(),{serverCart:t}=(0,m.iQ)(),r=(0,s.B0)("subtotal"),i=(0,h.ZP)(void 0,!t.data?.isOwner),n=(0,b.T)();return i?(0,g.tZ)(d.Z,{source:r,loaded:t=>e&&t.formattedSubtotalAmount?(0,g.tZ)("span",{"aria-label":n("shared.subtotal"),children:(0,g.tZ)(f.ZP,{text:t.formattedSubtotalAmount})}):(0,g.tZ)("span",{"aria-label":n("shared.subtotal"),children:t.subtotal?.formattedValue}),error:()=>null,loading:()=>(0,g.tZ)(c.sM,{$width:"40px"})}):null};var C=r(50882),v=r(62091),$=r("__fusion__685"),O=r(64388),I=r(83960),z=r(72179),B=r(52246),_=r(72275),k=r(15840),D=r(34267),T=r(70313),S=r(47885),P=r(24688),x=r(13148),M=r(70940),U=r(84272),w=r(41063),E=r(94988),G=r(61304),L=r(33535),H=r(89400),X=r(87444);const A=function(e,t){t=t??[];const r=(0,X.Z)("alcohol_scheduling_mixed_cart"),{isBundledOrder:i,isGroupOrder:n,isEditOrder:a}=(0,m.Dz)(),o=t.length>0&&t.every((e=>t=>t.draftOrderUUID===e)(e));return Boolean(r&&!i&&!n&&!a&&o)};var R=r(5639),q=r(91793),F=r(73472),N=r(65014),V=r(33023),Y=r(96306),K=r(44997);const W=e=>{let{section:t}=e;const[r,n]=i.useState(null),{isLiveOrder:a}=(0,K.W)();if(!a||!t)return null;const o=t?.metadata?.header?.title,l={text:o,type:"text"},s=t?.items;if(!s||0===s?.length)return null;const d=(e,t)=>r;return(0,g.BX)("div",{children:[(0,g.tZ)(f.Dy,{element:l}),s?.map(((e,r)=>(0,g.tZ)("div",{children:(0,g.tZ)(Y.Z,{item:e,sharedData:t?.sharedData,handleActionButtons:d,setSelectedShoppingCartItemUuid:n})},r)))]})},j=(0,o.zo)("section",(e=>{let{$theme:t}=e;return{margin:`${t.sizing.scale1000} ${t.sizing.scale600} ${t.sizing.scale600} ${t.sizing.scale600}`,display:"flex",flexDirection:"column"}})),Q=e=>{let{cartPageHeader:t}=e;const{isLiveOrder:r}=(0,K.W)();if(!r||!t)return null;const i=t?.title,n=t?.subtitle;return(0,g.BX)(j,{children:[i?(0,g.tZ)(f.ZP,{text:i}):null,n?(0,g.tZ)(f.ZP,{text:n}):null]})},J=()=>{const{currentUserItemCount:e}=(0,I.Z)();return 1===e?(0,g.tZ)(n.v,{id:"shared.numCartItemsSingular",data:{numCartItems:e}}):(0,g.tZ)(n.v,{id:"shared.numCartItems",data:{numCartItems:e}})},ee=(0,o.zo)("div",(e=>{let{$theme:t}=e;return{borderTop:`1px solid ${t.colors.borderOpaque}`}})),te=(0,o.zo)("div",(e=>{let{$theme:t,$isCartDrafting:r}=e;return{marginLeft:`-${t.sizing.scale600}`,marginRight:`-${t.sizing.scale600}`,...r?{minHeight:t.sizing.scale100,background:t.colors.backgroundSecondary}:{minHeight:t.sizing.scale300,background:t.colors.backgroundTertiary}}})),re=(0,o.zo)("div",(()=>({display:"flex",flexDirection:"row"}))),ie=(0,o.zo)(B.rU,(e=>{let{$theme:t}=e;return{margin:`0 -${t.sizing.scale600}`,display:"flex",flexDirection:"row"}})),ne=(0,o.zo)("div",(e=>{let{$theme:t}=e;return{display:"flex",flexDirection:"column",gap:t.sizing.scale600}})),ae=(0,o.zo)(v.Z,(e=>{let{$theme:t}=e;return{width:t.sizing.scale1600,height:t.sizing.scale1600,paddingLeft:t.sizing.scale600,paddingRight:t.sizing.scale600,borderRadius:t.borders.radiusFull}})),oe=(0,o.zo)("div",(e=>{let{$theme:t}=e;return{flexGrow:1,display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"flex-start",gap:t.sizing.scale0}})),le=(0,o.zo)("div",(e=>{let{$theme:t}=e;return{width:t.sizing.scale1600,display:"flex",justifyContent:"center",alignItems:"center",color:t.colors.contentStateDisabled}})),se=(0,o.zo)("div",(e=>{let{$theme:t}=e;return{marginTop:`-${t.sizing.scale300}`}})),de=e=>{let{quantitySelectType:t="picker",cartItems:r,cartItemsGroup:n,isSingleOrderWithCartItemsGroups:a=!1}=e;const{isCartDrafting:o}=(0,z.Z)(),{isLiveOrder:s}=(0,K.W)(),{draftOrder:d,isBundledOrder:c}=(0,m.Dz)(),{restaurantLink:u,onGoToStore:h}=(0,_.Z)(),{store:Z}=(0,O.ZP)(d?.shoppingCart.storeUuid),p=(0,L.ZP)(),b=(c||a)&&void 0!==n,{isMobile:y}=(0,R.hU)(),v=Boolean(r),{stopTiming:I}=(0,F.K3)();return i.useEffect((()=>{v&&I(N.B.CART_LOAD_COMPLETE_WITH_ITEMS,{shouldEmitTiming:!0})}),[v,I]),(0,g.BX)(g.HY,{children:[b?(0,g.BX)(g.HY,{children:[a?(0,g.tZ)(re,{children:(0,g.BX)(oe,{children:[(0,g.tZ)(f.ZP,{text:n.title}),(0,g.tZ)(f.ZP,{text:n.subtitle})]})}):(0,g.tZ)("div",{children:(0,g.BX)(ie,{to:u,onClick:e=>{u?h():(e.preventDefault(),p("eats:click_store_link",{source:"cart",label:"store_not_loaded"}))},children:[(0,g.tZ)(ae,{src:n.iconUrl||""}),(0,g.BX)(oe,{children:[(0,g.tZ)(f.ZP,{text:n.title}),(0,g.tZ)(f.ZP,{text:n.subtitle})]}),(0,g.tZ)(le,{children:(0,g.tZ)($.default,{size:24})})]})}),n.actionableBanners?(0,g.tZ)(ne,{children:n.actionableBanners?.map(((e,t)=>(0,g.tZ)(k.C,{bannerAction:e},`saving-banner-${t}`)))}):null,(0,g.tZ)(P.IY,{})]}):null,(0,g.tZ)(l.Z,{cmpCartItems:r,quantitySelectType:t,fulfillmentIssueOptions:Z?.data?.fulfillmentIssueOptions,isCartDrafting:o}),!c&&o?(0,g.BX)(i.Fragment,{children:[y?(0,g.tZ)(D.Z,{}):null,(0,g.tZ)("div",{children:(0,g.tZ)(te,{$isCartDrafting:!0})})]}):null,s?null:(0,g.tZ)(C.Z,{store:Z,instructionsPadding:0,isRegularOrder:!0}),o&&c?(0,g.tZ)("div",{children:(0,g.tZ)(te,{$isCartDrafting:!0})}):o?null:n?(0,g.tZ)(te,{}):(0,g.tZ)(ee,{})]})},ce=(0,o.zo)("div",{display:"flex",alignItems:"center"}),ue=(0,o.zo)("div",(e=>{let{$theme:t}=e;return{...t.typography.LabelMedium,flexGrow:1}})),he=(0,o.zo)("div",(e=>{let{$theme:t}=e;return{...t.typography.ParagraphMedium,color:t.colors.contentSecondary,paddingRight:t.sizing.scale100}})),me=(0,o.zo)("div",(e=>{let{$theme:t}=e;return{...t.typography.LabelMedium}})),ge=(0,o.zo)("div",(e=>{let{$theme:t}=e;return{...t.typography.HeadingXSmall,display:"flex",justifyContent:"space-between"}})),Ze=(0,o.zo)("div",(e=>{let{$isXlbFrictionBatch2CheckoutEnabled:t}=e;return{width:t?"unset":"100%"}})),pe=(0,o.zo)("div",(e=>{let{$theme:t}=e;return{...t.typography.ParagraphSmall}})),be=e=>{let{quantitySelectType:t="picker"}=e;const r=(0,L.ZP)(),o=i.useRef(!1),{inCartFeesDraft:l,isCartDrafting:d}=(0,z.Z)(),{isStorePrecheckoutBundlingEnabled:c}=(0,S.Z)(),h=(0,p.Z)(),{isBundledOrder:b,draftOrder:f}=(0,m.Dz)(),C=f?.storeUuid,{store:v}=(0,O.ZP)(C),$=(0,M.Z)(C||""),{belowMBSPercent:I,isTreated:B}=(0,T.q)(v?.data),{cartItems:_,upsellCatalogSections:k,subtotal:D,subTotalFareBreakdown:X,cartPageHeader:R,fulfilledItemDetails:F,unFulfilledItemDetails:N,inReviewItemDetails:Y,uneditableItemDetails:K}=(0,s.ZP)(["cartItems","upsellCatalogSections","subtotal","subTotalFareBreakdown","cartPageHeader","fulfilledItemDetails","unFulfilledItemDetails","inReviewItemDetails","uneditableItemDetails"]).checkoutPayloads,j=v.data?.location?.locationType,{subtotalDisclaimers:te}=D||{},{primaryBundledStoreUuid:re,primaryDraftOrderUUID:ie}=(0,U.Z)(),ne=(0,a.ip)({...w.v.eats_web_checkout_redesign_cart_promotions_enabled,defaultValue:!1}),ae=(0,a.ip)({...E.r.eats_web_cart_display_total_promotion_enabled,defaultValue:!1}),oe=A(f?.uuid,_?.cartItemsGroups);i.useEffect((()=>{Boolean(oe&&_?.cartItemsGroups?.length&&_?.cartItemsGroups?.length>0)&&!o.current&&(r("eats:restricted_items_sectioned_cart_impression",{storeUuid:C||"",cartItemsGroupsCount:_?.cartItemsGroups?.length??0}),o.current=!0)}),[_?.cartItemsGroups,r,oe,C]);const le=(0,V.SF)(j);return(0,g.BX)(g.HY,{children:[(0,g.tZ)(Q,{cartPageHeader:R}),c&&b?null:(0,g.BX)(g.HY,{children:[(0,g.tZ)(P.IY,{}),oe||d?null:(0,g.BX)(g.HY,{children:[(0,g.BX)(ce,{children:[(0,g.tZ)(ue,{children:(0,g.tZ)(J,{})}),(0,g.tZ)(he,{children:(0,g.BX)(he,{children:[le,":"]})}),(0,g.tZ)(me,{children:(0,g.tZ)(y,{})})]}),(0,g.tZ)(ee,{})]})]}),(c||oe)&&_?.cartItemsGroups?_?.cartItemsGroups?.map((e=>(0,g.tZ)(m.zW,{draftOrderUUID:e.draftOrderUUID,children:(0,g.tZ)(de,{isSingleOrderWithCartItemsGroups:oe,quantitySelectType:t,cartItems:e.cartItems??void 0,cartItemsGroup:e})},e.draftOrderUUID))):(0,g.BX)(g.HY,{children:[(0,g.tZ)(W,{section:Y?.inReviewItemDetails}),(0,g.tZ)(de,{isSingleOrderWithCartItemsGroups:oe,quantitySelectType:t,cartItems:_?.cartItems??void 0}),(0,g.tZ)(W,{section:N?.unfulfilledItemDetails}),(0,g.tZ)(W,{section:K?.unEditableItemDetails}),(0,g.tZ)(W,{section:F?.foundItemDetails}),(0,g.tZ)(W,{section:F?.replacedItemDetails})]}),ne&&v.data&&k?(0,g.tZ)(x.Z,{store:v.data,isGrocery:$,upsellCatalogSectionsPayload:k,primaryDraftOrderUUID:ie,primaryBundledStoreUUID:re,surface:G.b.CART_UPSELL}):null,X?(0,g.tZ)(q.Z,{}):(0,g.tZ)(g.HY,{children:l?(0,g.tZ)(u.A1,{storeLocationType:j}):(0,g.BX)(ge,{children:[(0,g.BX)(Ze,{$isXlbFrictionBatch2CheckoutEnabled:h,children:[le,B&&0===I?(0,g.tZ)(pe,{children:(0,g.tZ)(n.v,{id:"cart.shared.savings.applied"})}):null]}),(0,g.tZ)(y,{})]})}),te?(0,g.tZ)("div",{children:te?.map(((e,t)=>(0,g.tZ)(H.Z,{badge:e},t)))}):null,ae&&!X?(0,g.tZ)("div",{children:(0,g.tZ)(se,{children:(0,g.tZ)(Z,{})})}):null]})}},15840:(e,t,r)=>{r.d(t,{Z:()=>x,C:()=>M});var i=r(43193),n=r(81231),a=r(91931),o=r(75161),l=r(91086),s=r(33259),d=r(34217),c=r(74820),u=r(70589),h=r(4909),m=r(62091),g=r(5639),Z=r(4661),p=r(52909),b=r(33990);const f=(0,a.zo)("ul",(e=>{let{$theme:t}=e;return{}})),y=(0,a.zo)("li",(e=>{let{$theme:t}=e;return{display:"flex",padding:`${t.sizing.scale600} 0`}})),C=(0,a.zo)("div",(e=>{let{$theme:t}=e;return{padding:t.sizing.scale700}})),v=(0,a.zo)("div",(e=>{let{$theme:t}=e;return{}})),$=(0,a.zo)("div",(e=>{let{$theme:t,$isBold:r}=e;return Object.assign({marginBottom:t.sizing.scale100},r?{...t.typography.LabelMedium}:{...t.typography.ParagraphSmall})})),O=(0,a.zo)("div",(e=>{let{$theme:t}=e;return{...t.typography.ParagraphSmall}})),I=(0,a.zo)(m.Z,(e=>{let{$isDarkMode:t}=e;return{...t?{filter:"invert(100%)"}:{}}})),z=e=>e.bottomSheet?(0,b.tZ)(Z.P,{bottomSheet:e.bottomSheet,onClose:()=>e.onClose(),isOpen:e.isOpen,__invertIconColorOnDarkMode:!0}):null,B=e=>{const{themeId:t}=(0,p.aG)(),r="dark"===t;return(0,b.BX)(o.u_,{closeable:!0,isOpen:e.isOpen,onClose:()=>e.onClose(),children:[(0,b.tZ)(l.xB,{title:e.bottomSheet?.title?.text,leftButton:(0,b.tZ)(s.hQ,{onClick:()=>e.onClose()})}),(0,b.BX)(d.f,{$removeMarginTop:!0,children:[(0,b.tZ)(c.r,{children:e.bottomSheet?.title?.text}),(0,b.tZ)(f,{children:e.bottomSheet?.paragraphs?.map((e=>{let{title:t,iconUrl:i,isTitleBold:n,subtitle:a}=e;return(0,b.BX)(y,{children:[i?(0,b.tZ)(C,{children:(0,b.tZ)(I,{src:i,$isDarkMode:r})}):null,(0,b.BX)(v,{children:[(0,b.tZ)($,{$isBold:n,children:t}),(0,b.tZ)(O,{children:a})]})]},t)}))})]}),(0,b.tZ)(u.m,{children:(0,b.tZ)(h.V,{onClick:()=>e.onClose(),children:e.bottomSheet?.buttonText})})]})},_=e=>{const{isMobile:t}=(0,g.hU)();return t?(0,b.tZ)(z,{isOpen:e.isOpen,onClose:e.onClose,bottomSheet:e.actionMetadata?.bottomSheet}):(0,b.tZ)(B,{isOpen:e.isOpen,onClose:e.onClose,bottomSheet:e.actionMetadata?.bottomSheet})};var k=r(33535),D=r(70247),T=r(72179),S=r(27871),P=r(77481);const x=()=>{const{isCartDrafting:e}=(0,T.Z)(),{promoAndMembershipSavingBannerPayload:t}=(0,S.ZP)([...e?["promoAndMembershipSavingBannerPayload"]:[]]).checkoutPayloads;return t?.listContentViewModel?(0,b.tZ)("div",{children:(0,b.tZ)(P.Z,{viewModel:t.listContentViewModel})}):null},M=e=>{let{bannerAction:t}=e;const[r,a]=i.useState(!1),o=(0,k.ZP)(),{draftOrder:l}=(0,D.Dz)();return t.bannerModel?(0,b.BX)(b.HY,{children:[(0,b.tZ)(n.Z,{onClick:()=>{a(!0),o("eats:saving_banner_click",{storePreCheckoutBundling:{draftOrderUuid:String(l?.uuid),bundleGroupRole:String(l?.bundleGroupInfo?.bundleGroupRole)}})},viewModel:t.bannerModel,noMargin:!0}),(0,b.tZ)(_,{isOpen:r,actionMetadata:"openBottomSheetMetadata"===t.actionMetadata?.type?t.actionMetadata.openBottomSheetMetadata:void 0,onClose:()=>a(!1)})]}):null}},23314:(e,t,r)=>{r.d(t,{Z:()=>s});var i=r(36151),n=r(62149),a=r(78989),o=r(47986),l=r(83960);const s=()=>{const e=(0,n.TH)(),{isOnPremiseDeliveryOrder:t}=(0,a.Z)(),{isDraftOrderCreator:r,isDraftOrderCartLocked:s}=(0,l.Z)();return(0,i.useMemo)((()=>t?(0,o.vN_)(e,"premiseDeliveryInfo"):r&&!s?(0,o.vN_)(e,"lockGroupCart"):(0,o.Zs0)(e,{nextUrl:(0,o.VS)(e)})),[s,r,t,e])}},78365:(e,t,r)=>{r.d(t,{Z:()=>l});var i=r(43193),n=r(62149),a=r(62104);const o=e=>{if(!(0,a.TP)(e))return;let t;try{t=(0,a.$I)(e)}catch(e){return}return t};function l(e){const t=(0,n.TH)();return i.useMemo((()=>{if(!e)return!1;const r=o(e);return t.pathname.includes(r)}),[t.pathname,e])}},4909:(e,t,r)=>{r.d(t,{V:()=>o});var i=r(86695),n=r(68065),a=r(33990);function o(e){return(0,a.tZ)(i.zx,{size:n.NO.large,isFullWidth:!0,...e})}},32755:(e,t,r)=>{r.d(t,{ZP:()=>i});const i=r(60278).cS},70313:(e,t,r)=>{r.d(t,{q:()=>b});var i=r(88885),n=r(70247),a=r(74622),o=r(2237),l=r(62459);var s=r(27871),d=r(34626),c=r(1257),u=r(15649),h=r(49201),m=r(83960),g=r(32755),Z=r(70940),p=r(86990);const b=e=>{const{serverCart:t,isBundledOrder:r}=(0,n.Dz)(),{uuid:b="",cityId:f=0,eatsPassExclusionBadge:y,location:C}=e||{},{hasActiveUberOne:v}=(0,d.Z)(),$=(0,c.Z)((0,s.B0)("subtotal")),O=(0,s.B0)("cartItems"),I=(0,c.Z)(O),z=Number($?.subtotal?.value?.amountE5)||0,B=(0,u.Z)(),_=!(0,Z.Z)(b),k=(0,i.T)(),D=(0,g.ZP)(),{isBillSplitOrder:T,isDraftOrderParticipant:S}=(0,m.Z)(),P=Object.values(I?.itemCharges||{}).some((e=>e.discountedAmount&&e?.originalAmount!==e?.discountedAmount)),x=Boolean(_&&(!D||"UNAVAILABLE_ITEMS"!==D?.type)&&z>0&&v&&y&&!P&&(!S||T)&&!r),M=function(e,t){const r=(0,l.Z)("getUberOneMbsV1"),i=(0,o.H)("getUberOneMbsV1",e);return(0,a.useQuery)({queryKey:i,queryFn:e=>{let{queryKey:t}=e;return r.request("getUberOneMbsV1",t[1])},...t?.queryObserverOptions})}({storeCityId:f,storeCountryCode:C?.country.toLowerCase()||"us"},{queryObserverOptions:{enabled:Boolean(x&&f)}})?.data,U=M&&z<M?(M-z)/M*100:0,w=M?(M-z)/1e3:0,E=(0,p.Z)({storeId:b,originalCurrencyCode:t.data?.currencyCode||"USD"});return{isTreated:Boolean(x&&M),belowMBSPercent:U,belowMBSMessage:M&&U>0?k("shared.cart.uberone.mbs.pending",{amount:(0,h.xG)(B,E,w)}):""}}}}]);