(()=>{function e(e){return e&&e.__esModule?e.default:e}var t=function(e){return e.replace(/_/g,":")},n=/(\/b|\/s|\/l).*(node=)(\d{1,12})/,a=new Map,i=function(){if(!a.has(window.location.href)){var e=n.exec(window.location.href),t=e&&e[3]?e[3]:null;a.set(window.location.href,t)}return a.get(window.location.href)},o=function(e){var t=i();if(!e||!t)return null;var n=e.split(":");return n.splice(n.length-1,0,t),n.join(":")},s=function(e){var t=i();return t?"".concat(e,":").concat(t):null},r={wb:"ues",bb:"uet",af:"uet",cf:"uet",be:"uet",ld:"uex"},d=function(e){var n,a,i=e.latencyEvent,r=e.scope,d=e.placement,p=e.timestamp;l(i)&&(c(i,m(r),d.id,p),c(i,m(r),t(d.name),p),c(i,m(r),null!==(n=o(d.name))&&void 0!==n?n:void 0,p),c(i,m(r),null!==(a=s(d.id))&&void 0!==a?a:void 0,p))},l=function(e){return"function"==typeof window[r[e]]},c=function(e,t,n,a){void 0===a&&(a=new Date);var i=r[e];n&&"function"==typeof window[i]&&window[i](e,t+n,{wb:1},a)},m=function(e){return"adplacements:"+p(e)},p=function(e){return e?"".concat(e,":"):""},h=function(e,t){console.error(e),w("ERROR",e,v(e,t))},u=function(e,t){console.error(e),w("FATAL",e,v(e,t))},w=function(e,t,n){var a;null===(a=window.ueLogError)||void 0===a||a.call(window,n,{logLevel:e,attribution:"APE-safeframe",message:t+" | "})},v=function(e,t){return t instanceof Error?t:t?new Error(t):new Error(e)},f=function(e,t,n){if(window.csa)try{window.csa("Content",{element:e})("mark",t,null==n?void 0:n.getTime())}catch(a){h("Error with 'mark' CSA",a)}};class g{sendLatencyMetric({latencyMetricType:e,placementId:t,placementName:n,placementDivId:a,timestamp:i}){d({latencyEvent:e.csmKey,scope:e.csmMessage,placement:{id:t,name:n},timestamp:i}),f(document.getElementById(a),e.csaKey,i)}}const y=()=>new g;var b=function(e,t,n){if(""===t)throw new Error("Invalid queryParamKey input to addJSONQueryParamToURL: "+JSON.stringify({queryParamKey:t}));var a=new URL(e),i=a.searchParams.get(t),o=i||"{}",s=JSON.parse(o),r=Object.assign(s,n);return a.searchParams.set(t,JSON.stringify(r)),a.toString()};function S(e,t,n){var a,i=n||{},o=i.noTrailing,s=void 0!==o&&o,r=i.noLeading,d=void 0!==r&&r,l=i.debounceMode,c=void 0===l?void 0:l,m=!1,p=0;function h(){a&&clearTimeout(a)}function u(){for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];var r=this,l=Date.now()-p;function u(){p=Date.now(),t.apply(r,i)}function w(){a=void 0}m||(d||!c||a||u(),h(),void 0===c&&l>e?d?(p=Date.now(),s||(a=setTimeout(c?w:u,e))):u():!0!==s&&(a=setTimeout(c?w:u,void 0===c?e-l:e)))}return u.cancel=function(e){var t=(e||{}).upcomingOnly,n=void 0!==t&&t;h(),m=!n},u}const I="com.amazon.ads.cpp.",A=(e,t)=>`${I}${e}.${t}`;class E{*[Symbol.iterator](){for(let e=0;e<localStorage.length;e++){const t=localStorage.key(e);if(null==t?void 0:t.startsWith(I)){const n=localStorage.getItem(t);if(localStorage.removeItem(t),e=-1,null===n)continue;yield[t,n]}}}}const D=(e,t,n)=>{localStorage.setItem(A(e,t),n)},M=(e,t,n)=>(...a)=>{try{e(...a)}catch(i){null==t||t(n||"Error in handler",i)}},T=/^([A-Za-z0-9+/]{4})*([A-Za-z0-9+/]{3}=|[A-Za-z0-9+/]{2}==)?$/,k=e=>T.test(e),_=e=>k(e)?x(e):e,L=e=>btoa(unescape(encodeURIComponent(e))),x=e=>decodeURIComponent(escape(atob(e))),N=e=>e&&0===Object.keys(e).length&&e.constructor===Object,R=e=>{return t=e.slotName,["mobile-auto-top-advertising-0","auto-top-advertising-0"].includes(t)?e.renderingId:e.placementName;var t},C=(e,t)=>{var n,a;const i=e,o=i[t].options;if(N(i)||N(o))return null;const s=`ape_${R(o)}_iframe`;return i[t].iframe&&(i[t].iframe=(null===(a=null===(n=i[t])||void 0===n?void 0:n.iframe)||void 0===a?void 0:a.innerHTML)?i[t].iframe:document.getElementById(s)),i[t].iframe},z=()=>window.innerHeight||document.documentElement.clientHeight,F=()=>window.innerWidth||document.documentElement.clientWidth,H=e=>e.getBoundingClientRect().top-z(),O=(e,t)=>({t:e.top,l:e.left,r:e.right,b:e.bottom,w:e.width,h:e.height,z:t}),W=e=>{const t=e.getBoundingClientRect();return O(t,Number(window.getComputedStyle(e,null).zIndex))},$=e=>{const t=V(e);return{t:e.t,l:e.l,r:e.r,b:e.b,w:e.w,h:e.h,z:e.z,xiv:t.xiv,yiv:t.yiv,iv:t.iv}},B=()=>{const e=window.screenY?window.screenY:window.screenTop,t=window.screenX?window.screenX:window.screenLeft,n=F(),a=z();return{t:e,l:t,w:n,h:a,b:e+a,r:t+n}},U=e=>{const t=B(),n=(e=>$(W(e)))(e),a=J(e);return{atf:j(e),geom:{win:t,self:n,exp:a},payload:{wh:t.h,ww:t.w,sx:window.scrollX,sy:window.scrollY,ah:n.h,aw:n.w,top:n.t,left:n.l}}},j=e=>{const t=function(e){const t=document.body.getBoundingClientRect();if(q(t))return null;const n=W(e),a=z(),i=F(),o=Math.max(0,Math.min(t.left+i,n.r)-n.l),s=Math.max(0,Math.min(t.top+a,n.b)-n.t),r=o*s/(n.h*Math.min(n.w,i));return Number(Math.min(1,Math.max(0,r)).toFixed(2))}(e);return null==t?"unknown":t>=.5},q=e=>0===e.width&&0===e.height;const V=e=>{const t=F(),n=z(),a=Math.max(0,K(e.t,e.b,n)),i=Math.max(0,K(e.l,e.r,t)),o=a*i,s=e.h*Math.min(e.w,t);return 0!==s||0!==o?{xiv:Number(Math.min(1,i/e.w).toFixed(2)),yiv:Number(Math.min(1,a/e.h).toFixed(2)),iv:Number(Math.min(1,Math.max(0,o/s)).toFixed(2))}:{xiv:0,yiv:0,iv:0}},J=e=>{const t=e.getBoundingClientRect();return Y(t)},Y=e=>({t:e.top,l:e.left,r:F()-e.right,b:z()-e.bottom,xs:Math.max(document.body.scrollWidth,document.documentElement.scrollWidth)>F()?1:0,yx:Math.max(document.body.scrollHeight,document.documentElement.scrollHeight)>z()?1:0}),X=e=>Y(e),K=(e,t,n)=>{let a=0;return"visible"!==document.visibilityState?a:(a=e>0?n-e:t>0?Math.min(t,n):0,Math.min(a,t-e))},G=(e,t)=>{const n=W(e),a=W(t),i=F(),o=z();return n&&a&&(Math.abs(n.t-a.b)<o||Math.abs(n.b-a.t)<o)&&(Math.abs(n.l-a.r)<i||Math.abs(n.r-a.l)<i)},Q=e=>{const t=Z(e),n=B(),a=$(O(t,NaN));return{atf:"unknown",geom:{win:n,self:a,exp:X(t)},payload:{wh:n.h,ww:n.w,sx:window.scrollX,sy:window.scrollY,ah:a.h,aw:a.w,top:a.t,left:a.l}}},Z=e=>{const t=e.initialBoundingRect,n=t.top-(window.scrollY-e.originalScrollY),a=n+e.adHeight,i=t.left-(window.scrollX-e.originalScrollX);return{top:n,bottom:a,left:i,right:i+e.adWidth,width:e.adWidth,height:e.adHeight}},ee="localstorage_impression",te=(e,t)=>{const n=document.createElement("img");return n.id=e,n.style.display="none",n.setAttribute("pixel-url",t),n},ne="localstorage:impression",ae=async(e,t)=>{let n,a;return new Promise((i=>{a=i,n=new IntersectionObserver((t=>{t.forEach((t=>{t.target===e&&t.isIntersecting&&(a(t),n.unobserve(e))}))}),t),n.observe(e)}))};var ie;ie=function(e){try{var t=window[e],n="__storage_test__";return t.setItem(n,n),t.removeItem(n),!0}catch(a){return!1}};const oe="sfImpression",se="LightAdImpression",re="viewablelatency",de=(e,t,n)=>({csaKey:e,csmKey:t,csmMessage:n}),le=de("bodyBegin","bb",oe),ce=(de("bodyBegin","bb",se),de("bodyEnd","be"),de("clickToATF","af"),de("criticalFeature","cf"),de("criticalFeature","cf",oe),de("criticalFeature","cf",se),de("loaded","ld"),de("loaded","ld",oe),de("loaded","ld",se),de("viewablelatency:bodyBegin","bb",re)),me=de("viewablelatency:loaded","ld",re);var pe=function(e,n,a){if(void 0===a&&(a=1),ue()){var i=function(e,t,n){t&&we("".concat(fe(e),":").concat(t),n)};i(e,n.id,a),i(e,s(n.id),a),i(e,t(n.name),a),i(e,o(t(n.name)),a)}},he=function(e,t){void 0===t&&(t=1),ue()&&we(fe(e),t)},ue=function(){var e;return"function"==typeof(null===(e=null===window||void 0===window?void 0:window.ue)||void 0===e?void 0:e.count)},we=function(e,t){var n;return null===(n=null===window||void 0===window?void 0:window.ue)||void 0===n?void 0:n.count(e,t)},ve="adplacements",fe=function(e){return e.startsWith(ve)?e:"".concat(ve,":").concat(e)};const ge=e=>null==e?void 0:e.replace("criticalFeature","").replace("windowOnLoad","").replace("spATFEvent","").replace("r2OnLoad","").replace("aboveTheFold","").replace("af",""),ye=e=>{const t=ge(e);return""===t||"immediate"===t},be=async(e,t)=>{e=ge(null!=e?e:"");const n="undefined"!=typeof P,a=/^reached(\d{1,5}px)FromTop$/g.exec(e);if(!ye(e)){if(e.match("[^:]+:.+")){const t=e.split(":"),a=t[1],i=t.length>2?t[2]:a;if(n)return await new Promise((e=>P.when(i,"A").execute(e)));throw new Error("Need AUI or AmazonJQ installed")}return e.match(/^\d{1,4}px$/g)?await Ie(parseInt(e,10),t,((e,t)=>{const n=H(e);return e&&n<=t})):a?await Ie(parseInt(a[1],10),t,Se):void h(`Unknown delay pattern ${e}`)}},Se=(e,t)=>window.scrollY+z()>=t,Ie=async(e,t,n)=>new Promise((a=>{const i=()=>{n(t,e)&&(a(),window.removeEventListener("scroll",o),window.removeEventListener("resize",o))},o=M(S(20,(()=>{i()})),h);window.addEventListener("scroll",o),window.addEventListener("resize",o),i()})),Ae=(e,t,n,a,i,o)=>{const s=null==e?void 0:e[t];(null==s?void 0:s.valid)&&(s.loaded=!0,s.viewed&&(y().sendLatencyMetric({latencyMetricType:me,placementId:a,placementName:n,placementDivId:i,timestamp:new Date(o)}),pe("htmlviewed:loaded",{id:a,name:n})))},Ee=e=>{window.addEventListener("scroll",e),window.addEventListener("resize",e),document.addEventListener("visibilitychange",e)};var De=function(e){if(window.csa)try{window.csa("Events",{producerId:"adplacements"})("setEntity",{adCreativeMetaData:e})}catch(t){h("Error with 'setEntity' CSA",t)}},Me=function(e,t,n){if(void 0===n&&(n=1),window.csa)try{window.csa("Events",{producerId:"adplacements"})("log",{schemaId:"ApeSafeframe.csaEvent.1",metricName:e+":"+t.name+":"+t.id,metricValue:n},{ent:"all"})}catch(a){h("Error with 'logCsaEvent' CSA",a)}},Te=function(e,t){if(void 0===t&&(t=1),window.csa)try{window.csa("Events",{producerId:"adplacements"})("log",{schemaId:"ApeSafeframe.csaEvent.1",metricName:e,metricValue:t},{ent:"all"})}catch(n){h("Error with 'incrementCounter' CSA",n)}};const ke=async(e,t,n,a)=>{n.options.firePixelsAfter&&await be(n.options.firePixelsAfter,n.placement),await Pe(t.adMap,n.options.arid),e.sendMessageToAd(n.options.arid,"fireImpression",a),_e(e,t,n,a)},_e=(e,t,n,a)=>{a.isNoInventory?xe(e,t,n):Le(e,t,n)},Le=(e,t,n)=>{Ne(e,t.adMap,n.options.arid);const a=t.ADS_HANDLERS[n.options.arid];a.viewabilityTracker=()=>{S(50,Ne)(e,t.adMap,n.options.arid)},Ee(a.viewabilityTracker);new IntersectionObserver((()=>{Ne(e,t.adMap,n.options.arid)}),{threshold:[0,.5,1]}).observe(n.placement)},xe=(e,t,n)=>{const a=Ce(t.adMap,n.options.arid);t.adMap[n.options.arid].noInventorySlotSnapshot=a,Re(e,t.adMap,n.options.arid,a),e.sendMessageToAd(n.options.arid,"handleFallbackBehavior",{});const i=t.ADS_HANDLERS[n.options.arid];i.noInventoryViewabilityTracker=()=>{S(20,Re)(e,t.adMap,n.options.arid,a)},Ee(i.noInventoryViewabilityTracker)},Pe=async(e,t)=>{const n=C(e,t),a={root:document.documentElement};await ae(n,a)},Ne=(e,t,n)=>{const a=t[n].options,i=C(t,n),o=a.viewabilityStandards;if(i){const t=U(i);t.viewabilityStandards=o,e.sendMessageToAd(n,"updateViewability",t)}},Re=(e,t,n,a)=>{const i=t[n].options.viewabilityStandards,o=Q(a);o.viewabilityStandards=i,e.sendMessageToAd(n,"updateViewability",o)},Ce=(e,t)=>{const n=C(e,t);return{initialBoundingRect:(a=n).getBoundingClientRect(),adHeight:a.offsetHeight,adWidth:a.offsetWidth,originalScrollX:window.scrollX,originalScrollY:window.scrollY};var a},ze=e=>{try{He(e,document.body),he(ne,1),Te(ee)}catch(t){he("localstorage:error",1),Te("localstorage_error")}},Fe=()=>{if(e(ie)("localStorage"))for(const e of new E){const t=e[1];ze(t)}},He=async(e,t)=>{const n=b(e,"pj",{measurementMethod:"cod_client"});try{await fetch(n,{keepalive:!0,mode:"no-cors",priority:"low"}),t.appendChild(te("ape_impression",n)),he(ne+"loaded"),Te(ee+"loaded")}catch(a){throw he(ne+"error"),Te(ee+"error"),a}he("impressionFired")},Oe=e=>!e||We(e)||$e(e)?e:e+"px",We=e=>e.length>1&&"%"===e.charAt(e.length-1),$e=e=>e.length>2&&"px"===e.substring(e.length-2);const Be=(e,t)=>{for(const n of Object.keys(t))e.style[n]=t[n];return e},Ue=(e,t,n,a,i,o)=>{var s;try{const r=Ve(e,o),d=Je(e,o)||r,l=Ye(e,o);if(null===d||null===r||null===l)return void h("Unable to find wrapper, placement, or safe frame iframe",new Error("resizeSafeFrameAd error"));const c=We(n),m=We(t),p=!m&&!c,u=parseInt(t,10);let w=m?l.offsetWidth:u,v=c?l.offsetHeight:parseInt(n,10);const f=parseInt(a,10),g=e=>{p&&(v=Xe({height:v,width:w,targetWidth:e})),w=Math.round(e)},y=0===d.offsetWidth?F():d.offsetWidth;f&&z()<F()?g(f):g(y);const b=null===(s=null==i?void 0:i.adMap[e])||void 0===s?void 0:s.noInventorySlotSnapshot;b&&(b.adHeight=v,b.adWidth=w);const S=Oe(w),I=Oe(p?v:n);if(l.style.height=I,l.style.width=S,d!==r){r.style.height=I;const t={width:S,height:I};i.sendMessageToAd(e,"resizeCreativeWrapper",t)}"Detail_hero-quick-promo_Desktop"===o[e].slotId&&(pe("OffsetLeft",{id:i.adMap[e].options.placementId,name:o[e].slotId},l.offsetLeft),pe("OffsetTop",{id:i.adMap[e].options.placementId,name:o[e].slotId},l.offsetTop),pe("OffsetWidth",{id:i.adMap[e].options.placementId,name:o[e].slotId},l.offsetWidth),pe("OffsetHeight",{id:i.adMap[e].options.placementId,name:o[e].slotId},l.offsetHeight))}catch(r){h("Error resizing ad: "+o[e].slotId,r)}},je=(e,t,n)=>{const a=Je(e,t)||Ve(e,t),i=Ye(e,t),o=n.resizePlacementStyleAboveThreshold,s=n.resizePlacementStyleBelowThreshold,r=parseInt(n.resizePlacementWidthThreshold,10);a&&i&&r&&o&&s?a.offsetWidth<r?Be(i,s):Be(i,o):h("Missing arguments in setResizePlacementStyle",new Error("setResizePlacementStyle error"))},qe=(e,t,n)=>{const a=Ye(e,t);a.style.height=Oe(n),a.style.zIndex="2",a.style.position="relative"},Ve=(e,t)=>document.getElementById(t[e].placementDivId),Je=(e,t)=>{var n;return(null===(n=t[e])||void 0===n?void 0:n.wrapperDivId)?document.getElementById(t[e].wrapperDivId):null},Ye=(e,t)=>document.getElementById(t[e].iframeId),Xe=({height:e,width:t,targetWidth:n})=>0===t||isNaN(e)||isNaN(t)||isNaN(n)?0:Math.round(n*e/t),Ke=(e,t)=>{e&&(e.style.height=Oe(t))},Ge="expanded-feedback-label",Qe="expanded-safeframe",Ze="expandable-ads-styles",et=(e,t)=>{const n=Ye(e,t),a=tt(n);if(null===a||null===n)throw new Error(`feedbackWrapper: ${a?"present":"missing"}, safeFrame: ${n?"present":"missing"}`);a.classList.add(Ge),n.classList.add(Qe)},tt=e=>(null==e?void 0:e.parentElement).querySelector("div[id$=placement_Feedback]"),nt=(e,t)=>{const n=Ye(e,t),a=tt(n);null!==a&&null!==n&&(a.classList.remove(Ge),n.classList.remove(Qe))},at=(e,t)=>{((e,t)=>{if(null!==document.querySelector(`#${Ze}`))return;const n=document.createElement("style");n.id=Ze,n.innerHTML=`\n        div.${Ge} {\n            background-color: white;\n            z-index: 2;\n            height: 30px !important;\n            top: 0px !important;\n        }\n        iframe.${Qe} {\n            display: block;\n            padding: 0px !important;\n            max-height: none !important;\n        }`;const a=Ve(e,t);if(null==a)throw new Error("Failed to append styles for expandable ads");a.appendChild(n)})(e,t)},it=(e,t)=>(e.staticHeight?parseInt(e.staticHeight,10):0)+(We(e.width)?parseInt(e.height,10):Xe({height:parseInt(e.height,10),width:parseInt(e.width,10),targetWidth:t})),ot=(e,t,n)=>{const a=a=>{st(a,e,t),n(e)};window.addEventListener("scroll",a,{once:!0}),window.addEventListener("click",a,{once:!0}),window.addEventListener("swipe",a,{once:!0}),window.addEventListener("tap",a,{once:!0})},st=(e,t,n)=>{n.sendMessageToAd(t.options.arid,"triggerEventInIframe",{eventType:e.type})},rt=(e,t)=>{st(new Event("click"),e,t)},dt=e=>e+"_Feedback";class lt{async addSponsoredLabelWithFeedbackLink(e,t){e.appendChildTo(this.parentHtmlId,this);const n=await t.getSponsoredLabelAndFeedbackLink(this.urlPathAndParameter);if(!(null==n?void 0:n.isOk()))throw new Error(`Result from the feedback service was not ok ${this.urlPathAndParameter}`);e.updateElement(this.getHtmlId(),n)}getHtmlId(){return dt(this.parentHtmlId)}isHidden(){return this.hidden}exists(e){return e.exists(this.getHtmlId())}constructor(e,t,n,a,i,o,s){this.parentHtmlId=e,this.feedbackStyle=t,this.labelText=n,this.labelStyle=a,this.position=i,this.urlPathAndParameter=o,this.hidden=s}}class ct{open(e){e.clickChildLink(this)}getHtmlId(){return dt(this.parentHtmlId)}constructor(e){this.parentHtmlId=e}}class mt{async createSponsoredLabelWithFeedbackLink(e,t){if(!e.exists(this.feedbackHtmlPort)){t.request();try{await e.addSponsoredLabelWithFeedbackLink(this.feedbackHtmlPort,this.feedbackApiPort),t.success(),e.isHidden()||t.labelRenderedHost()}catch(n){throw t.error(),n}}}openModal(e){e.open(this.feedbackHtmlPort)}labelRendered(e){e.labelRenderedCreative()}removeSponsoredLabelAndFeedbackLink(e){var t;try{null===(t=document.getElementById(dt(e)))||void 0===t||t.remove()}catch(n){h("Unable to remove AdFeedback Div",n)}}logTransparencyInfoMissing(e){e.transparencyInfoMissing()}constructor(e,t){this.feedbackHtmlPort=e,this.feedbackApiPort=t}}const pt=e=>new Dt(e),ht="adfeedback_request",ut="adfeedback_success",wt="adfeedback_error",vt="adfeedback_sponsoredlabelrendered_creative",ft="adfeedback_sponsoredlabelrendered_host",gt="adfeedback:request",yt="adfeedback:success",bt="adfeedback:error",St="adfeedback:sponsoredlabelrendered:creative",It="adfeedback:sponsoredlabelrendered:host",At="adfeedback:sponsoredlabelrendered",Et="adfeedback:transparencyinfo:missing";class Dt{request(){pe(gt,this.placement),he(gt),Me(ht,this.placement)}success(){pe(yt,this.placement),he(yt),Me(ut,this.placement)}error(){pe(bt,this.placement),Me(wt,this.placement)}labelRenderedCreative(){pe(St,this.placement),he(At),Me(vt,this.placement)}labelRenderedHost(){pe(It,this.placement),he(At),Me(ft,this.placement)}transparencyInfoMissing(){pe(Et,this.placement),he(Et)}constructor(e){this.placement=e}}class Mt{isOk(){return"ok"===this.status}constructor(e,t,n){this.status=e,this.html=t,this.script=n}}class Tt{async getSponsoredLabelAndFeedbackLink(e){const t=await fetch(this.windowRepo.origin()+e);if(t.ok){const e=await t.json();return new Mt(e.status,e.html,e.script)}throw Error("Could not fetch the feedback html/link/script/label")}constructor(e){this.windowRepo=e}}class kt{appendChildTo(e,t){var n,a;function i(e){const t=document.createElement("div");return t.setAttribute("id",e.getHtmlId()),n(t,e.feedbackStyle),t.append(function(e){const t=document.createElement("div");return t.innerHTML=e.labelText,n(t,e.labelStyle),t}(e)),t;function n(e,t){for(const n in t)e.style.setProperty(n,t[n])}}1===t.position?null===(n=_t(e))||void 0===n||n.prepend(i(t)):0===t.position&&(null===(a=_t(e))||void 0===a||a.append(i(t)))}updateElement(e,t){const n=_t(e);n&&(n.innerHTML=t.html,function(e,t){const n=function(e){const t=document.createElement("script");return e.prepend(t),t}(e);n.innerHTML=t.script}(n,t))}clickChildLink(e){const t=document.getElementById(e.getHtmlId());var n;if(t)for(const a of t.children)if("A"===(n=a).tagName||"DIV"===n.tagName)return void a.click()}exists(e){return!!document.getElementById(e)}}const _t=e=>document.getElementById(e),Lt={code:"BE",hostname:"www.amazon.com.be",name:"Belgium"},xt={code:"FR",hostname:"www.amazon.fr",name:"France"},Pt={code:"DE",hostname:"www.amazon.de",name:"Germany"},Nt={code:"IT",hostname:"www.amazon.it",name:"Italy"},Rt={code:"NL",hostname:"www.amazon.nl",name:"Netherlands"},Ct={code:"PL",hostname:"www.amazon.pl",name:"Poland"},zt={code:"ES",hostname:"www.amazon.es",name:"Spain"},Ft={code:"SE",hostname:"www.amazon.se",name:"Sweden"},Ht=e=>location.hostname===e.hostname;class Ot{constructor(e,t){this.weblabsWindow=e,this.prefix=t,this.isC=()=>"c"===this.weblabTreatment(),this.isT1=()=>"t1"===this.weblabTreatment(),this.isT2=()=>"t2"===this.weblabTreatment(),this.isT3=()=>"t3"===this.weblabTreatment(),this.isT4=()=>"t4"===this.weblabTreatment(),this.isT5=()=>"t5"===this.weblabTreatment(),this.weblabTreatment=()=>{var e,t,n;return null===(n=null===(t=null===(e=this.weblabsWindow)||void 0===e?void 0:e.renderingWeblabs)||void 0===t?void 0:t[this.prefix])||void 0===n?void 0:n.toLowerCase()}}}const Wt=()=>new Ot(window,"ADPT_SF_TRANSPARENCY_INFO_MANDATORY_FOR_EU_712921"),$t=e=>!(Ht(Lt)||Ht(xt)||Ht(Pt)||Ht(Nt)||Ht(Rt)||Ht(Ct)||Ht(zt)||Ht(Ft))||Bt(e),Bt=e=>{var t,n,a,i,o,s;const r=[];jt(null===(a=null===(n=null===(t=null==e?void 0:e.url)||void 0===t?void 0:t.parameters)||void 0===n?void 0:n.adPlacementMetaData)||void 0===a?void 0:a.slotName)&&r.push("DSA Error: slotName missing");const d=null===(s=null===(o=null===(i=null==e?void 0:e.url)||void 0===i?void 0:i.parameters)||void 0===o?void 0:o.adCreativeMetaData)||void 0===s?void 0:s.adCreativeDetails;(!d||d.length<=0)&&r.push("DSA Error: transparency info missing"),null==d||d.every((e=>Ut(e,r)));for(const l of r)for(let e=0;e<qt();e++)h(l);return r.length<=0},Ut=(e,t)=>{var n,a,i,o,s;e.version||t.push("DSA Error: version missing"),jt(e.advertiserIdNS)&&t.push("DSA Error: advertiserIdNS missing"),void 0!==(null===(n=e.selectionSignals)||void 0===n?void 0:n.context)&&null!==(null===(a=e.selectionSignals)||void 0===a?void 0:a.context)||t.push("DSA Error: selectionSignals.context missing"),void 0!==(null===(i=e.selectionSignals)||void 0===i?void 0:i.location)&&null!==(null===(o=e.selectionSignals)||void 0===o?void 0:o.location)||t.push("DSA Error: selectionSignals.location missing"),jt(null===(s=e.selectionSignals)||void 0===s?void 0:s.pastActivity)&&t.push("DSA Error: selectionSignals.pastActivity missing")},jt=e=>!e||e.length<=0,qt=()=>Wt().isT1()?2:Wt().isT2()?4:Wt().isT3()?8:Wt().isT4()?16:Wt().isT5()?32:1,Vt=()=>new Jt(new mt(new kt,new Tt({origin:()=>window.location.origin})));class Jt{async addSponsoredLabel({parentHtmlId:e,placement:t,feedback:n}){return $t(n)?(n.hidden&&(Object.assign(n.style,{display:"none"}),Object.assign(n.label.style,{display:"none"})),await this.feedbackService.createSponsoredLabelWithFeedbackLink(Yt(e,n),pt(t)),!0):(this.feedbackService.logTransparencyInfoMissing(pt(t)),h("Transparency Information missing"),!1)}openModal(e){this.feedbackService.openModal(new ct(e))}labelRendered({placement:e}){this.feedbackService.labelRendered(pt(e))}removeSponsoredLabelAndFeedbackLink(e){this.feedbackService.removeSponsoredLabelAndFeedbackLink(e)}constructor(e){this.feedbackService=e}}const Yt=(e,t)=>{return new lt(e,t.style,t.label.text,t.label.style,"TOP"===t.position?1:0,(n=t.url.path,a=encodeURIComponent(JSON.stringify(t.url.parameters)),n+"?pl="+a),t.hidden);var n,a},Xt=e=>{Vt().labelRendered({placement:{id:e.options.placementId,name:e.options.placementName}})},Kt=e=>{Vt().openModal(e.options.adPlacementMetaData.adElementId)},Gt=e=>{Vt().removeSponsoredLabelAndFeedbackLink(e.options.adPlacementMetaData.adElementId)},Qt=async e=>{const t=e.adPlacementMetaData,n=e.adFeedbackInfo,a={parentHtmlId:t.adElementId,placement:{id:e.placementId,name:e.placementName},feedback:{position:n.adFeedbackOnTop?"TOP":"BOTTOM",hidden:!n.boolFeedback,style:e.feedbackDivStyle,url:{path:n.endPoint,parameters:{adPlacementMetaData:{adElementId:t.adElementId,pageType:t.pageType,pageUrl:(i=t.pageUrl,k(i)?i:L(i)),slotName:t.slotName},adCreativeMetaData:e.adCreativeMetaData}},label:{text:_(n.sponsoredText),style:e.advertisementStyle}}};var i;return Vt().addSponsoredLabel(a)},Zt={};function en(e,t,n){var a;e&&e.id&&!Zt[e.id]&&(null===(a=window.P)||void 0===a||a.when("gw-video-orchestrator").execute((a=>{a.subscribe(e,t,n),Zt[e.id]=!0})))}let tn=null;function nn(e,t,n){const a=t=>{n.sendCustomMessageToAd(e.options.arid,"videoAutoplayResponse",t)};var i;e.options.expParams&&e.options.expParams.noVideoAutoplay?a(!1):(i=e.options.pageType)&&"gateway"===i.toLowerCase()?en(e.iframe,a,t):tn===e.options.arid?a(!0):null===tn&&function(e){const t=document.getElementsByTagName("video");for(let n=0;n<t.length;++n)if(!t[n].paused&&G(e,t[n]))return!1;return!0}(e.iframe)?(tn=e.options.arid,a(!0)):a(!1)}function an(){var e;null===(e=window.P)||void 0===e||e.when("gw-video-orchestrator").execute((e=>{e.elect()})),tn=null}function on(e){var t,n;(t=e.iframe)&&(null===(n=window.P)||void 0===n||n.when("gw-video-orchestrator").execute((e=>{e.elect(t)}))),tn=e.options.arid}var sn=function(e,n,a){rn()&&(dn(ln(e,n.id,a)),dn(ln(e,t(n.name),a)))},rn=function(){var e;return"function"==typeof(null===(e=null===window||void 0===window?void 0:window.ue)||void 0===e?void 0:e.tag)},dn=function(e){var t;return null===(t=null===window||void 0===window?void 0:window.ue)||void 0===t?void 0:t.tag(e)},ln=function(e,t,n){return"".concat(e,":").concat(t).concat(cn(n))},cn=function(e){return e?":".concat(e):""};class mn{constructor(t,n){this.hms=t,this.hc=n,this.changeSize=(e,t)=>{var n;if(!e.options.allowChangeSize||wn(e,t))return;const a=null===(n=e.options.allowedSizes)||void 0===n?void 0:n.concat(fn(e.options.size));if(hn(t,a)){e.iframe.style.height=t.height,e.iframe.style.width=t.width;const n=Je(e.options.arid,this.hc.AD_IDS);e.placement.style.height=n?t.height:"auto",e.placement.style.width=t.width,un(e)}else h(`Size is not allow-listed: '${t.width}' x '${t.height}' for '${e.options.placementName}'`)},this.sendAdBarTrace=(e,t)=>{e.options.arid in this.hc.AD_TRACERS&&this.hc.AD_TRACERS[e.options.arid].logTrace(t.field,t.traceInfo)},this.startPixelTracking=async(e,t)=>{await ke(this.hms,this.hc,e,t)},this.logAPIInvocation=(e,t)=>{const n=`messenger:${t.apiName}`;he(n),pe(n,{id:e.options.placementId,name:e.options.placementName}),e.options.arid in this.hc.AD_TRACERS&&this.hc.AD_TRACERS[e.options.arid].logTrace("apiCalls",t)},this.resizeSafeFrameAd=async e=>{window.addEventListener("resize",this.hc.ADS_HANDLERS[e.options.arid].defaultResizeSafeFrameHandler),Ue(e.options.arid,e.options.size.width,e.options.size.height,e.options.maxAdWidth,this.hms,this.hc.AD_IDS)},this.setResizePlacementStyle=async e=>{window.addEventListener("resize",this.hc.ADS_HANDLERS[e.options.arid].defaultSetResizePlacementStyle),e.options.resizePlacementStyle&&je(e.options.arid,this.hc.AD_IDS,e.options.resizePlacementStyle)},this.logError=(e,t)=>{h(t.message+": "+e.options.placementName,t.error)},this.logCsaEvent=(e,t)=>{Me(t.metricName,{name:e.options.placementName,id:e.options.placementId})},this.addCsaEntity=(e,t)=>{De(t)},this.sendLatencyMetric=(e,t)=>pn(e,t),this.customMessage=(e,t)=>{this.hms.customMessage(t.key,t.body,["openPsAdPopover","openATCModal","setPartner","sendMetrics","wrap"],e.options.placementName,e.options.placementId)},this.fireViewableLatencyMetrics=async(e,t)=>{Ae(this.hc.viewableLatencyTrackers,e.options.arid,e.options.placementName,e.options.placementId,e.options.adUnitPlacementId,t.adLoadedTimestamp)},this.countMetric=(e,t)=>{t.isGlobal?he(t.metricMsg,t.value):pe(t.metricMsg,{id:e.options.placementId,name:e.options.placementName},t.value)},this.addCsmTag=(e,t)=>{var n,a;t.isGlobal?(n=t.tag,a=t.msg,rn()&&dn(n+cn(a))):sn(t.tag,{id:e.options.placementId,name:e.options.placementName},t.msg)},this.requestVideoAutoplay=async(e,t)=>{nn(e,t,this.hms)},this.releaseVideoAutoplay=async()=>{an()},this.haveVideoAutoplayPermission=async e=>{on(e)},this.feedbackLabelRendered=e=>{Xt(e)},this.feedbackOpenModal=e=>{Kt(e)},this.handleFallbackExperience=async e=>{Gt(e)},this.expandAdSlot=(e,t)=>{const n=e.iframe;try{const a=it(t,n.offsetWidth),i=We(t.width)?t.width:n.offsetWidth;at(e.options.arid,this.hc.AD_IDS),Ue(e.options.arid,Oe(i),Oe(a),e.options.maxAdWidth,this.hms,this.hc.AD_IDS);const o=Je(e.options.arid,this.hc.AD_IDS);Ke(o,Oe(a+20)),ot(e,this.hms,this.resetSlotSize)}catch(a){u("Error attempting to expand ad slot: ",a),rt(e,this.hms),this.resetSlotSize(e)}},this.expandAdSlotWithOverlap=(e,t)=>{const n=e.iframe;try{const a=it(t,n.offsetWidth);at(e.options.arid,this.hc.AD_IDS),qe(e.options.arid,this.hc.AD_IDS,Oe(a)),et(e.options.arid,this.hc.AD_IDS),ot(e,this.hms,this.resetSlotSize)}catch(a){u("Error attempting to expand ad slot with overlap: ",a),rt(e,this.hms),this.resetSlotSize(e)}},this.resetSlotSize=e=>{const t=this.hc.ADS_HANDLERS[e.options.arid].defaultResizeSafeFrameHandler;t(),window.addEventListener("resize",S(20,t)),Ke(Je(e.options.arid,this.hc.AD_IDS),Oe(parseInt(e.options.size.height,10)+20)),nt(e.options.arid,this.hc.AD_IDS)},this.triggerEventInIframe=(e,t)=>{this.hms.sendMessageToAd(e.options.arid,"triggerEventInIframe",{eventType:t.event.type})},this.registerCODFallback=(t,n)=>{e(ie)("localStorage")&&D("SF",t.options.arid,n)},this.clearCODFallback=t=>{var n,a;e(ie)("localStorage")&&(n="SF",a=t.options.arid,localStorage.removeItem(A(n,a)))},this.safeFrameReady=e=>{var t;null===(t=null===performance||void 0===performance?void 0:performance.mark)||void 0===t||t.call(performance,`SafeFrame:  safeFrameReady ${e.options.slotName}`),this.hms.sendMessageToAd(e.options.arid,"setupComputedAdDetails",{computed:{aPageStart:window.aPageStart,adStartTime:(new Date).getTime()}})},this.saveAdDetailsForAdReporter=(e,t)=>{var n;window.adReporterDetails=null!==(n=window.adReporterDetails)&&void 0!==n?n:{},window.adReporterDetails[e.options.adUnitPlacementId]=Object.assign(e.options,t)}}}const pn=(e,{latencyMetricType:t,timestamp:n})=>{y().sendLatencyMetric({latencyMetricType:t,placementName:e.options.placementName,placementId:e.options.placementId,placementDivId:e.options.adUnitPlacementId,timestamp:n})},hn=(e,t)=>0!==t.length&&t.some((t=>{return a=t,(n=e).height===a.height&&n.width===a.width;var n,a})),un=e=>{e.placement.style.overflow=""},wn=(e,t)=>e.placement.style.height===t.height&&e.placement.style.width===t.width,vn=e=>(null==e?void 0:e.endsWith("px"))||(null==e?void 0:e.endsWith("%"))?e:`${e}px`,fn=e=>({height:vn(e.height),width:vn(e.width)}),gn=e=>{const t=document.getElementById(e);void 0!==t&&t&&(t.style.display="none")};class yn extends mn{constructor(e,t){super(e,t),this.collapseSlot=async e=>{var t;gn(this.hc.AD_IDS[e.options.arid].placementDivId),gn(this.hc.AD_IDS[e.options.arid].auiCardDeckId),"nav-sitewide-msg"===e.options.slotName&&(await be("amznJQ.available:navbarJSLoaded",e.placement),"function"==typeof(null===(t=null===parent||void 0===parent?void 0:parent.navbar)||void 0===t?void 0:t.unHideSWM)&&parent.navbar.unHideSWM())}}}const bn="adload:start",Sn="adload:delayloadcallback",In="adload_delayload";class An{collapse(){this.div.style.display="none"}constructor(e,t,n){this.id=e,this.name=t,this.div=n}}const En=e=>new An(e.placementId,e.placementName,document.getElementById(e.adUnitPlacementId)),Dn=e=>{Mn(e,"@media screen and (orientation: landscape){[id=ape_detail_mobile-detail-ilm_mweb_wrapper] { width: 100vw !important; margin-left: calc(-50vw + 50%) !important; height: 50px !important;}}@media screen and (orientation: portrait){[id=ape_detail_mobile-detail-ilm_mweb_wrapper] {width: 100vw !important; margin-left: calc(-50vw + 50%) !important; height: 50px !important;}}")},Mn=(e,t)=>{const n=document.createElement("style");n.innerHTML=t,e.prepend(n)},Tn="div#ape_Detail_desktop-detail-ilm_desktop_placement",kn="nav-ewc-persistent-hover",_n=e=>{switch(e.slotName){case"desktop-detail-ilm":case"fresh-desktop-detail-ilm":case"wfm-desktop-detail-ilm":case"vindp-desktop-atf-ilm":xn(),t=document.getElementById(e.adUnitPlacementId),Mn(t,"@media screen and (min-width: 1500px) {div[id$=ape_Detail_desktop-detail-ilm_desktop_placement] {width: 100vw !important;height: 55px !important;margin: 0 calc(-50vw + 50%) 20px !important;}}@media screen and (max-width: 1500px) {div[id$=ape_Detail_desktop-detail-ilm_desktop_placement_Feedback] {right: 5px !important}}");break;case"mobile-detail-ilm":case"mobile-app-detail-ilm":case"fresh-mobile-detail-ilm":case"fresh-mobile-detail-ilm-v1":case"wfm-mobile-detail-ilm-v1":Dn(document.getElementById(e.adUnitPlacementId))}var t},Ln=e=>"attributes"===e.type&&"class"===e.attributeName&&e.target.classList.contains(kn),xn=()=>{if(null!==document.querySelector(`.${kn}`))return void Pn(Tn);new MutationObserver(((e,t)=>{if(e.some(Ln))try{Pn(Tn),t.disconnect()}catch(n){h("Failed to resize ILM for EWC.",n)}})).observe(window.document.documentElement,{attributes:!0,attributeFilter:["class"]})},Pn=e=>{const t=document.querySelector("div#nav-flyout-ewc"),n=document.querySelector(e);if(null===n||null===t)return void h(`could not find placementDiv (value was: ${n}) or ewc (value was: ${t})`);const a=t.offsetWidth;Nn(n,a)},Nn=(e,t)=>{var n;const a=document.createElement("style");a.innerHTML=`@media screen and (min-width: 1500px) { div[id$=${e.id}] {\n        width: calc(100vw - ${t}px) !important; \n        margin-left: calc(-50vw + 50% + ${t/2}px) !important;\n        margin-right: calc(-50vw + 50% + ${t/2}px) !important;\n    `,null===(n=null===document||void 0===document?void 0:document.body)||void 0===n||n.appendChild(a)};class Rn{start(){const e=()=>{this.sendTrace(),window.setInterval(this.sendTrace,3e3)};"loading"!==document.readyState?e():window.addEventListener("load",e)}logTrace(e,t){if(this.traceId){let n;const a=(new Date).getTime();Object.prototype.hasOwnProperty.call(this.storedTrace,e)||(this.storedTrace[e]=[]);n=t===Object(t)?Object.assign({},t):JSON.parse('{ "'+e+'":"'+t+'"}'),n.timeStamp=a,n.timeSinceAdStart=a-this.adStartTime,this.storedTrace[e].push(n)}}async sendTrace(){if(!(e=>{for(const t in e)if(Object.prototype.hasOwnProperty.call(this.storedTrace,t))return!1;return!0})(this.storedTrace)){const e="/gp/adbarplus?traceId="+this.traceId+"&systemName=browser",t=await fetch(e,{method:"POST",body:JSON.stringify(this.storedTrace),headers:{"Content-Type":"application/x-www-form-urlencoded"}});if(t.ok)for(const n in this.storedTrace)Object.prototype.hasOwnProperty.call(this.storedTrace,n)&&delete this.storedTrace[n];else console.error("failed to send request to /gp/adbarplus",t)}}constructor(e,t=0,n={}){this.traceId=e,this.adStartTime=t,this.storedTrace=n}}const Cn=(e,t)=>{const{slotName:n,traceId:a,arid:i,allowedSizes:o,computed:s,abpStatus:r,loadAfter:d}=t,l=window[n],c=new Rn(a,l&&l.adStartTime||0);e.AD_TRACERS[i]=c,e.AD_TRACERS[i].logTrace("safeFrameInput",t);const m={caches:window.caches,plugins:document.plugins,cookies:document.cookie,userAgents:navigator.userAgent};e.AD_TRACERS[i].logTrace("browserData",m);const p={allowedSizes:o,computed:s,adStartTime:l,abpStatus:r,loadAfter:d};e.AD_TRACERS[i].logTrace("additionalInitilizationParams",p),c.start()},zn=(e,t,n)=>{try{const a=document.getElementById(t.AD_IDS[e.arid].placementDivId),i=t.AD_IDS[e.arid].iframeId,o=document.getElementById(i);t.adMap[e.arid]={placement:a,iframe:o,options:e,messagePort:n,hasTransferredMessagePort:!1}}catch(a){h(`Error creating safeFrame ${e.slotName}`,a)}},Fn=(e,t,n)=>e>0?n>e:t>0,Hn=(e,t,n,a,i,o)=>{var s,r;const d=null===(r=null===(s=null===document||void 0===document?void 0:document.getElementById)||void 0===s?void 0:s.call(document,n))||void 0===r?void 0:r.getBoundingClientRect();if(d&&Fn(d.top,d.bottom,z())&&Fn(d.left,d.right,F())){if(y().sendLatencyMetric({latencyMetricType:ce,placementId:i,placementName:a,placementDivId:n,timestamp:new Date}),e[o].loaded){y().sendLatencyMetric({latencyMetricType:me,placementId:i,placementName:a,placementDivId:n,timestamp:new Date});const e={id:i,name:a};pe("adplacements:htmlviewed:loaded:",e),pe("adplacements:htmlviewed",e)}t.viewed=!0,l=t.tracker,window.removeEventListener("scroll",l),window.removeEventListener("resize",l),document.removeEventListener("visibilitychange",l)}var l},On=(e,t,n,a,i)=>{if(!e[i]){e[i]={valid:!1};try{const o=e[i];Hn(e,o,t,n,a,i);const s=M(S(20,(()=>{Hn(e,o,t,n,a,i)})),h);Ee(s),o.tracker=s,o.valid=!0}catch(o){throw h("Error initializing viewable latency instrumentation",o),o}}};class Wn{constructor(e,t,n,a){this.hc=e,this.hms=t,this.hmr=n,this.supportedCommands=a,this.initializeAdIds=e=>{var t,n,a;this.hc.AD_IDS[e.arid]=(n=(t=e).placementName,a=R(t),{slotId:n,wrapperDivId:`ape_${a}_wrapper`,placementDivId:`ape_${a}_placement`,iframeId:`ape_${a}_iframe`,textDivWrapperId:`ape_${a}_text-wrapper`,textDivId:`ape_${a}_text`,auiCardDeckId:`ape_${a}_aui_cardDeck`})},this.initAllSafeFrames=async()=>{var e;null===(e=null===performance||void 0===performance?void 0:performance.mark)||void 0===e||e.call(performance,"SafeFrame: Start initAllSafeFrames"),this.getWindowSafeFrame()||(this.initWindowSafeFrame({registerCustomMessageListener:this.hms.registerCustomMessageListener,sendCustomMessage:this.hms.sendCustomMessage,secondPhaseLoadAd:this.secondPhaseLoadAd}),Fe(),qn(this.getWindowSafeFrame()))},this.secondPhaseLoadAd=async(e,t,n)=>{this.initializeAdIds(t),zn(t,this.hc,n);const a=this.hc,i=this.hms,o=this.hc.adMap[e].options;Cn(a,o),Bn(a,i,o);const s=En(o),r=this.hc.AD_IDS[e];if(On(a.viewableLatencyTrackers,r.placementDivId,r.slotId,s.id,e),o.forcePunt)return sn("forcePunt",s),De({forcePunt:"true"}),void s.collapse();$n(o),pe(Sn,s),Me(In,s);try{await Qt(o)?(Un(s,a,o,this.hmr,this.hms),jn(a,o,i)):s.collapse()}catch(d){throw s.collapse(),d}}}}const $n=e=>{y().sendLatencyMetric({latencyMetricType:le,placementId:e.placementId,placementName:e.placementName,placementDivId:e.adUnitPlacementId}),pe(bn,{id:e.placementId,name:e.placementName}),he(bn),Me("adload_start",{id:e.placementId,name:e.placementName})},Bn=(e,t,n)=>{e.ADS_HANDLERS[n.arid]=e.ADS_HANDLERS[n.arid]||{},e.ADS_HANDLERS[n.arid].defaultResizeSafeFrameHandler=((e,t,n)=>async()=>{Ue(n.arid,n.size.width,n.size.height,n.maxAdWidth,e,t.AD_IDS)})(t,e,n),e.ADS_HANDLERS[n.arid].defaultSetResizePlacementStyle=((e,t)=>async()=>{t.resizePlacementStyle&&je(t.arid,e.AD_IDS,t.resizePlacementStyle)})(e,n)},Un=(e,t,n,a,i)=>{if(pe(Sn,{id:n.placementId,name:n.placementName}),Me(In,{id:n.placementId,name:n.placementName}),n.forcePunt)return sn("forcePunt",{id:n.placementId,name:n.placementName}),De({forcePunt:"true"}),void e.collapse();t.adMap[n.arid].messagePort.onmessage=a.receiveMessage,Qt(n)?jn(t,n,i):e.collapse()},jn=(e,t,n)=>{_n(t)},qn=e=>{window.addEventListener("resize",(()=>{null==e||e.sendCustomMessage("resize",{height:window.innerHeight,width:window.innerWidth})}))},Vn="custommessage:notallowlisted";class Jn{constructor(e,t={}){this.adMap=e,this.msgListeners=t,this.sendMessageToAd=(e,t,n)=>{const a={command:t,data:n};this.adMap[e].messagePort.postMessage(a)},this.customMessage=(e,t,n,a,i)=>{const o=this.msgListeners;try{"undefined"!==n&&Array.isArray(n)&&(n.indexOf(e)>-1&&o[e]?(he(`custommessage:allowlisted:${e}`),o[e](t)):-1===n.indexOf(e)?(he(Vn),pe(Vn,{id:i,name:a})):h("Unrecognized custom message key: "+e))}catch(s){h("Custom Message Error",s)}},this.registerCustomMessageListener=(e,t,n)=>{let a=!1;const i=this.msgListeners;try{if(!i[e]||"function"!=typeof i[e]||n)i[e]=t,a=!0;else{const t=new Error("Custom message listener already exists for key: "+e);h("Duplicate Key",t)}}catch(o){h("Error registering custom message listener",o)}return a},this.sendCustomMessage=(e,t)=>{const n=this.adMap,a={key:e,data:t};for(const i in n)this.sendMessageToAd(i,"customMessage",a)},this.sendCustomMessageToAd=(e,t,n)=>{const a={key:t,data:n};this.sendMessageToAd(e,"customMessage",a)}}}class Yn{constructor(e={},t={},n={},a={},i={}){this.adMap=e,this.ADS_HANDLERS=t,this.AD_IDS=n,this.AD_TRACERS=a,this.viewableLatencyTrackers=i}}class Xn{constructor(e={},t){this.adMap=e,this.supportedCommands=t,this.receiveMessage=async e=>{const t=this.adMap,n=e.data,a=t[n.arid];try{const e=this.supportedCommands[n.command];e&&(await Kn(),await e(a,n.data))}catch(i){const t="Problem with message: "+JSON.stringify(e.data);h(t,i)}}}}const Kn=async()=>new Promise((e=>setTimeout(e,0)));var Gn;null===(Gn=null===performance||void 0===performance?void 0:performance.mark)||void 0===Gn||Gn.call(performance,"SafeFrame: SafeFrame: Starting DAsf");const Qn=new Yn,Zn=new Jn(null==Qn?void 0:Qn.adMap),ea=new class extends Wn{constructor(e=new Yn,t=new Jn(e.adMap)){const n=new yn(t,e);super(e,t,new Xn(e.adMap,n),n),this.initWindowSafeFrame=e=>{window.DAsf=e},this.getWindowSafeFrame=()=>window.DAsf}}(Qn,Zn);M((()=>ea.initAllSafeFrames()),h,"Error initializing safeFrame")()})();
//# sourceMappingURL=DAsf-1.50.a28dbd0b.js.map
